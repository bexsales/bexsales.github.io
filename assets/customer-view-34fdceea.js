import{j as e,H as J,T as C,P as t,B as V,J as Z,I as Q,y as X,K as Y,r as c,E as ee,G as te,S as ne,M as se,F as re}from"./index-c2df3293.js";import{T as S,a as l,b as ae,c as oe,s as ie,d as ce,e as le,f as de,g as ue}from"./search-fill-c586e2ad.js";import{O as he}from"./Select-4b09cfb8.js";import{C as pe}from"./Container-0742a46a.js";import{C as xe}from"./Card-cafcfd6c.js";const me={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function ge(r,a,o){return r?Math.max(0,(1+r)*a-o):0}function I({query:r}){return e.jsx(S,{children:e.jsx(l,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(J,{sx:{textAlign:"center"},children:[e.jsx(C,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(C,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',r,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}I.propTypes={query:t.string};function F({id:r,name:a,street:o,city:h,state:i,country:s,zip:x,phone:b,mobile:m,email:j,onSelect:y}){return e.jsxs(S,{hover:!0,tabIndex:-1,onClick:()=>y({id:r,name:a,street:o,city:h,state:i,country:s,zip:x,phone:b,mobile:m,email:j}),children:[e.jsx(l,{children:a}),e.jsx(l,{children:o}),e.jsx(l,{children:h}),e.jsx(l,{children:i}),e.jsx(l,{children:s}),e.jsx(l,{children:x}),e.jsx(l,{children:b}),e.jsx(l,{children:m}),e.jsx(l,{children:j})]})}F.propTypes={id:t.any,name:t.any,street:t.any,city:t.any,state:t.any,country:t.any,zip:t.any,phone:t.any,mobile:t.any,email:t.any,onSelect:t.func};function O({order:r,orderBy:a,headLabel:o,onRequestSort:h}){const i=s=>x=>{h(x,s)};return e.jsx(ae,{children:e.jsx(S,{children:o.map(s=>e.jsx(l,{align:s.align||"left",sortDirection:a===s.id?r:!1,sx:{width:s.width,minWidth:s.minWidth},children:e.jsxs(oe,{hideSortIcon:!0,active:a===s.id,direction:a===s.id?r:"asc",onClick:i(s.id),children:[s.label,a===s.id?e.jsx(V,{sx:{...me},children:r==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))})})}O.propTypes={order:t.oneOf(["asc","desc"]),orderBy:t.string,headLabel:t.array,onRequestSort:t.func};function z({emptyRows:r,height:a}){return r?e.jsx(S,{sx:{...a&&{height:a*r}},children:e.jsx(l,{colSpan:9})}):null}z.propTypes={emptyRows:t.number,height:t.number};function A({filterName:r,onFilterName:a,onClickSearch:o,onHitEnter:h}){return e.jsx(Z,{sx:{height:96,display:"flex",justifyContent:"space-between",p:i=>i.spacing(0,1,0,3)},children:e.jsx(he,{value:r,onChange:a,onKeyDown:h,placeholder:"Search customer...",endAdornment:e.jsx(Q,{position:"end",children:e.jsx(X,{onClick:o,edge:"end",children:e.jsx(Y,{icon:ie,sx:{color:"text.disabled",width:20,height:20}})})})})})}A.propTypes={filterName:t.string,onFilterName:t.func,onClickSearch:t.func,onHitEnter:t.func};function fe({showTitle:r,onSelect:a}){const[o,h]=c.useState([]),[i,s]=c.useState(0),[x,b]=c.useState(0),[m,j]=c.useState("asc"),[y,B]=c.useState("name"),[p,H]=c.useState(""),[d,q]=c.useState(25),[U,$]=c.useState(0),P=c.useRef(o),w=c.useRef(d),v=c.useRef(i),N=c.useRef(p);c.useEffect(()=>{P.current=o,w.current=d,v.current=i,N.current=p,T(v.current,w.current,P.current,N.current)},[]);const T=(n,u,g,k)=>{console.log("Fetching Customers");const G=n+1;let R=`${re.baseURL}/api-proxy/proxy?method=get&resource=customers&page=${G}&page_size=${u}`;k&&(R+=`&name=${k}`),console.log(R),ee.get(R,{headers:{Authorization:`Bearer ${te.get("jwt")}`}}).then(f=>{console.log(f.data.data),h([...g,...f.data.data]),$(f.data.count)}).catch(f=>{console.error("Error fetching customers:",f)})},L=(n,u)=>{console.log("sort",u),u!==""&&(j(y===u&&m==="asc"?"desc":"asc"),B(u))},M=(n,u)=>{s(u);const g=d*u;g>x&&(b(g),T(u,d,o,p))},D=n=>{s(0),q(parseInt(n.target.value,10))},W=n=>{H(n.target.value)},_=n=>{n.key==="Enter"&&E()},E=n=>{s(0),T(i,d,[],p)},K=!o.length&&!!p;return e.jsxs(pe,{children:[r&&e.jsx(ne,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(C,{variant:"h4",children:"Customers"})}),e.jsxs(xe,{children:[e.jsx(A,{filterName:p,onFilterName:W,onClickSearch:E,onHitEnter:_}),e.jsx(se,{children:e.jsx(ce,{sx:{overflow:"unset"},children:e.jsxs(le,{sx:{minWidth:800},children:[e.jsx(O,{order:m,orderBy:y,rowCount:o.length,onRequestSort:L,headLabel:[{id:"name",label:"Name"},{id:"street",label:"Street"},{id:"city",label:"City"},{id:"state",label:"State"},{id:"country",label:"Country"},{id:"zip",label:"Zip"},{id:"phone",label:"Phone"},{id:"mobile",label:"Mobile"},{id:"email",label:"Email"}]}),e.jsxs(de,{children:[o.slice(i*d,i*d+d).map(n=>e.jsx(F,{id:n.id,name:n.name,street:n.street,city:n.city,state:n.state_id.name,country:n.country_id.name,zip:n.zip,phone:n.phone,mobile:n.mobile,email:n.email,onSelect:a},n.id)),e.jsx(z,{height:77,emptyRows:ge(i,d,o.length)}),K&&e.jsx(I,{query:p})]})]})})}),e.jsx(ue,{page:i,component:"div",count:U,rowsPerPage:d,onPageChange:M,rowsPerPageOptions:[25],onRowsPerPageChange:D})]})]})}fe.propTypes={showTitle:t.bool,onSelect:t.func};export{fe as C};
