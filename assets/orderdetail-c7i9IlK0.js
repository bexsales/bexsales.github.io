import{g as Qe,k as Ve,r as i,i as Ge,a as Ze,j as e,h as Je,_ as ge,c as Ke,d as Xe,T as m,Y as Ye,N as ye,P as l,S as P,H as k,J as ce,D as S,B as et,O as tt,I as nt,Q as fe,E as Z,F as J,G as K,R as ot,$ as rt,W as st}from"./index-CrQ_cH7N.js";import{T as M,a as h,b as be,c as at,d as it,e as ve,f as Ce,g as _e,h as lt}from"./search-fill-Br6OXajf.js";import{L as ct}from"./label-Ds9NRwEI.js";import{D as L,a as N,b as E,c as $,P as dt}from"./product-template-view-CH54AVVW.js";import{O as ut}from"./Select-3JCclZm4.js";import{C as Se}from"./Container-Bo6T3YIZ.js";import{C as Te}from"./Card-xykPG5M7.js";import{F as de,T as G}from"./TextField-BcsQvwiw.js";import{C as Oe}from"./customer-view-DowZOLbJ.js";import{C as je}from"./Chip-BJvXCU4D.js";import{G as le}from"./Grid-Brtnl7Bz.js";import{L as ht}from"./LoadingButton-CIsc6dwm.js";import{u as xt}from"./use-auth-Ts08gJbQ.js";import"./isMuiElement-BEt_GLtU.js";function pt(n){return Qe("MuiDialogContentText",n)}Ve("MuiDialogContentText",["root"]);const mt=["children","className"],jt=n=>{const{classes:o}=n,d=Xe({root:["root"]},pt,o);return ge({},o,d)},gt=Je(m,{shouldForwardProp:n=>Ye(n)||n==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(n,o)=>o.root})({}),pe=i.forwardRef(function(o,r){const d=Ge({props:o,name:"MuiDialogContentText"}),{className:a}=d,s=Ze(d,mt),g=jt(s);return e.jsx(gt,ge({component:"p",variant:"body1",color:"text.secondary",ref:r,ownerState:s,className:Ke(g.root,a)},d,{classes:g}))}),yt={width:24,height:24,body:'<g id="evaCopyOutline0"><g id="evaCopyOutline1"><g id="evaCopyOutline2" fill="currentColor"><path d="M18 21h-6a3 3 0 0 1-3-3v-6a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3Zm-6-10a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1Z"/><path d="M9.73 15H5.67A2.68 2.68 0 0 1 3 12.33V5.67A2.68 2.68 0 0 1 5.67 3h6.66A2.68 2.68 0 0 1 15 5.67V9.4h-2V5.67a.67.67 0 0 0-.67-.67H5.67a.67.67 0 0 0-.67.67v6.66a.67.67 0 0 0 .67.67h4.06Z"/></g></g></g>'},ft={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function bt(n,o,r){return n?Math.max(0,(1+n)*o-r):0}function Pe({query:n}){return e.jsx(M,{children:e.jsx(h,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ye,{sx:{textAlign:"center"},children:[e.jsx(m,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(m,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}Pe.propTypes={query:l.string};function we({emptyRows:n,height:o}){return n?e.jsx(M,{sx:{...o&&{height:o*n}},children:e.jsx(h,{colSpan:9})}):null}we.propTypes={emptyRows:l.number,height:l.number};function Ie({handleSendInvoice:n,partner:o,invoiceName:r,invoiceId:d,customerEmail:a}){const[s,g]=i.useState(!1),p=()=>{g(!0)},O=()=>{g(!1)},y=async()=>{await n(d)===!0&&O()};return e.jsxs(P,{direction:"row",alignItems:"center",children:[e.jsx(P,{direction:"column",alignItems:"center",spacing:1,children:e.jsx(k,{onClick:p,sx:{color:"blue",backgroundColor:"#fff","&:hover":{backgroundColor:"#bbf"}},children:e.jsx(ce,{icon:"mdi:send"})})}),e.jsxs(L,{open:s,onClose:O,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(N,{id:"alert-dialog-title",children:"Confirm Send"}),e.jsx(E,{children:e.jsxs(pe,{id:"alert-dialog-description",children:["Are you sure you want to send this invoice ",e.jsxs("b",{children:["[",r,"]"]})," to ",e.jsxs("b",{children:[o," [",a,"]"]}),"?"]})}),e.jsxs($,{children:[e.jsx(S,{onClick:O,color:"primary",children:"Cancel"}),e.jsx(S,{onClick:y,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}Ie.propTypes={handleSendInvoice:l.func,partner:l.any,invoiceName:l.any,invoiceId:l.any,customerEmail:l.any};function ke({id:n,name:o,payment_state:r,customer:d,customer_email:a,create_date:s,amount_untaxed:g,amount_tax:p,amount_total:O,state:y,invoice_origin:I,invoice_date:v,handleSendInvoice:C}){const D=_=>`$${_.toFixed(2)}`;return e.jsxs(M,{hover:!0,tabIndex:-1,children:[e.jsx(h,{children:y==="posted"&&r==="not_paid"&&a&&e.jsx(Ie,{handleSendInvoice:C,partner:d,invoiceName:o,invoiceId:n,customerEmail:a})}),e.jsx(h,{children:o}),e.jsx(h,{children:r}),e.jsx(h,{children:d}),e.jsx(h,{children:a}),e.jsx(h,{children:s}),e.jsx(h,{children:D(g)}),e.jsx(h,{children:D(p)}),e.jsx(h,{children:D(O)}),e.jsx(h,{children:e.jsx(ct,{color:y!=="draft"&&"error"||"success",children:y})}),e.jsx(h,{children:I}),e.jsx(h,{children:v})]})}ke.propTypes={id:l.any,name:l.any,payment_state:l.any,customer:l.any,customer_email:l.any,create_date:l.any,amount_untaxed:l.any,amount_tax:l.any,amount_total:l.any,state:l.any,invoice_origin:l.any,invoice_date:l.any,handleSendInvoice:l.func};function De({order:n,orderBy:o,headLabel:r,onRequestSort:d}){const a=s=>g=>{d(g,s)};return e.jsx(be,{children:e.jsx(M,{children:r.map(s=>e.jsx(h,{align:s.align||"left",sortDirection:o===s.id?n:!1,sx:{width:s.width,minWidth:s.minWidth},children:e.jsxs(at,{hideSortIcon:!0,active:o===s.id,direction:o===s.id?n:"desc",onClick:a(s.id),children:[s.label,o===s.id?e.jsx(et,{sx:{...ft},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))})})}De.propTypes={order:l.oneOf(["asc","desc"]),orderBy:l.string,headLabel:l.array,onRequestSort:l.func};function Re({filterName:n,onFilterName:o,onClickSearch:r,onHitEnter:d}){return e.jsx(tt,{sx:{height:96,display:"flex",justifyContent:"space-between",p:a=>a.spacing(0,1,0,3)},children:e.jsx(ut,{value:n,onChange:o,onKeyDown:d,placeholder:"Search invoice...",endAdornment:e.jsx(nt,{position:"end",children:e.jsx(k,{onClick:r,edge:"end",children:e.jsx(fe,{icon:it,sx:{color:"text.disabled",width:20,height:20}})})})})})}Re.propTypes={filterName:l.string,onFilterName:l.func,onClickSearch:l.func,onHitEnter:l.func};function qe({invoiceOrigin:n}){const o=n,[r,d]=i.useState([]),[a,s]=i.useState(0),[g,p]=i.useState(0),[O,y]=i.useState("asc"),[I,v]=i.useState("name"),[C,D]=i.useState(""),[_,X]=i.useState(25),[ue,he]=i.useState(0),U=i.useRef(r),Y=i.useRef(_),z=i.useRef(a),ee=i.useRef(C);i.useEffect(()=>{U.current=r,Y.current=_,z.current=a,ee.current=C,B(z.current,Y.current,U.current,ee.current,o)},[]);const B=(u,f,w,q,A)=>{console.log("Fetching Invoices");const Q=u+1;let W=`${Z.baseURL}/api-proxy/proxy?method=get&resource=invoices&page=${Q}&page_size=${f}`;q&&(W+=`&name=${q}`),A&&(W+=`&invoice_origin=${A}`),console.log(W),J.get(W,{headers:{Authorization:`Bearer ${K.get("jwt")}`}}).then(F=>{console.log(F.data.data),d([...w,...F.data.data]),he(F.data.count)}).catch(F=>{console.error("Error fetching invoices:",F)})},te=(u,f)=>{f!==""&&(y(I===f&&O==="asc"?"desc":"asc"),v(f))},ne=(u,f)=>{s(f);const w=_*f;w>g&&(p(w),B(f,_,r,C,o))},oe=u=>{s(0),X(parseInt(u.target.value,10))},re=u=>{D(u.target.value)},H=u=>{u.key==="Enter"&&se()},se=u=>{s(0),B(a,_,[],C)},ae=async u=>{try{console.log("Sending Invoice");const w=`${Z.baseURL}/api-proxy/proxy?method=post&resource=send-invoices`;console.log(w);const q={invoice:{id:parseInt(u,10)}};console.log("Request body",q);const A=await J.post(w,q,{headers:{Authorization:`Bearer ${K.get("jwt")}`}});return console.log(A.data),A.data.success===!1?(alert("Invoice failed to send!"),!1):(alert("Invoice Sent!"),!0)}catch(f){return console.error("Error sending invoice:",f),alert("Error sending invoice!"),!1}},xe=!r.length&&!!C;return e.jsx(Se,{children:e.jsxs(Te,{children:[e.jsx(Re,{filterName:C,onFilterName:re,onClickSearch:se,onHitEnter:H}),e.jsx(ot,{children:e.jsx(ve,{sx:{overflow:"unset"},children:e.jsxs(Ce,{sx:{minWidth:800},children:[e.jsx(De,{order:O,orderBy:I,rowCount:r.length,onRequestSort:te,headLabel:[{id:"email_action",label:""},{id:"name",label:"Name"},{id:"payment_state",label:"Payment State"},{id:"customer",label:"Customer"},{id:"customer_email",label:"Email"},{id:"create_date",label:"Create Date"},{id:"amount_untaxed",label:"Amount Untaxed"},{id:"amount_tax",label:"Amount Tax"},{id:"amount_total",label:"Amount Total"},{id:"state",label:"State"},{id:"invoice_origin",label:"Order"},{id:"invoice_Date",label:"Invoice Date"}]}),e.jsxs(_e,{children:[r.slice(a*_,a*_+_).map(u=>e.jsx(ke,{id:u.id,name:u.name,payment_state:u.payment_state,customer:u.customer_id.name,customer_email:u.customer_id.email,create_date:u.create_date,amount_untaxed:u.amount_untaxed,amount_tax:u.amount_tax,amount_total:u.amount_total,state:u.state,invoice_origin:u.invoice_origin,invoice_date:u.invoice_date,handleSendInvoice:f=>ae(f,u.id)},u.id)),e.jsx(we,{height:77,emptyRows:bt(a,_,r.length)}),xe&&e.jsx(Pe,{query:C})]})]})})}),e.jsx(lt,{page:a,component:"div",count:ue,rowsPerPage:_,onPageChange:ne,rowsPerPageOptions:[25],onRowsPerPageChange:oe})]})})}qe.propTypes={invoiceOrigin:l.string};function Ae({invoiceOrigin:n}){const[o,r]=i.useState(!1),d=()=>{r(!0)},a=()=>{r(!1)};return e.jsxs("div",{children:[e.jsx(S,{variant:"outlined",onClick:d,children:"Invoices"}),e.jsxs(L,{open:o,onClose:a,maxWidth:"xl",fullWidth:!0,children:[e.jsx(N,{children:"Invoices"}),e.jsx(E,{children:e.jsx(de,{sx:{width:"100%"},children:e.jsx(qe,{invoiceOrigin:n,style:{width:"100%"}})})}),e.jsx($,{children:e.jsx(S,{onClick:a,color:"primary",children:"Close"})})]})]})}Ae.propTypes={invoiceOrigin:l.func};function Fe({onSelect:n}){const[o,r]=i.useState(!1),d=()=>{r(!0)},a=()=>{r(!1)},s=g=>{n(g),a()};return e.jsxs("div",{children:[e.jsx(S,{variant:"outlined",onClick:d,children:"Add Product"}),e.jsxs(L,{open:o,onClose:a,maxWidth:"xl",fullWidth:!0,children:[e.jsx(N,{children:"Products"}),e.jsx(E,{children:e.jsx(de,{sx:{width:"100%"},children:e.jsx(dt,{onSelect:s,style:{width:"100%"}})})}),e.jsx($,{children:e.jsx(S,{onClick:a,color:"primary",children:"Close"})})]})]})}Fe.propTypes={onSelect:l.func};function Le({handleSendOrder:n,partner:o}){const[r,d]=i.useState(!1),a=()=>{d(!0)},s=()=>{d(!1)};return e.jsxs(P,{direction:"row",alignItems:"center",children:[e.jsxs(P,{direction:"column",alignItems:"center",spacing:1,children:[e.jsx(k,{onClick:a,sx:{color:"blue",backgroundColor:"#ddf","&:hover":{backgroundColor:"#bbf"}},children:e.jsx(ce,{icon:"mdi:send"})}),e.jsx(m,{variant:"caption",sx:{color:"blue"},children:"Email"})]}),e.jsxs(L,{open:r,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(N,{id:"alert-dialog-title",children:"Confirm Send"}),e.jsx(E,{children:e.jsxs(pe,{id:"alert-dialog-description",children:["Are you sure you want to send this order to ",e.jsxs("b",{children:[o.name," [",o.email,"]"]}),"?"]})}),e.jsxs($,{children:[e.jsx(S,{onClick:s,color:"primary",children:"Cancel"}),e.jsx(S,{onClick:n,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}Le.propTypes={handleSendOrder:l.func,partner:l.any};function Ne({onSelect:n}){const[o,r]=i.useState(!1),d=()=>{r(!0)},a=()=>{r(!1)},s=g=>{n(g),a()};return e.jsxs("div",{children:[e.jsx(S,{variant:"outlined",onClick:d,children:"Set"}),e.jsxs(L,{open:o,onClose:a,maxWidth:"xl",fullWidth:!0,children:[e.jsx(N,{children:"Customers"}),e.jsx(E,{sx:{padding:0},children:e.jsx(de,{sx:{width:"100%"},children:e.jsx(Oe,{onSelect:s,style:{width:"100%"}})})}),e.jsx($,{children:e.jsx(S,{onClick:a,color:"primary",children:"Close"})})]})]})}Ne.propTypes={onSelect:l.func};function Ee({onSelect:n,filterParentContactOption:o}){const[r,d]=i.useState(!1),a=()=>{d(!0)},s=()=>{d(!1)},g=p=>{n(p),s()};return i.useEffect(()=>{console.log("DeliveryPopupModal Props:"),console.log("filterParentContactOption:",o)},[n,o]),e.jsxs("div",{children:[e.jsx(S,{variant:"outlined",onClick:a,children:"Set"}),e.jsxs(L,{open:r,onClose:s,maxWidth:"xl",fullWidth:!0,children:[e.jsx(N,{children:"Customers"}),e.jsx(E,{sx:{padding:0},children:e.jsx(de,{sx:{width:"100%"},children:e.jsx(Oe,{onSelect:g,filterTypeOption:"delivery",filterParentContactOption:o,style:{width:"100%"}})})}),e.jsx($,{children:e.jsx(S,{onClick:s,color:"primary",children:"Close"})})]})]})}Ee.propTypes={onSelect:l.func,filterParentContactOption:l.number};function $e({handleCancelOrder:n}){const[o,r]=i.useState(!1),d=()=>{r(!0)},a=()=>{r(!1)};return e.jsxs(P,{direction:"row",alignItems:"center",children:[e.jsxs(P,{direction:"column",alignItems:"center",spacing:1,children:[e.jsx(k,{onClick:d,sx:{color:"red",backgroundColor:"#fdd","&:hover":{backgroundColor:"#fbb"}},children:e.jsx(ce,{icon:"eva:close-outline"})}),e.jsx(m,{variant:"caption",sx:{color:"red"},children:"Cancel"})]}),e.jsxs(L,{open:o,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(N,{id:"alert-dialog-title",children:"Confirm Cancellation"}),e.jsx(E,{children:e.jsx(pe,{id:"alert-dialog-description",children:"Are you sure you want to cancel this order?"})}),e.jsxs($,{children:[e.jsx(S,{onClick:a,color:"primary",children:"Cancel"}),e.jsx(S,{onClick:n,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}$e.propTypes={handleCancelOrder:l.func};function We({orderId:n}){const[o,r]=i.useState(!1),[d,a]=i.useState(""),[s,g]=i.useState(""),[p,O]=i.useState({id:0,name:"",street:"",city:"",state:"",country:"",zip:"",phone:"",mobile:"",email:""}),[y,I]=i.useState({id:0,name:"",street:"",city:"",state:"",country:"",zip:"",phone:"",mobile:"",email:""}),[v,C]=i.useState([]),[D,_]=i.useState([]),[X,ue]=i.useState({}),[he,U]=i.useState(0),[Y,z]=i.useState(0),[ee,B]=i.useState(0),[te,ne]=i.useState(""),[oe,re]=i.useState(""),[H,se]=i.useState(""),[ae,xe]=i.useState("");i.useEffect(()=>{Me()},[]);const u=()=>{Q(!0,!1)},f=()=>{Q(!1,!0)},w=(t,c)=>{console.log("Fetching order totals");const j=`${Z.baseURL}/api-proxy/proxy?method=post&resource=ordertotals`;console.log(j);const x=v.map(b=>({product_id:b[2].id,product_uom_qty:b[2].product_uom_qty})),R={partner_id:p.id,order_line:x};console.log("Request body",R),J.post(j,R,{headers:{Authorization:`Bearer ${K.get("jwt")}`}}).then(b=>{console.log(b.data),ue(b.data.result.product_prices),U(b.data.result.subtotal),z(b.data.result.total)}).catch(b=>{console.error("Error fetching order totals:",b)})};i.useEffect(()=>{w();const t=v.reduce((c,j)=>c+j[2].product_uom_qty,0);B(t)},[p,v]);const q=t=>{ne(t.target.value)},A=t=>{re(t.target.value)},Q=(t,c)=>{r(!0),console.log("Saving Order");let j="post";t===!0&&(j="cancel");const x=`${Z.baseURL}/api-proxy/proxy?method=${j}&resource=orders`;console.log(x),console.log(v);const R=v.map(T=>[T[0],T[1],{product_id:T[2].id,product_uom_qty:T[2].product_uom_qty}]),b=D.map(T=>[2,T[1],{}]),V=R.concat(b),me={order:{id:parseInt(n,10),partner_id:p.id,order_line:V,x_studio_notes:te,client_order_ref:oe,...c&&{is_send:!0},...y.id&&{partner_shipping_id:y.id}}};console.log("Request body",me),J.post(x,me,{headers:{Authorization:`Bearer ${K.get("jwt")}`}}).then(T=>{console.log(T.data),r(!1),T.data.result.success===!1?alert(T.data.result.message):window.location.reload()}).catch(T=>{console.error("Error saving order:",T)})},W=(t,c,j)=>{if(t<0||t>=v.length)return;const x=v.filter((b,V)=>V===t);x[0][0]!==0&&(console.log("Adding line to delete queue",x),_(D.concat(x)));const R=v.filter((b,V)=>V!==t);C(R)},F=(t,c)=>{const j=v.map((x,R)=>{if(R===t){console.log("handle qty change",x);const b=["consu","service"];return x[2].qty_available<c&&!b.includes(x[2].type)?(alert("Quantity available is insufficient."),x):[x[0],x[1],{...x[2],product_uom_qty:c!==0?Number(c):0}]}return x});C(j)},ie=t=>t?`$${t.toFixed(2)}`:"",Me=()=>{console.log("Fetching Order Details");const t=`${Z.baseURL}/api-proxy/proxy?method=get&resource=orders&order_id=${n}`;console.log(t),J.get(t,{headers:{Authorization:`Bearer ${K.get("jwt")}`}}).then(c=>{console.log(c.data.data),a(c.data.data.name),se(c.data.data.ship_tracking_number),xe(c.data.data.ship_date),O(c.data.data.customer_id),I(c.data.data.partner_shipping_id),ne(c.data.data.x_studio_notes),re(c.data.data.client_order_ref?c.data.data.client_order_ref:"");const j=c.data.data.order_line.map(x=>[1,x.id,{line_id:x.id,id:x.product_id.id,name:x.name,product_uom_qty:x.product_uom_qty,attributes:x.product_id.attributes,qty_available:x.product_id.qty_available,type:x.product_id.type}]);console.log(j),C(j),U(c.data.data.amount_untaxed),z(c.data.data.amount_total),g(c.data.data.state)}).catch(c=>{console.error("Error fetching order details:",c)})},Ue=t=>{console.log("Setting order partner"),console.log(t),O({id:t.id,name:t.name,street:t.street,city:t.city,state:t.state,country:t.country,zip:t.zip,phone:t.phone,mobile:t.mobile,email:t.email}),I({id:0,name:"",street:"",city:"",state:"",country:"",zip:"",phone:"",mobile:"",email:""})},ze=t=>{console.log("Setting order partner"),console.log(t),I({id:t.id,name:t.name,street:t.street,city:t.city,state:t.state,country:t.country,zip:t.zip,phone:t.phone,mobile:t.mobile,email:t.email})},Be=t=>{console.log("Adding order lines"),console.log(t),t.forEach(c=>{C(j=>[...j,[0,0,{id:c.id,name:`[${c.default_code}] ${c.name}`,product_uom_qty:c.qty_needed||1,attributes:c.attributes,qty_available:c.qty_available}]])})},He=e.jsxs(e.Fragment,{children:[e.jsx(P,{spacing:3,direction:"row",alignItems:"center",children:e.jsx(G,{fullWidth:!0,name:"partner_id",label:"Customer",value:p.name,InputProps:{readOnly:!0,endAdornment:e.jsx(k,{children:e.jsx(Ne,{onSelect:Ue})})}})}),p.name&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(m,{variant:"body1",fontWeight:"bold",children:"Address:"}),e.jsx(m,{variant:"body1",children:p.street}),e.jsxs(m,{variant:"body1",children:[p.city," ",p.state]}),e.jsxs(m,{variant:"body1",children:[p.country," ",p.zip]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Phone:"})," ",p.phone]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Mobile:"})," ",p.mobile]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Email:"})," ",p.email]})]}),e.jsx("div",{style:{margin:"16px 0"}}),p.name&&e.jsx(P,{spacing:3,direction:"row",alignItems:"center",children:e.jsx(G,{fullWidth:!0,name:"partner_shipping_id",label:"Delivery Address",value:y.name,InputProps:{readOnly:!0,endAdornment:e.jsx(k,{children:e.jsx(Ee,{onSelect:ze,filterParentContactOption:p.id})})}})}),y.name&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(m,{variant:"body1",fontWeight:"bold",children:"Address:"}),e.jsx(m,{variant:"body1",children:y.street}),e.jsxs(m,{variant:"body1",children:[y.city," ",p.state]}),e.jsxs(m,{variant:"body1",children:[y.country," ",p.zip]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Phone:"})," ",y.phone]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Mobile:"})," ",y.mobile]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Email:"})," ",y.email]})]}),e.jsx("div",{style:{margin:"16px 0"}}),H&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsxs(m,{variant:"body1",children:[e.jsx("strong",{children:"Tracking #: "}),H,e.jsx(k,{onClick:()=>{navigator.clipboard.writeText(H),alert("Tracking number copied to clipboard!")},children:e.jsx(fe,{icon:yt,sx:{color:"text.disabled",width:20,height:20}})})]})]}),ae&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsxs(m,{variant:"body1",children:[e.jsx("strong",{children:"Ship Date: "}),ae]})]}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(k,{children:e.jsx(Fe,{onSelect:Be})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(ve,{component:ye,children:e.jsxs(Ce,{children:[e.jsx(be,{children:e.jsxs(M,{children:[e.jsx(h,{children:"Product"}),e.jsx(h,{children:"Attributes"}),e.jsx(h,{children:"Unit Price"}),e.jsx(h,{children:"Qty Available"}),e.jsx(h,{children:"Qty"}),e.jsx(h,{children:"Subtotal"}),e.jsx(h,{})]})}),e.jsx(_e,{children:v.map((t,c)=>e.jsxs(M,{children:[e.jsx(h,{children:t[2].name}),e.jsx(h,{children:t[2].attributes.map((j,x)=>e.jsx(je,{label:j.name||j.attribute,variant:"outlined"},x))}),e.jsx(h,{children:ie(X[t[2].id])}),e.jsx(h,{children:t[2].qty_available}),e.jsx(h,{children:e.jsx(G,{type:"number",style:{minWidth:"100px"},value:t[2].product_uom_qty!==0?t[2].product_uom_qty:"",onChange:j=>F(c,j.target.value)})}),e.jsx(h,{children:ie(X[t[2].id]*t[2].product_uom_qty)}),e.jsx(h,{align:"right",children:e.jsx(k,{onClick:()=>W(c),children:e.jsx(ce,{icon:"eva:trash-2-outline"})})})]},c))})]})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsxs(m,{variant:"body1",fontWeight:"bold",children:["Total Product Qty: ",ee]}),e.jsxs(m,{variant:"body1",fontWeight:"bold",children:["Subtotal: ",ie(he)]}),e.jsxs(m,{variant:"body1",fontWeight:"bold",children:["Total: ",ie(Y)]}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(le,{container:!0,spacing:2,children:e.jsx(le,{item:!0,xs:12,md:6,lg:6,children:e.jsx(G,{label:"Notes",value:te,multiline:!0,fullWidth:!0,rows:4,onChange:q})})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(le,{container:!0,spacing:2,children:e.jsx(le,{item:!0,xs:12,md:6,lg:6,children:e.jsx(G,{label:"PO Number",value:oe,fullWidth:!0,onChange:A})})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(ht,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:Q,loading:o,children:"Save"})]});return e.jsxs(Se,{children:[e.jsxs(P,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsxs(m,{variant:"h4",children:["Order ",d,e.jsx(je,{label:s,color:s==="cancel"?"danger":"primary",variant:"outlined",style:{marginLeft:"10px"}})]}),(s==="draft"||s==="sent")&&e.jsxs(P,{direction:"row",spacing:2,children:[e.jsx($e,{handleCancelOrder:u}),e.jsx(Le,{handleSendOrder:f,partner:p})]}),s==="sale"&&e.jsx(P,{direction:"row",spacing:2,children:e.jsx(Ae,{invoiceOrigin:d})})]}),He,e.jsx(Te,{})]})}We.propTypes={orderId:l.any};function Ft(){xt();const{orderId:n}=rt();return e.jsxs(e.Fragment,{children:[e.jsx(st,{children:e.jsx("title",{children:" Order Detail | BEX Sales "})}),e.jsx(We,{orderId:n})]})}export{Ft as default};
