import{j as e,H as J,T as R,P as t,B as V,J as Q,I as X,y as Y,K as Z,r as i,E as ee,G as te,S as ne,M as se,F as re}from"./index-C-Ib1g4l.js";import{T,a as l,b as ae,c as oe,s as ce,d as ie,e as de,f as le,g as ue}from"./search-fill-CoAwiUaX.js";import{O as pe}from"./Select-BJD_Lyc_.js";import{C as he}from"./Container-BdVsDc8s.js";import{C as xe}from"./Card-DYt72zyV.js";const ge={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function fe(r,a,o){return r?Math.max(0,(1+r)*a-o):0}function k({query:r}){return e.jsx(T,{children:e.jsx(l,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(J,{sx:{textAlign:"center"},children:[e.jsx(R,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(R,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',r,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}k.propTypes={query:t.string};function F({emptyRows:r,height:a}){return r?e.jsx(T,{sx:{...a&&{height:a*r}},children:e.jsx(l,{colSpan:9})}):null}F.propTypes={emptyRows:t.number,height:t.number};function I({id:r,default_code:a,name:o,category:p,type:c,standard_price:s,lst_price:x,description_sale:m,onSelect:j}){const y=b=>`$${b.toFixed(2)}`;return e.jsxs(T,{hover:!0,tabIndex:-1,onClick:()=>j({id:r,default_code:a,name:o,category:p,type:c,standard_price:s,lst_price:x,description_sale:m}),children:[e.jsx(l,{children:a}),e.jsx(l,{children:o}),e.jsx(l,{children:p}),e.jsx(l,{children:c}),e.jsx(l,{children:y(s)}),e.jsx(l,{children:y(x)}),e.jsx(l,{children:m})]})}I.propTypes={id:t.any,default_code:t.any,name:t.any,category:t.any,type:t.any,standard_price:t.any,lst_price:t.any,description_sale:t.any,onSelect:t.func};function O({order:r,orderBy:a,headLabel:o,onRequestSort:p}){const c=s=>x=>{p(x,s)};return e.jsx(ae,{children:e.jsx(T,{children:o.map(s=>e.jsx(l,{align:s.align||"left",sortDirection:a===s.id?r:!1,sx:{width:s.width,minWidth:s.minWidth},children:e.jsxs(oe,{hideSortIcon:!0,active:a===s.id,direction:a===s.id?r:"desc",onClick:c(s.id),children:[s.label,a===s.id?e.jsx(V,{sx:{...ge},children:r==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))})})}O.propTypes={order:t.oneOf(["asc","desc"]),orderBy:t.string,headLabel:t.array,onRequestSort:t.func};function $({filterName:r,onFilterName:a,onClickSearch:o,onHitEnter:p}){return e.jsx(Q,{sx:{height:96,display:"flex",justifyContent:"space-between",p:c=>c.spacing(0,1,0,3)},children:e.jsx(pe,{value:r,onChange:a,onKeyDown:p,placeholder:"Search product...",endAdornment:e.jsx(X,{position:"end",children:e.jsx(Y,{onClick:o,edge:"end",children:e.jsx(Z,{icon:ce,sx:{color:"text.disabled",width:20,height:20}})})})})})}$.propTypes={filterName:t.string,onFilterName:t.func,onClickSearch:t.func,onHitEnter:t.func};function me({showTitle:r,onSelect:a}){const[o,p]=i.useState([]),[c,s]=i.useState(0),[x,m]=i.useState(0),[j,y]=i.useState("asc"),[b,A]=i.useState("name"),[h,B]=i.useState(""),[d,D]=i.useState(25),[H,q]=i.useState(0),w=i.useRef(o),v=i.useRef(d),C=i.useRef(c),_=i.useRef(h);i.useEffect(()=>{w.current=o,v.current=d,C.current=c,_.current=h,P(C.current,v.current,w.current,_.current)},[]);const P=(n,u,g,E)=>{console.log("Fetching Products");const G=n+1;let S=`${re.baseURL}/api-proxy/proxy?method=get&resource=products&page=${G}&page_size=${u}`;E&&(S+=`&name=${E}`),console.log(S),ee.get(S,{headers:{Authorization:`Bearer ${te.get("jwt")}`}}).then(f=>{console.log(f.data.data),p([...g,...f.data.data]),q(f.data.count)}).catch(f=>{console.error("Error fetching products:",f)})},L=(n,u)=>{u!==""&&(y(b===u&&j==="asc"?"desc":"asc"),A(u))},z=(n,u)=>{s(u);const g=d*u;g>x&&(m(g),P(u,d,o,h))},M=n=>{s(0),D(parseInt(n.target.value,10))},W=n=>{B(n.target.value)},K=n=>{n.key==="Enter"&&N()},N=n=>{s(0),P(c,d,[],h)},U=!o.length&&!!h;return e.jsxs(he,{children:[r&&e.jsx(ne,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(R,{variant:"h4",children:"Products"})}),e.jsxs(xe,{children:[e.jsx($,{filterName:h,onFilterName:W,onClickSearch:N,onHitEnter:K}),e.jsx(se,{children:e.jsx(ie,{sx:{overflow:"unset"},children:e.jsxs(de,{sx:{minWidth:800},children:[e.jsx(O,{order:j,orderBy:b,rowCount:o.length,onRequestSort:L,headLabel:[{id:"default_code",label:"Default Code"},{id:"name",label:"Name"},{id:"category",label:"Category"},{id:"type",label:"Type"},{id:"standard_price",label:"Standard Price"},{id:"lst_price",label:"List Price"},{id:"description_sale",label:"Description"}]}),e.jsxs(le,{children:[o.slice(c*d,c*d+d).map(n=>e.jsx(I,{id:n.id,default_code:n.default_code,name:n.name,category:n.categ_id.name,type:n.type,standard_price:n.standard_price,lst_price:n.lst_price,description_sale:n.description_sale,onSelect:a},n.id)),e.jsx(F,{height:77,emptyRows:fe(c,d,o.length)}),U&&e.jsx(k,{query:h})]})]})})}),e.jsx(ue,{page:c,component:"div",count:H,rowsPerPage:d,onPageChange:z,rowsPerPageOptions:[25],onRowsPerPageChange:M})]})]})}me.propTypes={showTitle:t.bool,onSelect:t.func};export{me as P};
