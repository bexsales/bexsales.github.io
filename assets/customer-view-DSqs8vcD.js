import{j as e,H as ae,T as I,P as t,V as oe,B as ie,J as ce,I as le,D as de,K as ue,r,y as he,z as pe,S as M,M as xe,A as me}from"./index-B8l5MPOb.js";import{T as _,a as i,b as fe,c as ge,s as be,d as ye,e as je,f as Se,g as Te}from"./search-fill-BqqYaOZF.js";import{O as Ce}from"./Select-CETdWe22.js";import{C as Re}from"./CircularProgress-j2gw31bc.js";import{C as Pe}from"./Container-57NIevnF.js";import{C as _e}from"./Card-DExzLAxj.js";const we={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function ve(a,o,l){return a?Math.max(0,(1+a)*o-l):0}function U({query:a}){return e.jsx(_,{children:e.jsx(i,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ae,{sx:{textAlign:"center"},children:[e.jsx(I,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(I,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',a,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}U.propTypes={query:t.string};function D({id:a,name:o,street:l,city:x,state:m,country:s,zip:c,phone:j,mobile:d,email:f,is_brick_and_mortar:S,is_sells_at_roadshows:T,onSelect:C}){const w=oe(),N=C||(u=>{console.log("Navigating to customer",u),w(`/customers/${u.id}`)});return e.jsxs(_,{hover:!0,tabIndex:-1,onClick:()=>N({id:a,name:o,street:l,city:x,state:m,country:s,zip:c,phone:j,mobile:d,email:f,is_brick_and_mortar:S,is_sells_at_roadshows:T}),children:[e.jsx(i,{children:o}),e.jsx(i,{children:l}),e.jsx(i,{children:x}),e.jsx(i,{children:m}),e.jsx(i,{children:s}),e.jsx(i,{children:c}),e.jsx(i,{children:j}),e.jsx(i,{children:d}),e.jsx(i,{children:f}),e.jsx(i,{children:S?"Yes":"No"}),e.jsx(i,{children:T?"Yes":"No"})]})}D.propTypes={id:t.any,name:t.any,street:t.any,city:t.any,state:t.any,country:t.any,zip:t.any,phone:t.any,mobile:t.any,email:t.any,is_brick_and_mortar:t.bool,is_sells_at_roadshows:t.bool,onSelect:t.func};function W({order:a,orderBy:o,headLabel:l,onRequestSort:x}){const m=s=>c=>{x(c,s)};return e.jsx(fe,{children:e.jsx(_,{children:l.map(s=>e.jsx(i,{align:s.align||"left",sortDirection:o===s.id?a:!1,sx:{width:s.width,minWidth:s.minWidth},children:e.jsxs(ge,{hideSortIcon:!0,active:o===s.id,direction:o===s.id?a:"asc",onClick:m(s.id),children:[s.label,o===s.id?e.jsx(ie,{sx:{...we},children:a==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))})})}W.propTypes={order:t.oneOf(["asc","desc"]),orderBy:t.string,headLabel:t.array,onRequestSort:t.func};function K({emptyRows:a,height:o}){return a?e.jsx(_,{sx:{...o&&{height:o*a}},children:e.jsx(i,{colSpan:9})}):null}K.propTypes={emptyRows:t.number,height:t.number};function V({filterName:a,onFilterName:o,onClickSearch:l,onHitEnter:x}){return e.jsx(ce,{sx:{height:96,display:"flex",justifyContent:"space-between",p:m=>m.spacing(0,1,0,3)},children:e.jsx(Ce,{value:a,onChange:o,onKeyDown:x,placeholder:"Search customer...",endAdornment:e.jsx(le,{position:"end",children:e.jsx(de,{onClick:l,edge:"end",children:e.jsx(ue,{icon:be,sx:{color:"text.disabled",width:20,height:20}})})})})})}V.propTypes={filterName:t.string,onFilterName:t.func,onClickSearch:t.func,onHitEnter:t.func};function Ne({showTitle:a,onSelect:o,filterTypeOption:l,filterParentContactOption:x}){const[m,s]=r.useState(!1),[c,j]=r.useState([]),[d,f]=r.useState(0),[S,T]=r.useState(0),[C,w]=r.useState("asc"),[v,N]=r.useState("name"),[u,Y]=r.useState(""),[R,ke]=r.useState(l),[P,Ie]=r.useState(x),[h,J]=r.useState(25),[Z,G]=r.useState(0),E=r.useRef(c),F=r.useRef(h),O=r.useRef(d),z=r.useRef(u),$=r.useRef(R),A=r.useRef(P);r.useEffect(()=>{E.current=c,F.current=h,O.current=d,z.current=u,$.current=R,A.current=P,k(O.current,F.current,E.current,z.current,$.current,A.current)},[]);const k=(n,p,g,H,q,L)=>{console.log("Fetching Customers"),s(!0);const re=n+1;let b=`${me.baseURL}/api-proxy/proxy?method=get&resource=customers&page=${re}&page_size=${p}`;H&&(b+=`&name=${H}`),q&&(b+=`&type=${q}`),L&&(b+=`&parent_contact_id=${L}`),console.log(b),he.get(b,{headers:{Authorization:`Bearer ${pe.get("jwt")}`}}).then(y=>{console.log(y.data.data),j([...g,...y.data.data]),G(y.data.count)}).catch(y=>{console.error("Error fetching customers:",y)}).finally(()=>{s(!1)})},Q=(n,p)=>{console.log("sort",p),p!==""&&(w(v===p&&C==="asc"?"desc":"asc"),N(p))},X=(n,p)=>{f(p);const g=h*p;window.scrollTo({top:0,behavior:"smooth"}),g>S&&(T(g),k(p,h,c,u,R,P))},ee=n=>{f(0),J(parseInt(n.target.value,10))},te=n=>{Y(n.target.value)},ne=n=>{n.key==="Enter"&&B()},B=n=>{f(0),k(d,h,[],u,R,P)},se=!c.length&&!!u;return e.jsxs(e.Fragment,{children:[m&&e.jsx(M,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",bgcolor:"rgba(255, 255, 255, 0.6)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Re,{})}),e.jsxs(Pe,{children:[a&&e.jsx(M,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(I,{variant:"h4",children:"Customers"})}),e.jsxs(_e,{children:[e.jsx(V,{filterName:u,onFilterName:te,onClickSearch:B,onHitEnter:ne}),e.jsx(xe,{children:e.jsx(ye,{sx:{overflow:"unset"},children:e.jsxs(je,{sx:{minWidth:800},children:[e.jsx(W,{order:C,orderBy:v,rowCount:c.length,onRequestSort:Q,headLabel:[{id:"name",label:"Name"},{id:"street",label:"Street"},{id:"city",label:"City"},{id:"state",label:"State"},{id:"country",label:"Country"},{id:"zip",label:"Zip"},{id:"phone",label:"Phone"},{id:"mobile",label:"Mobile"},{id:"email",label:"Email"},{id:"is_brick_and_mortar",label:"Brick and Mortar"},{id:"is_sells_at_roadshows",label:"Sells at Roadshows"}]}),e.jsxs(Se,{children:[c.slice(d*h,d*h+h).map(n=>e.jsx(D,{id:n.id,name:n.name,street:n.street,city:n.city,state:n.state_id.name,country:n.country_id.name,zip:n.zip,phone:n.phone,mobile:n.mobile,email:n.email,is_brick_and_mortar:n.is_brick_and_mortar,is_sells_at_roadshows:n.is_sells_at_roadshows,onSelect:o},n.id)),e.jsx(K,{height:77,emptyRows:ve(d,h,c.length)}),se&&e.jsx(U,{query:u})]})]})})}),e.jsx(Te,{page:d,component:"div",count:Z,rowsPerPage:h,onPageChange:X,rowsPerPageOptions:[25],onRowsPerPageChange:ee})]})]})]})}Ne.propTypes={showTitle:t.bool,onSelect:t.func,filterTypeOption:t.string,filterParentContactOption:t.number};export{Ne as C};
