import{r as a,y as m,z as x,j as t,S as g,T as o,A as j,P as N,C as V,W as X}from"./index-B8l5MPOb.js";import{C as Z}from"./Container-57NIevnF.js";import{C as H}from"./Card-DExzLAxj.js";import{G as i}from"./Grid-CblXWtuB.js";import{F as b,C as y}from"./FormControlLabel-D6pUkteO.js";import{L as J}from"./LoadingButton-BGB-_34k.js";import{u as K}from"./use-auth-DsvEjS1e.js";import"./CircularProgress-j2gw31bc.js";function p({customerId:r}){const[f,c]=a.useState(!1),[S,C]=a.useState(""),[_,k]=a.useState(""),[v,w]=a.useState(""),[A,B]=a.useState(""),[E,R]=a.useState(""),[z,L]=a.useState(""),[M,P]=a.useState(""),[F,I]=a.useState(""),[$,q]=a.useState(""),[d,l]=a.useState(!1),[h,u]=a.useState(!1);a.useEffect(()=>{W()},[r]);const D=s=>{l(s.target.checked)},T=s=>{u(s.target.checked)},U=()=>{c(!0),console.log("Saving Customer");const s=`${j.baseURL}/api-proxy/proxy?method=post&resource=customers`;console.log(s);const e={partner:{id:parseInt(r,10),is_brick_and_mortar:d,is_sells_at_roadshows:h}};console.log("Request body",e),m.post(s,e,{headers:{Authorization:`Bearer ${x.get("jwt")}`}}).then(n=>{console.log(n.data),c(!1),n.data.result.success===!1?alert(n.data.result.message):window.location.reload()}).catch(n=>{c(!1),console.error("Error saving customer:",n)})},W=()=>{console.log("Fetching Customer Details");const s=`${j.baseURL}/api-proxy/proxy?method=get&resource=customers&partner_id=${r}`;console.log(s),m.get(s,{headers:{Authorization:`Bearer ${x.get("jwt")}`}}).then(e=>{console.log(e.data.data),C(e.data.data.name),k(e.data.data.street),w(e.data.data.city),B(e.data.data.state_id.name),R(e.data.data.country_id.name),L(e.data.data.zip),P(e.data.data.phone),I(e.data.data.mobile),q(e.data.data.email),l(e.data.data.is_brick_and_mortar),u(e.data.data.is_sells_at_roadshows)}).catch(e=>{console.error("Error fetching customer details:",e)})},G=t.jsxs(i,{container:!0,spacing:3,children:[t.jsxs(i,{item:!0,xs:12,md:6,children:[t.jsx(o,{variant:"body1",fontWeight:"bold",children:"Address:"}),t.jsx(o,{variant:"body1",children:_}),t.jsxs(o,{variant:"body1",children:[v," ",A]}),t.jsxs(o,{variant:"body1",children:[E," ",z]}),t.jsxs(o,{variant:"body1",children:[t.jsx("b",{children:"Phone:"})," ",M]}),t.jsxs(o,{variant:"body1",children:[t.jsx("b",{children:"Mobile:"})," ",F]}),t.jsxs(o,{variant:"body1",children:[t.jsx("b",{children:"Email:"})," ",$]})]}),t.jsx(i,{item:!0,xs:12,md:6,children:t.jsxs(g,{direction:"column",spacing:1,children:[t.jsx(b,{control:t.jsx(y,{checked:d,onChange:D}),label:"Brick and Mortar Store"}),t.jsx(b,{control:t.jsx(y,{checked:h,onChange:T}),label:"Sells at Roadshows"})]})}),t.jsx(i,{item:!0,xs:12,children:t.jsx(J,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:U,loading:f,children:"Save"})})]});return t.jsxs(Z,{children:[t.jsx(g,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:t.jsx(o,{variant:"h4",children:S})}),G,t.jsx(H,{})]})}p.propTypes={customerId:N.any};function rt(){K();const{customerId:r}=V();return t.jsxs(t.Fragment,{children:[t.jsx(X,{children:t.jsx("title",{children:" Customer Detail | BEX Sales "})}),t.jsx(p,{customerId:r})]})}export{rt as default};
