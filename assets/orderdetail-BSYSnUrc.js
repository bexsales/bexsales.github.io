import{g as Qe,k as Ve,h as Ge,T as m,K as Ze,r as i,i as Ke,a as Xe,j as e,_ as ge,b as Je,f as Ye,M as ye,P as l,S as P,C as D,D as ce,x as S,B as et,O as tt,I as nt,Q as be,y as Z,z as K,R as ot,A as X,U as rt,W as st}from"./index-BF8sJ_yb.js";import{T as M,a as h,b as fe,c as at,s as it,d as ve,e as Ce,f as _e,g as lt}from"./search-fill-x0T0tPRi.js";import{L as ct}from"./label-CcgnIeaz.js";import{D as L,a as N,b as $,c as W,G as le}from"./Grid-CKMvSEq2.js";import{O as dt}from"./Select-FS8NKuay.js";import{C as Se}from"./Container-CFiamIHP.js";import{C as Te}from"./Card-CKo5Emg0.js";import{F as de,T as G,L as ut}from"./LoadingButton-DqBH81ow.js";import{P as ht,C as je}from"./product-view-CzI0U_bI.js";import{C as Oe}from"./customer-view-BQ1QzkUI.js";import{u as xt}from"./use-auth-DgWsbSHq.js";import"./isMuiElement-CuLW2d71.js";const pt={width:24,height:24,body:'<g id="evaCopyOutline0"><g id="evaCopyOutline1"><g id="evaCopyOutline2" fill="currentColor"><path d="M18 21h-6a3 3 0 0 1-3-3v-6a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3Zm-6-10a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1Z"/><path d="M9.73 15H5.67A2.68 2.68 0 0 1 3 12.33V5.67A2.68 2.68 0 0 1 5.67 3h6.66A2.68 2.68 0 0 1 15 5.67V9.4h-2V5.67a.67.67 0 0 0-.67-.67H5.67a.67.67 0 0 0-.67.67v6.66a.67.67 0 0 0 .67.67h4.06Z"/></g></g></g>'},mt=pt;function jt(n){return Qe("MuiDialogContentText",n)}Ve("MuiDialogContentText",["root"]);const gt=["children","className"],yt=n=>{const{classes:o}=n,c=Ye({root:["root"]},jt,o);return ge({},o,c)},bt=Ge(m,{shouldForwardProp:n=>Ze(n)||n==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(n,o)=>o.root})({}),ft=i.forwardRef(function(o,r){const c=Ke({props:o,name:"MuiDialogContentText"}),{className:a}=c,s=Xe(c,gt),j=yt(s);return e.jsx(bt,ge({component:"p",variant:"body1",color:"text.secondary",ref:r,ownerState:s,className:Je(j.root,a)},c,{classes:j}))}),pe=ft,vt={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Ct(n,o,r){return n?Math.max(0,(1+n)*o-r):0}function Pe({query:n}){return e.jsx(M,{children:e.jsx(h,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ye,{sx:{textAlign:"center"},children:[e.jsx(m,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(m,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}Pe.propTypes={query:l.string};function we({emptyRows:n,height:o}){return n?e.jsx(M,{sx:{...o&&{height:o*n}},children:e.jsx(h,{colSpan:9})}):null}we.propTypes={emptyRows:l.number,height:l.number};function Ie({handleSendInvoice:n,partner:o,invoiceName:r,invoiceId:c,customerEmail:a}){const[s,j]=i.useState(!1),p=()=>{j(!0)},w=()=>{j(!1)};return e.jsxs(P,{direction:"row",alignItems:"center",children:[e.jsx(P,{direction:"column",alignItems:"center",spacing:1,children:e.jsx(D,{onClick:p,sx:{color:"blue",backgroundColor:"#fff","&:hover":{backgroundColor:"#bbf"}},children:e.jsx(ce,{icon:"mdi:send"})})}),e.jsxs(L,{open:s,onClose:w,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(N,{id:"alert-dialog-title",children:"Confirm Send"}),e.jsx($,{children:e.jsxs(pe,{id:"alert-dialog-description",children:["Are you sure you want to send this invoice ",e.jsxs("b",{children:["[",r,"]"]})," to ",e.jsxs("b",{children:[o," [",a,"]"]}),"?"]})}),e.jsxs(W,{children:[e.jsx(S,{onClick:w,color:"primary",children:"Cancel"}),e.jsx(S,{onClick:()=>n(c),color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}Ie.propTypes={handleSendInvoice:l.func,partner:l.any,invoiceName:l.any,invoiceId:l.any,customerEmail:l.any};function ke({id:n,name:o,payment_state:r,customer:c,customer_email:a,create_date:s,amount_untaxed:j,amount_tax:p,amount_total:w,state:y,invoice_origin:R,invoice_date:b,handleSendInvoice:v}){const q=C=>`$${C.toFixed(2)}`;return e.jsxs(M,{hover:!0,tabIndex:-1,children:[e.jsx(h,{children:y==="posted"&&r==="not_paid"&&a&&e.jsx(Ie,{handleSendInvoice:v,partner:c,invoiceName:o,invoiceId:n,customerEmail:a})}),e.jsx(h,{children:o}),e.jsx(h,{children:r}),e.jsx(h,{children:c}),e.jsx(h,{children:a}),e.jsx(h,{children:s}),e.jsx(h,{children:q(j)}),e.jsx(h,{children:q(p)}),e.jsx(h,{children:q(w)}),e.jsx(h,{children:e.jsx(ct,{color:y!=="draft"&&"error"||"success",children:y})}),e.jsx(h,{children:R}),e.jsx(h,{children:b})]})}ke.propTypes={id:l.any,name:l.any,payment_state:l.any,customer:l.any,customer_email:l.any,create_date:l.any,amount_untaxed:l.any,amount_tax:l.any,amount_total:l.any,state:l.any,invoice_origin:l.any,invoice_date:l.any,handleSendInvoice:l.func};function De({order:n,orderBy:o,headLabel:r,onRequestSort:c}){const a=s=>j=>{c(j,s)};return e.jsx(fe,{children:e.jsx(M,{children:r.map(s=>e.jsx(h,{align:s.align||"left",sortDirection:o===s.id?n:!1,sx:{width:s.width,minWidth:s.minWidth},children:e.jsxs(at,{hideSortIcon:!0,active:o===s.id,direction:o===s.id?n:"desc",onClick:a(s.id),children:[s.label,o===s.id?e.jsx(et,{sx:{...vt},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))})})}De.propTypes={order:l.oneOf(["asc","desc"]),orderBy:l.string,headLabel:l.array,onRequestSort:l.func};function Re({filterName:n,onFilterName:o,onClickSearch:r,onHitEnter:c}){return e.jsx(tt,{sx:{height:96,display:"flex",justifyContent:"space-between",p:a=>a.spacing(0,1,0,3)},children:e.jsx(dt,{value:n,onChange:o,onKeyDown:c,placeholder:"Search invoice...",endAdornment:e.jsx(nt,{position:"end",children:e.jsx(D,{onClick:r,edge:"end",children:e.jsx(be,{icon:it,sx:{color:"text.disabled",width:20,height:20}})})})})})}Re.propTypes={filterName:l.string,onFilterName:l.func,onClickSearch:l.func,onHitEnter:l.func};function qe({invoiceOrigin:n}){const o=n,[r,c]=i.useState([]),[a,s]=i.useState(0),[j,p]=i.useState(0),[w,y]=i.useState("asc"),[R,b]=i.useState("name"),[v,q]=i.useState(""),[C,J]=i.useState(25),[ue,he]=i.useState(0),U=i.useRef(r),Y=i.useRef(C),z=i.useRef(a),ee=i.useRef(v);i.useEffect(()=>{U.current=r,Y.current=C,z.current=a,ee.current=v,B(z.current,Y.current,U.current,ee.current,o)},[]);const B=(u,_,I,A,k)=>{console.log("Fetching Invoices");const Q=u+1;let E=`${X.baseURL}/api-proxy/proxy?method=get&resource=invoices&page=${Q}&page_size=${_}`;A&&(E+=`&name=${A}`),k&&(E+=`&invoice_origin=${k}`),console.log(E),Z.get(E,{headers:{Authorization:`Bearer ${K.get("jwt")}`}}).then(F=>{console.log(F.data.data),c([...I,...F.data.data]),he(F.data.count)}).catch(F=>{console.error("Error fetching invoices:",F)})},te=(u,_)=>{_!==""&&(y(R===_&&w==="asc"?"desc":"asc"),b(_))},ne=(u,_)=>{s(_);const I=C*_;I>j&&(p(I),B(_,C,r,v,o))},oe=u=>{s(0),J(parseInt(u.target.value,10))},re=u=>{q(u.target.value)},H=u=>{u.key==="Enter"&&se()},se=u=>{s(0),B(a,C,[],v)},ae=u=>{console.log("Sending Invoice");const I=`${X.baseURL}/api-proxy/proxy?method=post&resource=send-invoices`;console.log(I);const A={invoice:{id:parseInt(u,10)}};console.log("Request body",A),Z.post(I,A,{headers:{Authorization:`Bearer ${K.get("jwt")}`}}).then(k=>{console.log(k.data),k.data.result.success===!1?alert(k.data.result.message):alert("Invoice Sent!")}).catch(k=>{console.error("Error sending invoice:",k)})},xe=!r.length&&!!v;return e.jsx(Se,{children:e.jsxs(Te,{children:[e.jsx(Re,{filterName:v,onFilterName:re,onClickSearch:se,onHitEnter:H}),e.jsx(ot,{children:e.jsx(ve,{sx:{overflow:"unset"},children:e.jsxs(Ce,{sx:{minWidth:800},children:[e.jsx(De,{order:w,orderBy:R,rowCount:r.length,onRequestSort:te,headLabel:[{id:"email_action",label:""},{id:"name",label:"Name"},{id:"payment_state",label:"Payment State"},{id:"customer",label:"Customer"},{id:"customer_email",label:"Email"},{id:"create_date",label:"Create Date"},{id:"amount_untaxed",label:"Amount Untaxed"},{id:"amount_tax",label:"Amount Tax"},{id:"amount_total",label:"Amount Total"},{id:"state",label:"State"},{id:"invoice_origin",label:"Order"},{id:"invoice_Date",label:"Invoice Date"}]}),e.jsxs(_e,{children:[r.slice(a*C,a*C+C).map(u=>e.jsx(ke,{id:u.id,name:u.name,payment_state:u.payment_state,customer:u.customer_id.name,customer_email:u.customer_id.email,create_date:u.create_date,amount_untaxed:u.amount_untaxed,amount_tax:u.amount_tax,amount_total:u.amount_total,state:u.state,invoice_origin:u.invoice_origin,invoice_date:u.invoice_date,handleSendInvoice:_=>ae(_,u.id)},u.id)),e.jsx(we,{height:77,emptyRows:Ct(a,C,r.length)}),xe&&e.jsx(Pe,{query:v})]})]})})}),e.jsx(lt,{page:a,component:"div",count:ue,rowsPerPage:C,onPageChange:ne,rowsPerPageOptions:[25],onRowsPerPageChange:oe})]})})}qe.propTypes={invoiceOrigin:l.string};function Ae({invoiceOrigin:n}){const[o,r]=i.useState(!1),c=()=>{r(!0)},a=()=>{r(!1)};return e.jsxs("div",{children:[e.jsx(S,{variant:"outlined",onClick:c,children:"Invoices"}),e.jsxs(L,{open:o,onClose:a,maxWidth:"xl",fullWidth:!0,children:[e.jsx(N,{children:"Invoices"}),e.jsx($,{children:e.jsx(de,{sx:{width:"100%"},children:e.jsx(qe,{invoiceOrigin:n,style:{width:"100%"}})})}),e.jsx(W,{children:e.jsx(S,{onClick:a,color:"primary",children:"Close"})})]})]})}Ae.propTypes={invoiceOrigin:l.func};function Fe({onSelect:n}){const[o,r]=i.useState(!1),c=()=>{r(!0)},a=()=>{r(!1)},s=j=>{n(j),a()};return e.jsxs("div",{children:[e.jsx(S,{variant:"outlined",onClick:c,children:"Add Product"}),e.jsxs(L,{open:o,onClose:a,maxWidth:"xl",fullWidth:!0,children:[e.jsx(N,{children:"Products"}),e.jsx($,{children:e.jsx(de,{sx:{width:"100%"},children:e.jsx(ht,{onSelect:s,style:{width:"100%"}})})}),e.jsx(W,{children:e.jsx(S,{onClick:a,color:"primary",children:"Close"})})]})]})}Fe.propTypes={onSelect:l.func};function Le({handleSendOrder:n,partner:o}){const[r,c]=i.useState(!1),a=()=>{c(!0)},s=()=>{c(!1)};return e.jsxs(P,{direction:"row",alignItems:"center",children:[e.jsxs(P,{direction:"column",alignItems:"center",spacing:1,children:[e.jsx(D,{onClick:a,sx:{color:"blue",backgroundColor:"#ddf","&:hover":{backgroundColor:"#bbf"}},children:e.jsx(ce,{icon:"mdi:send"})}),e.jsx(m,{variant:"caption",sx:{color:"blue"},children:"Email"})]}),e.jsxs(L,{open:r,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(N,{id:"alert-dialog-title",children:"Confirm Send"}),e.jsx($,{children:e.jsxs(pe,{id:"alert-dialog-description",children:["Are you sure you want to send this order to ",e.jsxs("b",{children:[o.name," [",o.email,"]"]}),"?"]})}),e.jsxs(W,{children:[e.jsx(S,{onClick:s,color:"primary",children:"Cancel"}),e.jsx(S,{onClick:n,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}Le.propTypes={handleSendOrder:l.func,partner:l.any};function Ne({onSelect:n}){const[o,r]=i.useState(!1),c=()=>{r(!0)},a=()=>{r(!1)},s=j=>{n(j),a()};return e.jsxs("div",{children:[e.jsx(S,{variant:"outlined",onClick:c,children:"Set"}),e.jsxs(L,{open:o,onClose:a,maxWidth:"xl",fullWidth:!0,children:[e.jsx(N,{children:"Customers"}),e.jsx($,{sx:{padding:0},children:e.jsx(de,{sx:{width:"100%"},children:e.jsx(Oe,{onSelect:s,style:{width:"100%"}})})}),e.jsx(W,{children:e.jsx(S,{onClick:a,color:"primary",children:"Close"})})]})]})}Ne.propTypes={onSelect:l.func};function $e({onSelect:n,filterParentContactOption:o}){const[r,c]=i.useState(!1),a=()=>{c(!0)},s=()=>{c(!1)},j=p=>{n(p),s()};return i.useEffect(()=>{console.log("DeliveryPopupModal Props:"),console.log("filterParentContactOption:",o)},[n,o]),e.jsxs("div",{children:[e.jsx(S,{variant:"outlined",onClick:a,children:"Set"}),e.jsxs(L,{open:r,onClose:s,maxWidth:"xl",fullWidth:!0,children:[e.jsx(N,{children:"Customers"}),e.jsx($,{sx:{padding:0},children:e.jsx(de,{sx:{width:"100%"},children:e.jsx(Oe,{onSelect:j,filterTypeOption:"delivery",filterParentContactOption:o,style:{width:"100%"}})})}),e.jsx(W,{children:e.jsx(S,{onClick:s,color:"primary",children:"Close"})})]})]})}$e.propTypes={onSelect:l.func,filterParentContactOption:l.number};function We({handleCancelOrder:n}){const[o,r]=i.useState(!1),c=()=>{r(!0)},a=()=>{r(!1)};return e.jsxs(P,{direction:"row",alignItems:"center",children:[e.jsxs(P,{direction:"column",alignItems:"center",spacing:1,children:[e.jsx(D,{onClick:c,sx:{color:"red",backgroundColor:"#fdd","&:hover":{backgroundColor:"#fbb"}},children:e.jsx(ce,{icon:"eva:close-outline"})}),e.jsx(m,{variant:"caption",sx:{color:"red"},children:"Cancel"})]}),e.jsxs(L,{open:o,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(N,{id:"alert-dialog-title",children:"Confirm Cancellation"}),e.jsx($,{children:e.jsx(pe,{id:"alert-dialog-description",children:"Are you sure you want to cancel this order?"})}),e.jsxs(W,{children:[e.jsx(S,{onClick:a,color:"primary",children:"Cancel"}),e.jsx(S,{onClick:n,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}We.propTypes={handleCancelOrder:l.func};function Ee({orderId:n}){const[o,r]=i.useState(!1),[c,a]=i.useState(""),[s,j]=i.useState(""),[p,w]=i.useState({id:0,name:"",street:"",city:"",state:"",country:"",zip:"",phone:"",mobile:"",email:""}),[y,R]=i.useState({id:0,name:"",street:"",city:"",state:"",country:"",zip:"",phone:"",mobile:"",email:""}),[b,v]=i.useState([]),[q,C]=i.useState([]),[J,ue]=i.useState({}),[he,U]=i.useState(0),[Y,z]=i.useState(0),[ee,B]=i.useState(0),[te,ne]=i.useState(""),[oe,re]=i.useState(""),[H,se]=i.useState(""),[ae,xe]=i.useState("");i.useEffect(()=>{Me()},[]);const u=()=>{Q(!0,!1)},_=()=>{Q(!1,!0)},I=(t,d)=>{console.log("Fetching order totals");const g=`${X.baseURL}/api-proxy/proxy?method=post&resource=ordertotals`;console.log(g);const x=b.map(f=>({product_id:f[2].id,product_uom_qty:f[2].product_uom_qty})),O={partner_id:p.id,order_line:x};console.log("Request body",O),Z.post(g,O,{headers:{Authorization:`Bearer ${K.get("jwt")}`}}).then(f=>{console.log(f.data),ue(f.data.result.product_prices),U(f.data.result.subtotal),z(f.data.result.total)}).catch(f=>{console.error("Error fetching order totals:",f)})};i.useEffect(()=>{I();const t=b.reduce((d,g)=>d+g[2].product_uom_qty,0);B(t)},[p,b]);const A=t=>{ne(t.target.value)},k=t=>{re(t.target.value)},Q=(t,d)=>{r(!0),console.log("Saving Order");let g="post";t===!0&&(g="cancel");const x=`${X.baseURL}/api-proxy/proxy?method=${g}&resource=orders`;console.log(x),console.log(b);const O=b.map(T=>[T[0],T[1],{product_id:T[2].id,product_uom_qty:T[2].product_uom_qty}]),f=q.map(T=>[2,T[1],{}]),V=O.concat(f),me={order:{id:parseInt(n,10),partner_id:p.id,order_line:V,x_studio_notes:te,client_order_ref:oe,...d&&{is_send:!0},...y.id&&{partner_shipping_id:y.id}}};console.log("Request body",me),Z.post(x,me,{headers:{Authorization:`Bearer ${K.get("jwt")}`}}).then(T=>{console.log(T.data),r(!1),T.data.result.success===!1?alert(T.data.result.message):window.location.reload()}).catch(T=>{console.error("Error saving order:",T)})},E=(t,d,g)=>{if(t<0||t>=b.length)return;const x=b.filter((f,V)=>V===t);x[0][0]!==0&&(console.log("Adding line to delete queue",x),C(q.concat(x)));const O=b.filter((f,V)=>V!==t);v(O)},F=(t,d)=>{const g=b.map((x,O)=>{if(O===t){console.log("handle qty change",x);const f=["consu","service"];return x[2].qty_available<d&&!f.includes(x[2].type)?(alert("Quantity available is insufficient."),x):[x[0],x[1],{...x[2],product_uom_qty:d!==0?Number(d):0}]}return x});v(g)},ie=t=>t?`$${t.toFixed(2)}`:"",Me=()=>{console.log("Fetching Order Details");const t=`${X.baseURL}/api-proxy/proxy?method=get&resource=orders&order_id=${n}`;console.log(t),Z.get(t,{headers:{Authorization:`Bearer ${K.get("jwt")}`}}).then(d=>{console.log(d.data.data),a(d.data.data.name),se(d.data.data.ship_tracking_number),xe(d.data.data.ship_date),w(d.data.data.customer_id),R(d.data.data.partner_shipping_id),ne(d.data.data.x_studio_notes),re(d.data.data.client_order_ref?d.data.data.client_order_ref:"");const g=d.data.data.order_line.map(x=>[1,x.id,{line_id:x.id,id:x.product_id.id,name:x.name,product_uom_qty:x.product_uom_qty,attributes:x.product_id.attributes.map(O=>`${O.attribute}:${O.name}`),qty_available:x.product_id.qty_available,type:x.product_id.type}]);console.log(g),v(g),U(d.data.data.amount_untaxed),z(d.data.data.amount_total),j(d.data.data.state)}).catch(d=>{console.error("Error fetching order details:",d)})},Ue=t=>{console.log("Setting order partner"),console.log(t),w({id:t.id,name:t.name,street:t.street,city:t.city,state:t.state,country:t.country,zip:t.zip,phone:t.phone,mobile:t.mobile,email:t.email}),R({id:0,name:"",street:"",city:"",state:"",country:"",zip:"",phone:"",mobile:"",email:""})},ze=t=>{console.log("Setting order partner"),console.log(t),R({id:t.id,name:t.name,street:t.street,city:t.city,state:t.state,country:t.country,zip:t.zip,phone:t.phone,mobile:t.mobile,email:t.email})},Be=t=>{console.log("Adding order line"),console.log(t);const d=["consu","service"];t.qty_available<1&&!d.includes(t.type)?alert("Cannot add product lines with 0 qty available"):v([...b,[0,0,{id:t.id,name:`[${t.default_code}] ${t.name}`,product_uom_qty:1,attributes:t.attributes,qty_available:t.qty_available}]])},He=e.jsxs(e.Fragment,{children:[e.jsx(P,{spacing:3,direction:"row",alignItems:"center",children:e.jsx(G,{fullWidth:!0,name:"partner_id",label:"Customer",value:p.name,InputProps:{readOnly:!0,endAdornment:e.jsx(D,{children:e.jsx(Ne,{onSelect:Ue})})}})}),p.name&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(m,{variant:"body1",fontWeight:"bold",children:"Address:"}),e.jsx(m,{variant:"body1",children:p.street}),e.jsxs(m,{variant:"body1",children:[p.city," ",p.state]}),e.jsxs(m,{variant:"body1",children:[p.country," ",p.zip]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Phone:"})," ",p.phone]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Mobile:"})," ",p.mobile]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Email:"})," ",p.email]})]}),e.jsx("div",{style:{margin:"16px 0"}}),p.name&&e.jsx(P,{spacing:3,direction:"row",alignItems:"center",children:e.jsx(G,{fullWidth:!0,name:"partner_shipping_id",label:"Delivery Address",value:y.name,InputProps:{readOnly:!0,endAdornment:e.jsx(D,{children:e.jsx($e,{onSelect:ze,filterParentContactOption:p.id})})}})}),y.name&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(m,{variant:"body1",fontWeight:"bold",children:"Address:"}),e.jsx(m,{variant:"body1",children:y.street}),e.jsxs(m,{variant:"body1",children:[y.city," ",p.state]}),e.jsxs(m,{variant:"body1",children:[y.country," ",p.zip]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Phone:"})," ",y.phone]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Mobile:"})," ",y.mobile]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Email:"})," ",y.email]})]}),e.jsx("div",{style:{margin:"16px 0"}}),H&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsxs(m,{variant:"body1",children:[e.jsx("strong",{children:"Tracking #: "}),H,e.jsx(D,{onClick:()=>{navigator.clipboard.writeText(H),alert("Tracking number copied to clipboard!")},children:e.jsx(be,{icon:mt,sx:{color:"text.disabled",width:20,height:20}})})]})]}),ae&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsxs(m,{variant:"body1",children:[e.jsx("strong",{children:"Ship Date: "}),ae]})]}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(D,{children:e.jsx(Fe,{onSelect:Be})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(ve,{component:ye,children:e.jsxs(Ce,{children:[e.jsx(fe,{children:e.jsxs(M,{children:[e.jsx(h,{children:"Product"}),e.jsx(h,{children:"Attributes"}),e.jsx(h,{children:"Unit Price"}),e.jsx(h,{children:"Qty Available"}),e.jsx(h,{children:"Qty"}),e.jsx(h,{children:"Subtotal"}),e.jsx(h,{})]})}),e.jsx(_e,{children:b.map((t,d)=>e.jsxs(M,{children:[e.jsx(h,{children:t[2].name}),e.jsx(h,{children:t[2].attributes.map((g,x)=>e.jsx(je,{label:g,variant:"outlined"},x))}),e.jsx(h,{children:ie(J[t[2].id])}),e.jsx(h,{children:t[2].qty_available}),e.jsx(h,{children:e.jsx(G,{type:"number",style:{minWidth:"100px"},value:t[2].product_uom_qty!==0?t[2].product_uom_qty:"",onChange:g=>F(d,g.target.value)})}),e.jsx(h,{children:ie(J[t[2].id]*t[2].product_uom_qty)}),e.jsx(h,{align:"right",children:e.jsx(D,{onClick:()=>E(d),children:e.jsx(ce,{icon:"eva:trash-2-outline"})})})]},d))})]})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsxs(m,{variant:"body1",fontWeight:"bold",children:["Total Product Qty: ",ee]}),e.jsxs(m,{variant:"body1",fontWeight:"bold",children:["Subtotal: ",ie(he)]}),e.jsxs(m,{variant:"body1",fontWeight:"bold",children:["Total: ",ie(Y)]}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(le,{container:!0,spacing:2,children:e.jsx(le,{item:!0,xs:12,md:6,lg:6,children:e.jsx(G,{label:"Notes",value:te,multiline:!0,fullWidth:!0,rows:4,onChange:A})})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(le,{container:!0,spacing:2,children:e.jsx(le,{item:!0,xs:12,md:6,lg:6,children:e.jsx(G,{label:"PO Number",value:oe,fullWidth:!0,onChange:k})})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(ut,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:Q,loading:o,children:"Save"})]});return e.jsxs(Se,{children:[e.jsxs(P,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsxs(m,{variant:"h4",children:["Order ",c,e.jsx(je,{label:s,color:s==="cancel"?"danger":"primary",variant:"outlined",style:{marginLeft:"10px"}})]}),(s==="draft"||s==="sent")&&e.jsxs(P,{direction:"row",spacing:2,children:[e.jsx(We,{handleCancelOrder:u}),e.jsx(Le,{handleSendOrder:_,partner:p})]}),s==="sale"&&e.jsx(P,{direction:"row",spacing:2,children:e.jsx(Ae,{invoiceOrigin:c})})]}),He,e.jsx(Te,{})]})}Ee.propTypes={orderId:l.any};function Ft(){xt();const{orderId:n}=rt();return e.jsxs(e.Fragment,{children:[e.jsx(st,{children:e.jsx("title",{children:" Order Detail | BEX Sales "})}),e.jsx(Ee,{orderId:n})]})}export{Ft as default};
