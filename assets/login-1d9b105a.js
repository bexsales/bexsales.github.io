import{l as v,z as b,r as n,j as e,S as r,I as C,q as L,A as I,T as o,L as h,B as S,C as k,h as E,D,E as A,v as F,y as B,w as P,W as T}from"./index-5e826625.js";import{T as x,L as R}from"./LoadingButton-d5f2bfa0.js";import{C as U}from"./Card-f78012bd.js";import"./isMuiElement-5dfb4a49.js";import"./Menu-ab44c921.js";import"./Select-095a4346.js";function W(){const u=v(),m=b(),[a,p]=n.useState(!1),[g,i]=n.useState(!1),[t,f]=n.useState({identifier:"",password:""}),[l,j]=n.useState(null),d=s=>{f({...t,[s.target.name]:s.target.value})},w=s=>{s.key==="Enter"&&c()},c=async()=>{i(!0);try{const s=await F.post(`${B.baseURL}/auth/local`,{identifier:t.identifier,password:t.password});console.log("Authentication successful",s.data),P.set("jwt",s.data.jwt,{expires:7}),m.push("/")}catch(s){console.error("Authentication error",s),j("Invalid email or password.")}finally{i(!1)}},y=e.jsxs(e.Fragment,{children:[e.jsxs(r,{spacing:3,children:[e.jsx(x,{name:"identifier",label:"Email address",value:t.identifier,onChange:d}),e.jsx(x,{name:"password",label:"Password",type:a?"text":"password",value:t.password,onChange:d,onKeyDown:w,InputProps:{endAdornment:e.jsx(C,{position:"end",children:e.jsx(L,{onClick:()=>p(!a),edge:"end",children:e.jsx(I,{icon:a?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),l&&e.jsx(o,{color:"error",sx:{mt:1},children:l}),e.jsx(r,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{my:3},children:e.jsx(h,{variant:"subtitle2",underline:"hover",children:"Forgot password?"})}),e.jsx(R,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:c,loading:g,children:"Login"})]});return e.jsxs(S,{sx:{...k({color:E(u.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(D,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(r,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(U,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(o,{variant:"h4",children:"Sign in to BEX Sales"}),e.jsxs(o,{variant:"body2",sx:{mt:2,mb:5},children:["Donâ€™t have an account?",e.jsx(h,{variant:"subtitle2",sx:{ml:.5},children:"Get started"})]}),e.jsx(A,{sx:{my:3}}),y]})})]})}function X(){return e.jsxs(e.Fragment,{children:[e.jsx(T,{children:e.jsx("title",{children:" Login | Minimal UI "})}),e.jsx(W,{})]})}export{X as default};
