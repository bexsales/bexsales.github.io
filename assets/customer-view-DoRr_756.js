import{j as e,N as ae,T as v,P as t,B as oe,O as ie,I as ce,C as le,Q as de,r,y as ue,z as he,S as H,R as pe,A as xe}from"./index-B0YX59rg.js";import{T as _,a as i,b as me,c as fe,s as ge,d as be,e as ye,f as je,g as Se}from"./search-fill-BwUw6-Jn.js";import{O as Te,C as Ce}from"./CircularProgress-D9z35r8A.js";import{C as Re}from"./Container-C0LKyHe_.js";import{C as Pe}from"./Card-BZxauQkK.js";const _e={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function we(a,o,l){return a?Math.max(0,(1+a)*o-l):0}function L({query:a}){return e.jsx(_,{children:e.jsx(i,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ae,{sx:{textAlign:"center"},children:[e.jsx(v,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(v,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',a,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}L.propTypes={query:t.string};function U({id:a,name:o,street:l,city:p,state:x,country:s,zip:c,phone:j,mobile:d,email:f,is_brick_and_mortar:S,is_sells_at_roadshows:T,onSelect:C}){return e.jsxs(_,{hover:!0,tabIndex:-1,onClick:()=>C({id:a,name:o,street:l,city:p,state:x,country:s,zip:c,phone:j,mobile:d,email:f,is_brick_and_mortar:S,is_sells_at_roadshows:T}),children:[e.jsx(i,{children:o}),e.jsx(i,{children:l}),e.jsx(i,{children:p}),e.jsx(i,{children:x}),e.jsx(i,{children:s}),e.jsx(i,{children:c}),e.jsx(i,{children:j}),e.jsx(i,{children:d}),e.jsx(i,{children:f}),e.jsx(i,{children:S?"Yes":"No"}),e.jsx(i,{children:T?"Yes":"No"})]})}U.propTypes={id:t.any,name:t.any,street:t.any,city:t.any,state:t.any,country:t.any,zip:t.any,phone:t.any,mobile:t.any,email:t.any,is_brick_and_mortar:t.bool,is_sells_at_roadshows:t.bool,onSelect:t.func};function M({order:a,orderBy:o,headLabel:l,onRequestSort:p}){const x=s=>c=>{p(c,s)};return e.jsx(me,{children:e.jsx(_,{children:l.map(s=>e.jsx(i,{align:s.align||"left",sortDirection:o===s.id?a:!1,sx:{width:s.width,minWidth:s.minWidth},children:e.jsxs(fe,{hideSortIcon:!0,active:o===s.id,direction:o===s.id?a:"asc",onClick:x(s.id),children:[s.label,o===s.id?e.jsx(oe,{sx:{..._e},children:a==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))})})}M.propTypes={order:t.oneOf(["asc","desc"]),orderBy:t.string,headLabel:t.array,onRequestSort:t.func};function D({emptyRows:a,height:o}){return a?e.jsx(_,{sx:{...o&&{height:o*a}},children:e.jsx(i,{colSpan:9})}):null}D.propTypes={emptyRows:t.number,height:t.number};function W({filterName:a,onFilterName:o,onClickSearch:l,onHitEnter:p}){return e.jsx(ie,{sx:{height:96,display:"flex",justifyContent:"space-between",p:x=>x.spacing(0,1,0,3)},children:e.jsx(Te,{value:a,onChange:o,onKeyDown:p,placeholder:"Search customer...",endAdornment:e.jsx(ce,{position:"end",children:e.jsx(le,{onClick:l,edge:"end",children:e.jsx(de,{icon:ge,sx:{color:"text.disabled",width:20,height:20}})})})})})}W.propTypes={filterName:t.string,onFilterName:t.func,onClickSearch:t.func,onHitEnter:t.func};function ve({showTitle:a,onSelect:o,filterTypeOption:l,filterParentContactOption:p}){const[x,s]=r.useState(!1),[c,j]=r.useState([]),[d,f]=r.useState(0),[S,T]=r.useState(0),[C,Y]=r.useState("asc"),[N,K]=r.useState("name"),[m,Q]=r.useState(""),[R,Ne]=r.useState(l),[P,ke]=r.useState(p),[u,V]=r.useState(25),[Z,G]=r.useState(0),k=r.useRef(c),I=r.useRef(u),E=r.useRef(d),F=r.useRef(m),O=r.useRef(R),z=r.useRef(P);r.useEffect(()=>{k.current=c,I.current=u,E.current=d,F.current=m,O.current=R,z.current=P,w(E.current,I.current,k.current,F.current,O.current,z.current)},[]);const w=(n,h,g,B,$,q)=>{console.log("Fetching Customers"),s(!0);const re=n+1;let b=`${xe.baseURL}/api-proxy/proxy?method=get&resource=customers&page=${re}&page_size=${h}`;B&&(b+=`&name=${B}`),$&&(b+=`&type=${$}`),q&&(b+=`&parent_contact_id=${q}`),console.log(b),ue.get(b,{headers:{Authorization:`Bearer ${he.get("jwt")}`}}).then(y=>{console.log(y.data.data),j([...g,...y.data.data]),G(y.data.count)}).catch(y=>{console.error("Error fetching customers:",y)}).finally(()=>{s(!1)})},J=(n,h)=>{console.log("sort",h),h!==""&&(Y(N===h&&C==="asc"?"desc":"asc"),K(h))},X=(n,h)=>{f(h);const g=u*h;window.scrollTo({top:0,behavior:"smooth"}),g>S&&(T(g),w(h,u,c,m,R,P))},ee=n=>{f(0),V(parseInt(n.target.value,10))},te=n=>{Q(n.target.value)},ne=n=>{n.key==="Enter"&&A()},A=n=>{f(0),w(d,u,[],m,R,P)},se=!c.length&&!!m;return e.jsxs(e.Fragment,{children:[x&&e.jsx(H,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",bgcolor:"rgba(255, 255, 255, 0.6)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ce,{})}),e.jsxs(Re,{children:[a&&e.jsx(H,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(v,{variant:"h4",children:"Customers"})}),e.jsxs(Pe,{children:[e.jsx(W,{filterName:m,onFilterName:te,onClickSearch:A,onHitEnter:ne}),e.jsx(pe,{children:e.jsx(be,{sx:{overflow:"unset"},children:e.jsxs(ye,{sx:{minWidth:800},children:[e.jsx(M,{order:C,orderBy:N,rowCount:c.length,onRequestSort:J,headLabel:[{id:"name",label:"Name"},{id:"street",label:"Street"},{id:"city",label:"City"},{id:"state",label:"State"},{id:"country",label:"Country"},{id:"zip",label:"Zip"},{id:"phone",label:"Phone"},{id:"mobile",label:"Mobile"},{id:"email",label:"Email"},{id:"is_brick_and_mortar",label:"Brick and Mortar"},{id:"is_sells_at_roadshows",label:"Sells at Roadshows"}]}),e.jsxs(je,{children:[c.slice(d*u,d*u+u).map(n=>e.jsx(U,{id:n.id,name:n.name,street:n.street,city:n.city,state:n.state_id.name,country:n.country_id.name,zip:n.zip,phone:n.phone,mobile:n.mobile,email:n.email,is_brick_and_mortar:n.is_brick_and_mortar,is_sells_at_roadshows:n.is_sells_at_roadshows,onSelect:o},n.id)),e.jsx(D,{height:77,emptyRows:we(d,u,c.length)}),se&&e.jsx(L,{query:m})]})]})})}),e.jsx(Se,{page:d,component:"div",count:Z,rowsPerPage:u,onPageChange:X,rowsPerPageOptions:[25],onRowsPerPageChange:ee})]})]})]})}ve.propTypes={showTitle:t.bool,onSelect:t.func,filterTypeOption:t.string,filterParentContactOption:t.number};export{ve as C};
