import{l as v,n as b,r as n,j as e,S as r,I as L,q as C,t as I,T as o,L as h,B as S,v as k,h as D,w as E,D as F,x as A,y as B,z as P,W as T}from"./index-d3e5ebce.js";import{T as x,L as R}from"./LoadingButton-94e2f9fd.js";import{C as U}from"./Card-240ee216.js";import"./isMuiElement-3ec302c1.js";import"./Menu-96ddacb5.js";import"./Select-8bf8f8d9.js";function W(){const u=v(),m=b(),[a,p]=n.useState(!1),[g,i]=n.useState(!1),[t,f]=n.useState({identifier:"",password:""}),[l,j]=n.useState(null),d=s=>{f({...t,[s.target.name]:s.target.value})},w=s=>{s.key==="Enter"&&c()},c=async()=>{i(!0);try{const s=await A.post(`${B.baseURL}/auth/local`,{identifier:t.identifier,password:t.password});console.log("Authentication successful",s.data),P.set("jwt",s.data.jwt,{expires:7}),m.push("/")}catch(s){console.error("Authentication error",s),j("Invalid email or password.")}finally{i(!1)}},y=e.jsxs(e.Fragment,{children:[e.jsxs(r,{spacing:3,children:[e.jsx(x,{name:"identifier",label:"Email address",value:t.identifier,onChange:d}),e.jsx(x,{name:"password",label:"Password",type:a?"text":"password",value:t.password,onChange:d,onKeyDown:w,InputProps:{endAdornment:e.jsx(L,{position:"end",children:e.jsx(C,{onClick:()=>p(!a),edge:"end",children:e.jsx(I,{icon:a?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),l&&e.jsx(o,{color:"error",sx:{mt:1},children:l}),e.jsx(r,{direction:"row",alignItems:"center",justifyContent:"flex-end",sx:{my:3},children:e.jsx(h,{variant:"subtitle2",underline:"hover",children:"Forgot password?"})}),e.jsx(R,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:c,loading:g,children:"Login"})]});return e.jsxs(S,{sx:{...k({color:D(u.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(E,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(r,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(U,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(o,{variant:"h4",children:"Sign in to BEX Sales"}),e.jsxs(o,{variant:"body2",sx:{mt:2,mb:5},children:["Donâ€™t have an account?",e.jsx(h,{variant:"subtitle2",sx:{ml:.5},children:"Get started"})]}),e.jsx(F,{sx:{my:3}}),y]})})]})}function X(){return e.jsxs(e.Fragment,{children:[e.jsx(T,{children:e.jsx("title",{children:" Login | Minimal UI "})}),e.jsx(W,{})]})}export{X as default};
