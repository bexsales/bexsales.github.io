import{j as e,N as ae,T as w,P as t,B as oe,O as ie,I as ce,C as le,Q as de,r,y as ue,z as he,S as H,R as pe,A as xe}from"./index-Crk9S-oF.js";import{T as C,a as c,b as fe,c as me,s as ge,d as ye,e as be,f as je,g as Te}from"./search-fill-CbA43ys8.js";import{O as Se,C as Ce}from"./CircularProgress-qJbvu80h.js";import{C as Re}from"./Container-D_rKHmn0.js";import{C as Pe}from"./Card-Dm6Jyu88.js";const we={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function ve(a,o,l){return a?Math.max(0,(1+a)*o-l):0}function L({query:a}){return e.jsx(C,{children:e.jsx(c,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ae,{sx:{textAlign:"center"},children:[e.jsx(w,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(w,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',a,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}L.propTypes={query:t.string};function U({id:a,name:o,street:l,city:p,state:x,country:s,zip:i,phone:j,mobile:d,email:m,onSelect:R}){return e.jsxs(C,{hover:!0,tabIndex:-1,onClick:()=>R({id:a,name:o,street:l,city:p,state:x,country:s,zip:i,phone:j,mobile:d,email:m}),children:[e.jsx(c,{children:o}),e.jsx(c,{children:l}),e.jsx(c,{children:p}),e.jsx(c,{children:x}),e.jsx(c,{children:s}),e.jsx(c,{children:i}),e.jsx(c,{children:j}),e.jsx(c,{children:d}),e.jsx(c,{children:m})]})}U.propTypes={id:t.any,name:t.any,street:t.any,city:t.any,state:t.any,country:t.any,zip:t.any,phone:t.any,mobile:t.any,email:t.any,onSelect:t.func};function _({order:a,orderBy:o,headLabel:l,onRequestSort:p}){const x=s=>i=>{p(i,s)};return e.jsx(fe,{children:e.jsx(C,{children:l.map(s=>e.jsx(c,{align:s.align||"left",sortDirection:o===s.id?a:!1,sx:{width:s.width,minWidth:s.minWidth},children:e.jsxs(me,{hideSortIcon:!0,active:o===s.id,direction:o===s.id?a:"asc",onClick:x(s.id),children:[s.label,o===s.id?e.jsx(oe,{sx:{...we},children:a==="desc"?"sorted descending":"sorted ascending"}):null]})},s.id))})})}_.propTypes={order:t.oneOf(["asc","desc"]),orderBy:t.string,headLabel:t.array,onRequestSort:t.func};function D({emptyRows:a,height:o}){return a?e.jsx(C,{sx:{...o&&{height:o*a}},children:e.jsx(c,{colSpan:9})}):null}D.propTypes={emptyRows:t.number,height:t.number};function M({filterName:a,onFilterName:o,onClickSearch:l,onHitEnter:p}){return e.jsx(ie,{sx:{height:96,display:"flex",justifyContent:"space-between",p:x=>x.spacing(0,1,0,3)},children:e.jsx(Se,{value:a,onChange:o,onKeyDown:p,placeholder:"Search customer...",endAdornment:e.jsx(ce,{position:"end",children:e.jsx(le,{onClick:l,edge:"end",children:e.jsx(de,{icon:ge,sx:{color:"text.disabled",width:20,height:20}})})})})})}M.propTypes={filterName:t.string,onFilterName:t.func,onClickSearch:t.func,onHitEnter:t.func};function Ne({showTitle:a,onSelect:o,filterTypeOption:l,filterParentContactOption:p}){const[x,s]=r.useState(!1),[i,j]=r.useState([]),[d,m]=r.useState(0),[R,W]=r.useState(0),[v,K]=r.useState("asc"),[N,Q]=r.useState("name"),[f,V]=r.useState(""),[T,Ie]=r.useState(l),[S,Ee]=r.useState(p),[u,Z]=r.useState(25),[G,J]=r.useState(0),I=r.useRef(i),E=r.useRef(u),F=r.useRef(d),O=r.useRef(f),k=r.useRef(T),z=r.useRef(S);r.useEffect(()=>{I.current=i,E.current=u,F.current=d,O.current=f,k.current=T,z.current=S,P(F.current,E.current,I.current,O.current,k.current,z.current)},[]);const P=(n,h,g,$,B,q)=>{console.log("Fetching Customers"),s(!0);const re=n+1;let y=`${xe.baseURL}/api-proxy/proxy?method=get&resource=customers&page=${re}&page_size=${h}`;$&&(y+=`&name=${$}`),B&&(y+=`&type=${B}`),q&&(y+=`&parent_contact_id=${q}`),console.log(y),ue.get(y,{headers:{Authorization:`Bearer ${he.get("jwt")}`}}).then(b=>{console.log(b.data.data),j([...g,...b.data.data]),J(b.data.count)}).catch(b=>{console.error("Error fetching customers:",b)}).finally(()=>{s(!1)})},X=(n,h)=>{console.log("sort",h),h!==""&&(K(N===h&&v==="asc"?"desc":"asc"),Q(h))},Y=(n,h)=>{m(h);const g=u*h;window.scrollTo({top:0,behavior:"smooth"}),g>R&&(W(g),P(h,u,i,f,T,S))},ee=n=>{m(0),Z(parseInt(n.target.value,10))},te=n=>{V(n.target.value)},ne=n=>{n.key==="Enter"&&A()},A=n=>{m(0),P(d,u,[],f,T,S)},se=!i.length&&!!f;return e.jsxs(e.Fragment,{children:[x&&e.jsx(H,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",bgcolor:"rgba(255, 255, 255, 0.6)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(Ce,{})}),e.jsxs(Re,{children:[a&&e.jsx(H,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(w,{variant:"h4",children:"Customers"})}),e.jsxs(Pe,{children:[e.jsx(M,{filterName:f,onFilterName:te,onClickSearch:A,onHitEnter:ne}),e.jsx(pe,{children:e.jsx(ye,{sx:{overflow:"unset"},children:e.jsxs(be,{sx:{minWidth:800},children:[e.jsx(_,{order:v,orderBy:N,rowCount:i.length,onRequestSort:X,headLabel:[{id:"name",label:"Name"},{id:"street",label:"Street"},{id:"city",label:"City"},{id:"state",label:"State"},{id:"country",label:"Country"},{id:"zip",label:"Zip"},{id:"phone",label:"Phone"},{id:"mobile",label:"Mobile"},{id:"email",label:"Email"}]}),e.jsxs(je,{children:[i.slice(d*u,d*u+u).map(n=>e.jsx(U,{id:n.id,name:n.name,street:n.street,city:n.city,state:n.state_id.name,country:n.country_id.name,zip:n.zip,phone:n.phone,mobile:n.mobile,email:n.email,onSelect:o},n.id)),e.jsx(D,{height:77,emptyRows:ve(d,u,i.length)}),se&&e.jsx(L,{query:f})]})]})})}),e.jsx(Te,{page:d,component:"div",count:G,rowsPerPage:u,onPageChange:Y,rowsPerPageOptions:[25],onRowsPerPageChange:ee})]})]})]})}Ne.propTypes={showTitle:t.bool,onSelect:t.func,filterTypeOption:t.string,filterParentContactOption:t.number};export{Ne as C};
