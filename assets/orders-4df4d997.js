import{j as e,H as Q,T as S,P as r,h as Y,B as y,n as N,r as l,t as Z,J as ee,I as te,y as ne,K as re,w as ae,E as oe,G as se,S as ie,M as ce,F as le,W as de}from"./index-dcbe1a6c.js";import{T,a as x,b as ue,c as pe,s as xe,d as he,e as ge,f as fe,g as me}from"./search-fill-c7e444b1.js";import{O as je}from"./Select-7cba2517.js";import{C as be}from"./Container-629d4c37.js";import{C as ye}from"./Card-8a116845.js";import{u as Te}from"./use-auth-b2f4c765.js";const Re={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Ce(t,n,c){return t?Math.max(0,(1+t)*n-c):0}function E({query:t}){return e.jsx(T,{children:e.jsx(x,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(Q,{sx:{textAlign:"center"},children:[e.jsx(S,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(S,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}E.propTypes={query:r.string};const Se=Y(y)(({theme:t,ownerState:n})=>{const c=t.palette.mode==="light",s=n.variant==="filled",i=n.variant==="outlined",a=n.variant==="soft",u={...n.color==="default"&&{...s&&{color:c?t.palette.common.white:t.palette.grey[800],backgroundColor:t.palette.text.primary},...i&&{backgroundColor:"transparent",color:t.palette.text.primary,border:`2px solid ${t.palette.text.primary}`},...a&&{color:t.palette.text.secondary,backgroundColor:N(t.palette.grey[500],.16)}}},h={...n.color!=="default"&&{...s&&{color:t.palette[n.color].contrastText,backgroundColor:t.palette[n.color].main},...i&&{backgroundColor:"transparent",color:t.palette[n.color].main,border:`2px solid ${t.palette[n.color].main}`},...a&&{color:t.palette[n.color][c?"dark":"light"],backgroundColor:N(t.palette[n.color].main,.16)}}};return{height:24,minWidth:24,lineHeight:0,borderRadius:6,cursor:"default",alignItems:"center",whiteSpace:"nowrap",display:"inline-flex",justifyContent:"center",textTransform:"capitalize",padding:t.spacing(0,.75),fontSize:t.typography.pxToRem(12),fontWeight:t.typography.fontWeightBold,transition:t.transitions.create("all",{duration:t.transitions.duration.shorter}),...u,...h}}),F=l.forwardRef(({children:t,color:n="default",variant:c="soft",startIcon:s,endIcon:i,sx:a,...u},h)=>{const g=Z(),f={width:16,height:16,"& svg, img":{width:1,height:1,objectFit:"cover"}};return e.jsxs(Se,{ref:h,component:"span",ownerState:{color:n,variant:c},sx:{...s&&{pl:.75},...i&&{pr:.75},...a},theme:g,...u,children:[s&&e.jsxs(y,{sx:{mr:.75,...f},children:[" ",s," "]}),t,i&&e.jsxs(y,{sx:{ml:.75,...f},children:[" ",i," "]})]})});F.propTypes={children:r.node,endIcon:r.object,startIcon:r.object,sx:r.object,variant:r.oneOf(["filled","outlined","ghost","soft"]),color:r.oneOf(["default","primary","secondary","info","success","warning","error"])};const ve=F;function $({name:t,customer:n,create_date:c,amount_untaxed:s,amount_tax:i,amount_total:a,state:u,handleClick:h}){const g=f=>`$${f.toFixed(2)}`;return e.jsxs(T,{hover:!0,tabIndex:-1,onClick:h,children:[e.jsx(x,{children:t}),e.jsx(x,{children:n}),e.jsx(x,{children:c}),e.jsx(x,{children:g(s)}),e.jsx(x,{children:g(i)}),e.jsx(x,{children:g(a)}),e.jsx(x,{children:e.jsx(ve,{color:u!=="draft"&&"error"||"success",children:u})})]})}$.propTypes={name:r.any,customer:r.any,create_date:r.any,amount_untaxed:r.any,amount_tax:r.any,amount_total:r.any,state:r.any,handleClick:r.func};function A({order:t,orderBy:n,headLabel:c,onRequestSort:s}){const i=a=>u=>{s(u,a)};return e.jsx(ue,{children:e.jsx(T,{children:c.map(a=>e.jsx(x,{align:a.align||"left",sortDirection:n===a.id?t:!1,sx:{width:a.width,minWidth:a.minWidth},children:e.jsxs(pe,{hideSortIcon:!0,active:n===a.id,direction:n===a.id?t:"desc",onClick:i(a.id),children:[a.label,n===a.id?e.jsx(y,{sx:{...Re},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},a.id))})})}A.propTypes={order:r.oneOf(["asc","desc"]),orderBy:r.string,headLabel:r.array,onRequestSort:r.func};function B({emptyRows:t,height:n}){return t?e.jsx(T,{sx:{...n&&{height:n*t}},children:e.jsx(x,{colSpan:9})}):null}B.propTypes={emptyRows:r.number,height:r.number};function I({filterName:t,onFilterName:n,onClickSearch:c,onHitEnter:s}){return e.jsx(ee,{sx:{height:96,display:"flex",justifyContent:"space-between",p:i=>i.spacing(0,1,0,3)},children:e.jsx(je,{value:t,onChange:n,onKeyDown:s,placeholder:"Search order...",endAdornment:e.jsx(te,{position:"end",children:e.jsx(ne,{onClick:c,edge:"end",children:e.jsx(re,{icon:xe,sx:{color:"text.disabled",width:20,height:20}})})})})})}I.propTypes={filterName:r.string,onFilterName:r.func,onClickSearch:r.func,onHitEnter:r.func};function Oe(){const t=ae(),[n,c]=l.useState([]),[s,i]=l.useState(0),[a,u]=l.useState(0),[h,g]=l.useState("asc"),[f,H]=l.useState("name"),[m,L]=l.useState(""),[p,W]=l.useState(25),[q,z]=l.useState(0),v=l.useRef(n),O=l.useRef(p),k=l.useRef(s),P=l.useRef(m);l.useEffect(()=>{v.current=n,O.current=p,k.current=s,P.current=m,R(k.current,O.current,v.current,P.current)},[]);const R=(o,d,j,w)=>{console.log("Fetching Orders");const X=o+1;let C=`${le.baseURL}/api-proxy/proxy?method=get&resource=orders&page=${X}&page_size=${d}`;w&&(C+=`&name=${w}`),console.log(C),oe.get(C,{headers:{Authorization:`Bearer ${se.get("jwt")}`}}).then(b=>{console.log(b.data.data),c([...j,...b.data.data]),z(b.data.count)}).catch(b=>{console.error("Error fetching orders:",b)})},D=(o,d)=>{d!==""&&(g(f===d&&h==="asc"?"desc":"asc"),H(d))},M=(o,d)=>{i(d);const j=p*d;j>a&&(u(j),R(d,p,n,m))},V=o=>{i(0),W(parseInt(o.target.value,10))},U=o=>{L(o.target.value)},K=o=>{o.key==="Enter"&&_()},_=o=>{i(0),R(s,p,[],m)},G=(o,d)=>{t.push(`/orders/${d}`)},J=!n.length&&!!m;return e.jsxs(be,{children:[e.jsx(ie,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(S,{variant:"h4",children:"Orders"})}),e.jsxs(ye,{children:[e.jsx(I,{filterName:m,onFilterName:U,onClickSearch:_,onHitEnter:K}),e.jsx(ce,{children:e.jsx(he,{sx:{overflow:"unset"},children:e.jsxs(ge,{sx:{minWidth:800},children:[e.jsx(A,{order:h,orderBy:f,rowCount:n.length,onRequestSort:D,headLabel:[{id:"name",label:"Name"},{id:"customer",label:"Customer"},{id:"create_date",label:"Create Date"},{id:"amount_untaxed",label:"Amount Untaxed"},{id:"amount_tax",label:"Amount Tax"},{id:"amount_total",label:"Amount Total"},{id:"state",label:"State"}]}),e.jsxs(fe,{children:[n.slice(s*p,s*p+p).map(o=>e.jsx($,{name:o.name,customer:o.customer_id.name,create_date:o.create_date,amount_untaxed:o.amount_untaxed,amount_tax:o.amount_tax,amount_total:o.amount_total,state:o.state,handleClick:d=>G(d,o.id)},o.id)),e.jsx(B,{height:77,emptyRows:Ce(s,p,n.length)}),J&&e.jsx(E,{query:m})]})]})})}),e.jsx(me,{page:s,component:"div",count:q,rowsPerPage:p,onPageChange:M,rowsPerPageOptions:[25],onRowsPerPageChange:V})]})]})}function Fe(){return Te(),e.jsxs(e.Fragment,{children:[e.jsx(de,{children:e.jsx("title",{children:" Order | BEX Sales "})}),e.jsx(Oe,{})]})}export{Fe as default};
