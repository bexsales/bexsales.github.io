import{j as e,G as ne,T as w,P as t,B as se,H as re,I as ae,C as oe,J as ie,r as a,y as ce,z as le,S as de,K as ue,A as he}from"./index-BVww4E_S.js";import{T as C,a as l,b as pe,c as xe,s as me,d as fe,e as ge,f as ye,g as be}from"./search-fill-CEl463d9.js";import{O as je}from"./Select-CyHo8fu1.js";import{C as Te}from"./Container-BQkNYp94.js";import{C as Se}from"./Card-SoKCYwmS.js";const Re={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Ce(s,o,d){return s?Math.max(0,(1+s)*o-d):0}function H({query:s}){return e.jsx(C,{children:e.jsx(l,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ne,{sx:{textAlign:"center"},children:[e.jsx(w,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(w,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',s,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}H.propTypes={query:t.string};function q({id:s,name:o,street:d,city:p,state:i,country:r,zip:c,phone:m,mobile:b,email:j,onSelect:T}){return e.jsxs(C,{hover:!0,tabIndex:-1,onClick:()=>T({id:s,name:o,street:d,city:p,state:i,country:r,zip:c,phone:m,mobile:b,email:j}),children:[e.jsx(l,{children:o}),e.jsx(l,{children:d}),e.jsx(l,{children:p}),e.jsx(l,{children:i}),e.jsx(l,{children:r}),e.jsx(l,{children:c}),e.jsx(l,{children:m}),e.jsx(l,{children:b}),e.jsx(l,{children:j})]})}q.propTypes={id:t.any,name:t.any,street:t.any,city:t.any,state:t.any,country:t.any,zip:t.any,phone:t.any,mobile:t.any,email:t.any,onSelect:t.func};function U({order:s,orderBy:o,headLabel:d,onRequestSort:p}){const i=r=>c=>{p(c,r)};return e.jsx(pe,{children:e.jsx(C,{children:d.map(r=>e.jsx(l,{align:r.align||"left",sortDirection:o===r.id?s:!1,sx:{width:r.width,minWidth:r.minWidth},children:e.jsxs(xe,{hideSortIcon:!0,active:o===r.id,direction:o===r.id?s:"asc",onClick:i(r.id),children:[r.label,o===r.id?e.jsx(se,{sx:{...Re},children:s==="desc"?"sorted descending":"sorted ascending"}):null]})},r.id))})})}U.propTypes={order:t.oneOf(["asc","desc"]),orderBy:t.string,headLabel:t.array,onRequestSort:t.func};function _({emptyRows:s,height:o}){return s?e.jsx(C,{sx:{...o&&{height:o*s}},children:e.jsx(l,{colSpan:9})}):null}_.propTypes={emptyRows:t.number,height:t.number};function L({filterName:s,onFilterName:o,onClickSearch:d,onHitEnter:p}){return e.jsx(re,{sx:{height:96,display:"flex",justifyContent:"space-between",p:i=>i.spacing(0,1,0,3)},children:e.jsx(je,{value:s,onChange:o,onKeyDown:p,placeholder:"Search customer...",endAdornment:e.jsx(ae,{position:"end",children:e.jsx(oe,{onClick:d,edge:"end",children:e.jsx(ie,{icon:me,sx:{color:"text.disabled",width:20,height:20}})})})})})}L.propTypes={filterName:t.string,onFilterName:t.func,onClickSearch:t.func,onHitEnter:t.func};function Pe({showTitle:s,onSelect:o,filterTypeOption:d,filterParentContactOption:p}){const[i,r]=a.useState([]),[c,m]=a.useState(0),[b,j]=a.useState(0),[T,D]=a.useState("asc"),[v,M]=a.useState("name"),[x,W]=a.useState(""),[S,we]=a.useState(d),[R,ve]=a.useState(p),[u,K]=a.useState(25),[G,J]=a.useState(0),N=a.useRef(i),E=a.useRef(u),k=a.useRef(c),F=a.useRef(x),I=a.useRef(S),O=a.useRef(R);a.useEffect(()=>{N.current=i,E.current=u,k.current=c,F.current=x,I.current=S,O.current=R,P(k.current,E.current,N.current,F.current,I.current,O.current)},[]);const P=(n,h,f,A,$,B)=>{console.log("Fetching Customers");const te=n+1;let g=`${he.baseURL}/api-proxy/proxy?method=get&resource=customers&page=${te}&page_size=${h}`;A&&(g+=`&name=${A}`),$&&(g+=`&type=${$}`),B&&(g+=`&parent_contact_id=${B}`),console.log(g),ce.get(g,{headers:{Authorization:`Bearer ${le.get("jwt")}`}}).then(y=>{console.log(y.data.data),r([...f,...y.data.data]),J(y.data.count)}).catch(y=>{console.error("Error fetching customers:",y)})},V=(n,h)=>{console.log("sort",h),h!==""&&(D(v===h&&T==="asc"?"desc":"asc"),M(h))},Z=(n,h)=>{m(h);const f=u*h;f>b&&(j(f),P(h,u,i,x,S,R))},Q=n=>{m(0),K(parseInt(n.target.value,10))},X=n=>{W(n.target.value)},Y=n=>{n.key==="Enter"&&z()},z=n=>{m(0),P(c,u,[],x,S,R)},ee=!i.length&&!!x;return e.jsxs(Te,{children:[s&&e.jsx(de,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(w,{variant:"h4",children:"Customers"})}),e.jsxs(Se,{children:[e.jsx(L,{filterName:x,onFilterName:X,onClickSearch:z,onHitEnter:Y}),e.jsx(ue,{children:e.jsx(fe,{sx:{overflow:"unset"},children:e.jsxs(ge,{sx:{minWidth:800},children:[e.jsx(U,{order:T,orderBy:v,rowCount:i.length,onRequestSort:V,headLabel:[{id:"name",label:"Name"},{id:"street",label:"Street"},{id:"city",label:"City"},{id:"state",label:"State"},{id:"country",label:"Country"},{id:"zip",label:"Zip"},{id:"phone",label:"Phone"},{id:"mobile",label:"Mobile"},{id:"email",label:"Email"}]}),e.jsxs(ye,{children:[i.slice(c*u,c*u+u).map(n=>e.jsx(q,{id:n.id,name:n.name,street:n.street,city:n.city,state:n.state_id.name,country:n.country_id.name,zip:n.zip,phone:n.phone,mobile:n.mobile,email:n.email,onSelect:o},n.id)),e.jsx(_,{height:77,emptyRows:Ce(c,u,i.length)}),ee&&e.jsx(H,{query:x})]})]})})}),e.jsx(be,{page:c,component:"div",count:G,rowsPerPage:u,onPageChange:Z,rowsPerPageOptions:[25],onRowsPerPageChange:Q})]})]})}Pe.propTypes={showTitle:t.bool,onSelect:t.func,filterTypeOption:t.string,filterParentContactOption:t.number};export{Pe as C};
