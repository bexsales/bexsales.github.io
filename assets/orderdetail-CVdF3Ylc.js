import{g as Ge,k as Ze,h as Xe,T as j,K as Je,r as a,i as Ye,a as et,j as e,_ as be,b as tt,f as nt,N as ve,P as i,S as T,C as I,D as ue,x as b,B as ot,O as rt,I as st,Q as Ce,y as Z,z as X,R as at,A as J,U as it,W as lt}from"./index-Crk9S-oF.js";import{T as z,a as h,b as _e,c as ct,s as dt,d as Se,e as Te,f as Oe,g as ut}from"./search-fill-CbA43ys8.js";import{L as ht}from"./label-Bcv6CM7a.js";import{D as A,a as F,b as L,c as N,P as xt}from"./product-template-view-DWSGrPgF.js";import{O as pt,C as mt}from"./CircularProgress-qJbvu80h.js";import{C as Pe}from"./Container-D_rKHmn0.js";import{C as we}from"./Card-Dm6Jyu88.js";import{F as Y,T as G}from"./TextField-DK6ddPB0.js";import{C as Ie}from"./customer-view-HoKwraZM.js";import{P as jt}from"./product-view-DcVe0YwU.js";import{C as fe}from"./Chip-D6rf1Zxw.js";import{G as de}from"./Grid-B_g7ATaQ.js";import{L as gt}from"./LoadingButton-V_OmqNiW.js";import{u as yt}from"./use-auth-B_tKGnRE.js";import"./isMuiElement-OzvNb_XR.js";function ft(n){return Ge("MuiDialogContentText",n)}Ze("MuiDialogContentText",["root"]);const bt=["children","className"],vt=n=>{const{classes:o}=n,l=nt({root:["root"]},ft,o);return be({},o,l)},Ct=Xe(j,{shouldForwardProp:n=>Je(n)||n==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(n,o)=>o.root})({}),_t=a.forwardRef(function(o,d){const l=Ye({props:o,name:"MuiDialogContentText"}),{className:s}=l,r=et(l,bt),m=vt(r);return e.jsx(Ct,be({component:"p",variant:"body1",color:"text.secondary",ref:d,ownerState:r,className:tt(m.root,s)},l,{classes:m}))}),je=_t,St={width:24,height:24,body:'<g id="evaCopyOutline0"><g id="evaCopyOutline1"><g id="evaCopyOutline2" fill="currentColor"><path d="M18 21h-6a3 3 0 0 1-3-3v-6a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3Zm-6-10a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1Z"/><path d="M9.73 15H5.67A2.68 2.68 0 0 1 3 12.33V5.67A2.68 2.68 0 0 1 5.67 3h6.66A2.68 2.68 0 0 1 15 5.67V9.4h-2V5.67a.67.67 0 0 0-.67-.67H5.67a.67.67 0 0 0-.67.67v6.66a.67.67 0 0 0 .67.67h4.06Z"/></g></g></g>'},Tt=St,Ot={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Pt(n,o,d){return n?Math.max(0,(1+n)*o-d):0}function ke({query:n}){return e.jsx(z,{children:e.jsx(h,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ve,{sx:{textAlign:"center"},children:[e.jsx(j,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(j,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}ke.propTypes={query:i.string};function De({emptyRows:n,height:o}){return n?e.jsx(z,{sx:{...o&&{height:o*n}},children:e.jsx(h,{colSpan:9})}):null}De.propTypes={emptyRows:i.number,height:i.number};function Re({handleSendInvoice:n,partner:o,invoiceName:d,invoiceId:l,customerEmail:s}){const[r,m]=a.useState(!1),x=()=>{m(!0)},P=()=>{m(!1)},y=async()=>{await n(l)===!0&&P()};return e.jsxs(T,{direction:"row",alignItems:"center",children:[e.jsx(T,{direction:"column",alignItems:"center",spacing:1,children:e.jsx(I,{onClick:x,sx:{color:"blue",backgroundColor:"#fff","&:hover":{backgroundColor:"#bbf"}},children:e.jsx(ue,{icon:"mdi:send"})})}),e.jsxs(A,{open:r,onClose:P,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(F,{id:"alert-dialog-title",children:"Confirm Send"}),e.jsx(L,{children:e.jsxs(je,{id:"alert-dialog-description",children:["Are you sure you want to send this invoice ",e.jsxs("b",{children:["[",d,"]"]})," to ",e.jsxs("b",{children:[o," [",s,"]"]}),"?"]})}),e.jsxs(N,{children:[e.jsx(b,{onClick:P,color:"primary",children:"Cancel"}),e.jsx(b,{onClick:y,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}Re.propTypes={handleSendInvoice:i.func,partner:i.any,invoiceName:i.any,invoiceId:i.any,customerEmail:i.any};function qe({id:n,name:o,payment_state:d,customer:l,customer_email:s,create_date:r,amount_untaxed:m,amount_tax:x,amount_total:P,state:y,invoice_origin:k,invoice_date:C,handleSendInvoice:D}){const R=O=>`$${O.toFixed(2)}`;return e.jsxs(z,{hover:!0,tabIndex:-1,children:[e.jsx(h,{children:y==="posted"&&d==="not_paid"&&s&&e.jsx(Re,{handleSendInvoice:D,partner:l,invoiceName:o,invoiceId:n,customerEmail:s})}),e.jsx(h,{children:o}),e.jsx(h,{children:d}),e.jsx(h,{children:l}),e.jsx(h,{children:s}),e.jsx(h,{children:r}),e.jsx(h,{children:R(m)}),e.jsx(h,{children:R(x)}),e.jsx(h,{children:R(P)}),e.jsx(h,{children:e.jsx(ht,{color:y!=="draft"&&"error"||"success",children:y})}),e.jsx(h,{children:k}),e.jsx(h,{children:C})]})}qe.propTypes={id:i.any,name:i.any,payment_state:i.any,customer:i.any,customer_email:i.any,create_date:i.any,amount_untaxed:i.any,amount_tax:i.any,amount_total:i.any,state:i.any,invoice_origin:i.any,invoice_date:i.any,handleSendInvoice:i.func};function Ae({order:n,orderBy:o,headLabel:d,onRequestSort:l}){const s=r=>m=>{l(m,r)};return e.jsx(_e,{children:e.jsx(z,{children:d.map(r=>e.jsx(h,{align:r.align||"left",sortDirection:o===r.id?n:!1,sx:{width:r.width,minWidth:r.minWidth},children:e.jsxs(ct,{hideSortIcon:!0,active:o===r.id,direction:o===r.id?n:"desc",onClick:s(r.id),children:[r.label,o===r.id?e.jsx(ot,{sx:{...Ot},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},r.id))})})}Ae.propTypes={order:i.oneOf(["asc","desc"]),orderBy:i.string,headLabel:i.array,onRequestSort:i.func};function Fe({filterName:n,onFilterName:o,onClickSearch:d,onHitEnter:l}){return e.jsx(rt,{sx:{height:96,display:"flex",justifyContent:"space-between",p:s=>s.spacing(0,1,0,3)},children:e.jsx(pt,{value:n,onChange:o,onKeyDown:l,placeholder:"Search invoice...",endAdornment:e.jsx(st,{position:"end",children:e.jsx(I,{onClick:d,edge:"end",children:e.jsx(Ce,{icon:dt,sx:{color:"text.disabled",width:20,height:20}})})})})})}Fe.propTypes={filterName:i.string,onFilterName:i.func,onClickSearch:i.func,onHitEnter:i.func};function Le({invoiceOrigin:n}){const o=n,[d,l]=a.useState(!1),[s,r]=a.useState([]),[m,x]=a.useState(0),[P,y]=a.useState(0),[k,C]=a.useState("asc"),[D,R]=a.useState("name"),[O,ee]=a.useState(""),[_,he]=a.useState(25),[te,xe]=a.useState(0),B=a.useRef(s),ne=a.useRef(_),oe=a.useRef(m),V=a.useRef(O);a.useEffect(()=>{B.current=s,ne.current=_,oe.current=m,V.current=O,$(oe.current,ne.current,B.current,V.current,o)},[]);const $=(u,f,w,M,W)=>{console.log("Fetching Invoices"),l(!0);const Q=u+1;let U=`${J.baseURL}/api-proxy/proxy?method=get&resource=invoices&page=${Q}&page_size=${f}`;M&&(U+=`&name=${M}`),W&&(U+=`&invoice_origin=${W}`),console.log(U),Z.get(U,{headers:{Authorization:`Bearer ${X.get("jwt")}`}}).then(E=>{console.log(E.data.data),r([...w,...E.data.data]),xe(E.data.count)}).catch(E=>{console.error("Error fetching invoices:",E)}).finally(()=>{l(!1)})},re=(u,f)=>{f!==""&&(C(D===f&&k==="asc"?"desc":"asc"),R(f))},se=(u,f)=>{x(f);const w=_*f;window.scrollTo({top:0,behavior:"smooth"}),w>P&&(y(w),$(f,_,s,O,o))},H=u=>{x(0),he(parseInt(u.target.value,10))},pe=u=>{ee(u.target.value)},ae=u=>{u.key==="Enter"&&ie()},ie=u=>{x(0),$(m,_,[],O)},le=async u=>{try{console.log("Sending Invoice");const w=`${J.baseURL}/api-proxy/proxy?method=post&resource=send-invoices`;console.log(w);const M={invoice:{id:parseInt(u,10)}};console.log("Request body",M);const W=await Z.post(w,M,{headers:{Authorization:`Bearer ${X.get("jwt")}`}});return console.log(W.data),W.data.success===!1?(alert("Invoice failed to send!"),!1):(alert("Invoice Sent!"),!0)}catch(f){return console.error("Error sending invoice:",f),alert("Error sending invoice!"),!1}},me=!s.length&&!!O;return e.jsxs(e.Fragment,{children:[d&&e.jsx(T,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",bgcolor:"rgba(255, 255, 255, 0.6)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(mt,{})}),e.jsx(Pe,{children:e.jsxs(we,{children:[e.jsx(Fe,{filterName:O,onFilterName:pe,onClickSearch:ie,onHitEnter:ae}),e.jsx(at,{children:e.jsx(Se,{sx:{overflow:"unset"},children:e.jsxs(Te,{sx:{minWidth:800},children:[e.jsx(Ae,{order:k,orderBy:D,rowCount:s.length,onRequestSort:re,headLabel:[{id:"email_action",label:""},{id:"name",label:"Name"},{id:"payment_state",label:"Payment State"},{id:"customer",label:"Customer"},{id:"customer_email",label:"Email"},{id:"create_date",label:"Create Date"},{id:"amount_untaxed",label:"Amount Untaxed"},{id:"amount_tax",label:"Amount Tax"},{id:"amount_total",label:"Amount Total"},{id:"state",label:"State"},{id:"invoice_origin",label:"Order"},{id:"invoice_Date",label:"Invoice Date"}]}),e.jsxs(Oe,{children:[s.slice(m*_,m*_+_).map(u=>e.jsx(qe,{id:u.id,name:u.name,payment_state:u.payment_state,customer:u.customer_id.name,customer_email:u.customer_id.email,create_date:u.create_date,amount_untaxed:u.amount_untaxed,amount_tax:u.amount_tax,amount_total:u.amount_total,state:u.state,invoice_origin:u.invoice_origin,invoice_date:u.invoice_date,handleSendInvoice:f=>le(f,u.id)},u.id)),e.jsx(De,{height:77,emptyRows:Pt(m,_,s.length)}),me&&e.jsx(ke,{query:O})]})]})})}),e.jsx(ut,{page:m,component:"div",count:te,rowsPerPage:_,onPageChange:se,rowsPerPageOptions:[25],onRowsPerPageChange:H})]})})]})}Le.propTypes={invoiceOrigin:i.string};function Ne({invoiceOrigin:n,accountMoveCount:o}){const[d,l]=a.useState(!1),s=()=>{l(!0)},r=()=>{l(!1)};return e.jsxs("div",{children:[e.jsxs(b,{variant:"outlined",onClick:s,children:["Invoices (",o,")"]}),e.jsxs(A,{open:d,onClose:r,maxWidth:"xl",fullWidth:!0,children:[e.jsx(F,{children:"Invoices"}),e.jsx(L,{children:e.jsx(Y,{sx:{width:"100%"},children:e.jsx(Le,{invoiceOrigin:n,style:{width:"100%"}})})}),e.jsx(N,{children:e.jsx(b,{onClick:r,color:"primary",children:"Close"})})]})]})}Ne.propTypes={invoiceOrigin:i.func,accountMoveCount:i.number};function Me({onSelect:n}){const[o,d]=a.useState(!1),l=()=>{d(!0)},s=()=>{d(!1)},r=m=>{n(m),s()};return e.jsxs("div",{children:[e.jsx(b,{variant:"outlined",onClick:l,children:"Add Product"}),e.jsxs(A,{open:o,onClose:s,maxWidth:"xl",fullWidth:!0,children:[e.jsx(F,{children:"Products"}),e.jsx(L,{children:e.jsx(Y,{sx:{width:"100%"},children:e.jsx(xt,{onSelect:r,style:{width:"100%"}})})}),e.jsx(N,{children:e.jsx(b,{onClick:s,color:"primary",children:"Close"})})]})]})}Me.propTypes={onSelect:i.func};function We({handleSendOrder:n,partner:o}){const[d,l]=a.useState(!1),s=()=>{l(!0)},r=()=>{l(!1)};return e.jsxs(T,{direction:"row",alignItems:"center",children:[e.jsxs(T,{direction:"column",alignItems:"center",spacing:1,children:[e.jsx(I,{onClick:s,sx:{color:"blue",backgroundColor:"#ddf","&:hover":{backgroundColor:"#bbf"}},children:e.jsx(ue,{icon:"mdi:send"})}),e.jsx(j,{variant:"caption",sx:{color:"blue"},children:"Email"})]}),e.jsxs(A,{open:d,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(F,{id:"alert-dialog-title",children:"Confirm Send"}),e.jsx(L,{children:e.jsxs(je,{id:"alert-dialog-description",children:["Are you sure you want to send this order to ",e.jsxs("b",{children:[o.name," [",o.email,"]"]}),"?"]})}),e.jsxs(N,{children:[e.jsx(b,{onClick:r,color:"primary",children:"Cancel"}),e.jsx(b,{onClick:n,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}We.propTypes={handleSendOrder:i.func,partner:i.any};function Ee({onSelect:n}){const[o,d]=a.useState(!1),l=()=>{d(!0)},s=()=>{d(!1)},r=m=>{n(m),s()};return e.jsxs("div",{children:[e.jsx(b,{variant:"outlined",onClick:l,children:"Set"}),e.jsxs(A,{open:o,onClose:s,maxWidth:"xl",fullWidth:!0,children:[e.jsx(F,{children:"Customers"}),e.jsx(L,{sx:{padding:0},children:e.jsx(Y,{sx:{width:"100%"},children:e.jsx(Ie,{onSelect:r,style:{width:"100%"}})})}),e.jsx(N,{children:e.jsx(b,{onClick:s,color:"primary",children:"Close"})})]})]})}Ee.propTypes={onSelect:i.func};function $e({onSelect:n,filterParentContactOption:o}){const[d,l]=a.useState(!1),s=()=>{l(!0)},r=()=>{l(!1)},m=x=>{n(x),r()};return a.useEffect(()=>{console.log("DeliveryPopupModal Props:"),console.log("filterParentContactOption:",o)},[n,o]),e.jsxs("div",{children:[e.jsx(b,{variant:"outlined",onClick:s,children:"Set"}),e.jsxs(A,{open:d,onClose:r,maxWidth:"xl",fullWidth:!0,children:[e.jsx(F,{children:"Customers"}),e.jsx(L,{sx:{padding:0},children:e.jsx(Y,{sx:{width:"100%"},children:e.jsx(Ie,{onSelect:m,filterTypeOption:"delivery",filterParentContactOption:o,style:{width:"100%"}})})}),e.jsx(N,{children:e.jsx(b,{onClick:r,color:"primary",children:"Close"})})]})]})}$e.propTypes={onSelect:i.func,filterParentContactOption:i.number};function Ue({handleCancelOrder:n}){const[o,d]=a.useState(!1),l=()=>{d(!0)},s=()=>{d(!1)};return e.jsxs(T,{direction:"row",alignItems:"center",children:[e.jsxs(T,{direction:"column",alignItems:"center",spacing:1,children:[e.jsx(I,{onClick:l,sx:{color:"red",backgroundColor:"#fdd","&:hover":{backgroundColor:"#fbb"}},children:e.jsx(ue,{icon:"eva:close-outline"})}),e.jsx(j,{variant:"caption",sx:{color:"red"},children:"Cancel"})]}),e.jsxs(A,{open:o,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(F,{id:"alert-dialog-title",children:"Confirm Cancellation"}),e.jsx(L,{children:e.jsx(je,{id:"alert-dialog-description",children:"Are you sure you want to cancel this order?"})}),e.jsxs(N,{children:[e.jsx(b,{onClick:s,color:"primary",children:"Cancel"}),e.jsx(b,{onClick:n,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}Ue.propTypes={handleCancelOrder:i.func};function ze({onSelect:n}){const[o,d]=a.useState(!1),l=()=>{d(!0)},s=()=>{d(!1)},r=m=>{n([m]),s()};return e.jsxs("div",{children:[e.jsx(b,{variant:"outlined",onClick:l,children:"Add SKU"}),e.jsxs(A,{open:o,onClose:s,maxWidth:"xl",fullWidth:!0,children:[e.jsx(F,{children:"Products"}),e.jsx(L,{children:e.jsx(Y,{sx:{width:"100%"},children:e.jsx(jt,{onSelect:r,style:{width:"100%"}})})}),e.jsx(N,{children:e.jsx(b,{onClick:s,color:"primary",children:"Close"})})]})]})}ze.propTypes={onSelect:i.func};function Be({orderId:n}){const[o,d]=a.useState(!1),[l,s]=a.useState(""),[r,m]=a.useState(""),[x,P]=a.useState({id:0,name:"",street:"",city:"",state:"",country:"",zip:"",phone:"",mobile:"",email:""}),[y,k]=a.useState({id:0,name:"",street:"",city:"",state:"",country:"",zip:"",phone:"",mobile:"",email:""}),[C,D]=a.useState([]),[R,O]=a.useState([]),[ee,_]=a.useState({}),[he,te]=a.useState(0),[xe,B]=a.useState(0),[ne,oe]=a.useState(0),[V,$]=a.useState(""),[re,se]=a.useState(""),[H,pe]=a.useState(""),[ae,ie]=a.useState(""),[le,me]=a.useState(0);a.useEffect(()=>{Ve()},[]);const u=()=>{Q(!0,!1)},f=()=>{Q(!1,!0)},w=(t,c)=>{console.log("Fetching order totals");const g=`${J.baseURL}/api-proxy/proxy?method=post&resource=ordertotals`;console.log(g);const p=C.map(v=>({product_id:v[2].id,product_uom_qty:v[2].product_uom_qty})),q={partner_id:x.id,order_line:p};console.log("Request body",q),Z.post(g,q,{headers:{Authorization:`Bearer ${X.get("jwt")}`}}).then(v=>{console.log(v.data),_(v.data.result.product_prices),te(v.data.result.subtotal),B(v.data.result.total)}).catch(v=>{console.error("Error fetching order totals:",v)})};a.useEffect(()=>{w();const t=C.reduce((c,g)=>c+g[2].product_uom_qty,0);oe(t)},[x,C]);const M=t=>{$(t.target.value)},W=t=>{se(t.target.value)},Q=(t,c)=>{d(!0),console.log("Saving Order");let g="post";t===!0&&(g="cancel");const p=`${J.baseURL}/api-proxy/proxy?method=${g}&resource=orders`;console.log(p),console.log(C);const q=C.map(S=>[S[0],S[1],{product_id:S[2].id,product_uom_qty:S[2].product_uom_qty}]),v=R.map(S=>[2,S[1],{}]),K=q.concat(v),ye={order:{id:parseInt(n,10),partner_id:x.id,order_line:K,x_studio_notes:V,client_order_ref:re,...c&&{is_send:!0},...y.id&&{partner_shipping_id:y.id}}};console.log("Request body",ye),Z.post(p,ye,{headers:{Authorization:`Bearer ${X.get("jwt")}`}}).then(S=>{console.log(S.data),d(!1),S.data.result.success===!1?alert(S.data.result.message):window.location.reload()}).catch(S=>{console.error("Error saving order:",S)})},U=(t,c,g)=>{if(t<0||t>=C.length)return;const p=C.filter((v,K)=>K===t);p[0][0]!==0&&(console.log("Adding line to delete queue",p),O(R.concat(p)));const q=C.filter((v,K)=>K!==t);D(q)},E=(t,c)=>{const g=C.map((p,q)=>{if(q===t){console.log("handle qty change",p);const v=["consu","service"];return p[2].qty_available<c&&!v.includes(p[2].type)?(alert("Quantity available is insufficient."),p):[p[0],p[1],{...p[2],product_uom_qty:c!==0?Number(c):0}]}return p});D(g)},ce=t=>t?`$${t.toFixed(2)}`:"",Ve=()=>{console.log("Fetching Order Details");const t=`${J.baseURL}/api-proxy/proxy?method=get&resource=orders&order_id=${n}`;console.log(t),Z.get(t,{headers:{Authorization:`Bearer ${X.get("jwt")}`}}).then(c=>{console.log(c.data.data),s(c.data.data.name),pe(c.data.data.ship_tracking_number),ie(c.data.data.ship_date),P(c.data.data.customer_id),k(c.data.data.partner_shipping_id),$(c.data.data.x_studio_notes),se(c.data.data.client_order_ref?c.data.data.client_order_ref:"");const g=c.data.data.order_line.map(p=>[1,p.id,{line_id:p.id,id:p.product_id.id,name:p.name,product_uom_qty:p.product_uom_qty,attributes:p.product_id.attributes,qty_available:p.product_id.qty_available,type:p.product_id.type}]);console.log(g),D(g),te(c.data.data.amount_untaxed),B(c.data.data.amount_total),m(c.data.data.state),me(c.data.data.account_move_count)}).catch(c=>{console.error("Error fetching order details:",c)})},He=t=>{console.log("Setting order partner"),console.log(t),P({id:t.id,name:t.name,street:t.street,city:t.city,state:t.state,country:t.country,zip:t.zip,phone:t.phone,mobile:t.mobile,email:t.email}),k({id:0,name:"",street:"",city:"",state:"",country:"",zip:"",phone:"",mobile:"",email:""})},Qe=t=>{console.log("Setting order partner"),console.log(t),k({id:t.id,name:t.name,street:t.street,city:t.city,state:t.state,country:t.country,zip:t.zip,phone:t.phone,mobile:t.mobile,email:t.email})},ge=t=>{console.log("Adding order lines"),console.log(t),t.forEach(c=>{D(g=>[...g,[0,0,{id:c.id,name:`[${c.default_code}] ${c.name}`,product_uom_qty:c.qty_needed||1,attributes:c.attributes,qty_available:c.qty_available}]])})},Ke=e.jsxs(e.Fragment,{children:[e.jsx(T,{spacing:3,direction:"row",alignItems:"center",children:e.jsx(G,{fullWidth:!0,name:"partner_id",label:"Customer",value:x.name,InputProps:{readOnly:!0,endAdornment:e.jsx(I,{children:e.jsx(Ee,{onSelect:He})})}})}),x.name&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(j,{variant:"body1",fontWeight:"bold",children:"Address:"}),e.jsx(j,{variant:"body1",children:x.street}),e.jsxs(j,{variant:"body1",children:[x.city," ",x.state]}),e.jsxs(j,{variant:"body1",children:[x.country," ",x.zip]}),e.jsxs(j,{variant:"body1",children:[e.jsx("b",{children:"Phone:"})," ",x.phone]}),e.jsxs(j,{variant:"body1",children:[e.jsx("b",{children:"Mobile:"})," ",x.mobile]}),e.jsxs(j,{variant:"body1",children:[e.jsx("b",{children:"Email:"})," ",x.email]})]}),e.jsx("div",{style:{margin:"16px 0"}}),x.name&&e.jsx(T,{spacing:3,direction:"row",alignItems:"center",children:e.jsx(G,{fullWidth:!0,name:"partner_shipping_id",label:"Delivery Address",value:y.name,InputProps:{readOnly:!0,endAdornment:e.jsx(I,{children:e.jsx($e,{onSelect:Qe,filterParentContactOption:x.id})})}})}),y.name&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(j,{variant:"body1",fontWeight:"bold",children:"Address:"}),e.jsx(j,{variant:"body1",children:y.street}),e.jsxs(j,{variant:"body1",children:[y.city," ",x.state]}),e.jsxs(j,{variant:"body1",children:[y.country," ",x.zip]}),e.jsxs(j,{variant:"body1",children:[e.jsx("b",{children:"Phone:"})," ",y.phone]}),e.jsxs(j,{variant:"body1",children:[e.jsx("b",{children:"Mobile:"})," ",y.mobile]}),e.jsxs(j,{variant:"body1",children:[e.jsx("b",{children:"Email:"})," ",y.email]})]}),e.jsx("div",{style:{margin:"16px 0"}}),H&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsxs(j,{variant:"body1",children:[e.jsx("strong",{children:"Tracking #: "}),H,e.jsx(I,{onClick:()=>{navigator.clipboard.writeText(H),alert("Tracking number copied to clipboard!")},children:e.jsx(Ce,{icon:Tt,sx:{color:"text.disabled",width:20,height:20}})})]})]}),ae&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsxs(j,{variant:"body1",children:[e.jsx("strong",{children:"Ship Date: "}),ae]})]}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(I,{children:e.jsx(Me,{onSelect:ge})}),e.jsx(I,{children:e.jsx(ze,{onSelect:ge})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(Se,{component:ve,children:e.jsxs(Te,{children:[e.jsx(_e,{children:e.jsxs(z,{children:[e.jsx(h,{children:"Product"}),e.jsx(h,{children:"Attributes"}),e.jsx(h,{children:"Unit Price"}),e.jsx(h,{children:"Qty Available"}),e.jsx(h,{children:"Qty"}),e.jsx(h,{children:"Subtotal"}),e.jsx(h,{})]})}),e.jsx(Oe,{children:C.map((t,c)=>e.jsxs(z,{children:[e.jsx(h,{children:t[2].name}),e.jsx(h,{children:t[2].attributes.map((g,p)=>e.jsx(fe,{label:g.name||g.attribute,variant:"outlined"},p))}),e.jsx(h,{children:ce(ee[t[2].id])}),e.jsx(h,{children:t[2].qty_available}),e.jsx(h,{children:e.jsx(G,{type:"number",style:{minWidth:"100px"},value:t[2].product_uom_qty!==0?t[2].product_uom_qty:"",onChange:g=>E(c,g.target.value)})}),e.jsx(h,{children:ce(ee[t[2].id]*t[2].product_uom_qty)}),e.jsx(h,{align:"right",children:e.jsx(I,{onClick:()=>U(c),children:e.jsx(ue,{icon:"eva:trash-2-outline"})})})]},c))})]})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsxs(j,{variant:"body1",fontWeight:"bold",children:["Total Product Qty: ",ne]}),e.jsxs(j,{variant:"body1",fontWeight:"bold",children:["Subtotal: ",ce(he)]}),e.jsxs(j,{variant:"body1",fontWeight:"bold",children:["Total: ",ce(xe)]}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(de,{container:!0,spacing:2,children:e.jsx(de,{item:!0,xs:12,md:6,lg:6,children:e.jsx(G,{label:"Notes",value:V,multiline:!0,fullWidth:!0,rows:4,onChange:M})})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(de,{container:!0,spacing:2,children:e.jsx(de,{item:!0,xs:12,md:6,lg:6,children:e.jsx(G,{label:"PO Number",value:re,fullWidth:!0,onChange:W})})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(gt,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:Q,loading:o,children:"Save"})]});return e.jsxs(Pe,{children:[e.jsxs(T,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsxs(j,{variant:"h4",children:["Order ",l,e.jsx(fe,{label:r,color:r==="cancel"?"danger":"primary",variant:"outlined",style:{marginLeft:"10px"}})]}),(r==="draft"||r==="sent")&&e.jsxs(T,{direction:"row",spacing:2,children:[e.jsx(Ue,{handleCancelOrder:u}),e.jsx(We,{handleSendOrder:f,partner:x})]}),r==="sale"&&le>0&&e.jsx(T,{direction:"row",spacing:2,children:e.jsx(Ne,{invoiceOrigin:l,accountMoveCount:le})})]}),Ke,e.jsx(we,{})]})}Be.propTypes={orderId:i.any};function zt(){yt();const{orderId:n}=it();return e.jsxs(e.Fragment,{children:[e.jsx(lt,{children:e.jsx("title",{children:" Order Detail | BEX Sales "})}),e.jsx(Be,{orderId:n})]})}export{zt as default};
