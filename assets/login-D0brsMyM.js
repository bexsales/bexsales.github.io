import{t as y,w as v,r as a,j as e,S as d,I as C,y as L,z as I,T as c,B as S,A as E,n as b,L as k,D as A,C as D,E as F,F as B,W as P}from"./index-D2TG5Gbs.js";import{T as h,L as T}from"./LoadingButton-B-qPNzwV.js";import{C as R}from"./Card-50y2-TB9.js";import"./isMuiElement-CYNggTAb.js";import"./Select-EqYqUqnI.js";function U(){const x=y(),u=v(),[n,p]=a.useState(!1),[m,o]=a.useState(!1),[t,g]=a.useState({identifier:"",password:""}),[r,f]=a.useState(null),i=s=>{g({...t,[s.target.name]:s.target.value})},j=s=>{s.key==="Enter"&&l()},l=async()=>{o(!0);try{const s=await D.post(`${F.baseURL}/auth/local`,{identifier:t.identifier,password:t.password});console.log("Authentication successful",s.data),B.set("jwt",s.data.jwt,{expires:7}),u.push("/")}catch(s){console.error("Authentication error",s),f("Invalid email or password.")}finally{o(!1)}},w=e.jsxs(e.Fragment,{children:[e.jsxs(d,{spacing:3,children:[e.jsx(h,{name:"identifier",label:"Email address",value:t.identifier,onChange:i}),e.jsx(h,{name:"password",label:"Password",type:n?"text":"password",value:t.password,onChange:i,onKeyDown:j,InputProps:{endAdornment:e.jsx(C,{position:"end",children:e.jsx(L,{onClick:()=>p(!n),edge:"end",children:e.jsx(I,{icon:n?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),r&&e.jsx(c,{color:"error",sx:{mt:1},children:r}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(T,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:l,loading:m,children:"Login"})]});return e.jsxs(S,{sx:{...E({color:b(x.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(k,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(d,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(R,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(c,{variant:"h4",children:"Sign in to BEX Sales"}),e.jsx(A,{sx:{my:3}}),w]})})]})}function V(){return e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx("title",{children:" Login | Minimal UI "})}),e.jsx(U,{})]})}export{V as default};
