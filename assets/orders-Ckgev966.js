import{g as X,k as Y,h as H,G as ue,_ as g,r as i,a as Z,H as ne,j as e,b as W,l as z,f as ee,J as te,K as pe,n as he,i as re,M as me,T as A,P as l,B as be,N as xe,S as oe,O as fe,I as ge,C as Ce,Q as ye,w as je,y as ke,z as Pe,R as ve,A as _e,W as Se}from"./index-CRBjCGpm.js";import{T as V,a as x,b as Re,c as Ie,s as $e,d as Te,e as Fe,f as Be,g as we}from"./search-fill-BVtLbAjR.js";import{L as Ne}from"./label-BHRJwGKA.js";import{u as Le,O as Oe}from"./Select-gVDHWdWE.js";import{C as ze}from"./Container-BNunzwtd.js";import{C as Ee}from"./Card-Dkjqnt1r.js";import{u as Me}from"./use-auth-Dizp-5VJ.js";function qe(t){return X("PrivateSwitchBase",t)}Y("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ae=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],He=t=>{const{classes:o,checked:r,disabled:a,edge:s}=t,n={root:["root",r&&"checked",a&&"disabled",s&&`edge${z(s)}`],input:["input"]};return ee(n,qe,o)},Ue=H(ue)(({ownerState:t})=>g({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),De=H("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),We=i.forwardRef(function(o,r){const{autoFocus:a,checked:s,checkedIcon:n,className:d,defaultChecked:j,disabled:C,disableFocusRipple:h=!1,edge:_=!1,icon:m,id:f,inputProps:b,inputRef:w,name:u,onBlur:k,onChange:S,onFocus:P,readOnly:N,required:O=!1,tabIndex:F,type:v,value:R}=o,I=Z(o,Ae),[T,K]=Le({controlled:s,default:!!j,name:"SwitchBase",state:"checked"}),$=ne(),G=y=>{P&&P(y),$&&$.onFocus&&$.onFocus(y)},U=y=>{k&&k(y),$&&$.onBlur&&$.onBlur(y)},J=y=>{if(y.nativeEvent.defaultPrevented)return;const E=y.target.checked;K(E),S&&S(y,E)};let L=C;$&&typeof L>"u"&&(L=$.disabled);const c=v==="checkbox"||v==="radio",p=g({},o,{checked:T,disabled:L,disableFocusRipple:h,edge:_}),B=He(p);return e.jsxs(Ue,g({component:"span",className:W(B.root,d),centerRipple:!0,focusRipple:!h,disabled:L,tabIndex:null,role:void 0,onFocus:G,onBlur:U,ownerState:p,ref:r},I,{children:[e.jsx(De,g({autoFocus:a,checked:s,defaultChecked:j,className:B.input,disabled:L,id:c?f:void 0,name:u,onChange:J,readOnly:N,ref:w,required:O,ownerState:p,tabIndex:F,type:v},v==="checkbox"&&R===void 0?{}:{value:R},b)),T?n:m]}))}),Ve=We,Ke=te(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Ge=te(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Je=te(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Qe(t){return X("MuiCheckbox",t)}const Xe=Y("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Q=Xe,Ye=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Ze=t=>{const{classes:o,indeterminate:r,color:a,size:s}=t,n={root:["root",r&&"indeterminate",`color${z(a)}`,`size${z(s)}`]},d=ee(n,Qe,o);return g({},o,d)},et=H(Ve,{shouldForwardProp:t=>pe(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[o.root,r.indeterminate&&o.indeterminate,r.color!=="default"&&o[`color${z(r.color)}`]]}})(({theme:t,ownerState:o})=>g({color:(t.vars||t).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${o.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:he(o.color==="default"?t.palette.action.active:t.palette[o.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${Q.checked}, &.${Q.indeterminate}`]:{color:(t.vars||t).palette[o.color].main},[`&.${Q.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),tt=e.jsx(Ge,{}),ot=e.jsx(Ke,{}),nt=e.jsx(Je,{}),rt=i.forwardRef(function(o,r){var a,s;const n=re({props:o,name:"MuiCheckbox"}),{checkedIcon:d=tt,color:j="primary",icon:C=ot,indeterminate:h=!1,indeterminateIcon:_=nt,inputProps:m,size:f="medium",className:b}=n,w=Z(n,Ye),u=h?_:C,k=h?_:d,S=g({},n,{color:j,indeterminate:h,size:f}),P=Ze(S);return e.jsx(et,g({type:"checkbox",inputProps:g({"data-indeterminate":h},m),icon:i.cloneElement(u,{fontSize:(a=u.props.fontSize)!=null?a:f}),checkedIcon:i.cloneElement(k,{fontSize:(s=k.props.fontSize)!=null?s:f}),ownerState:S,ref:r,className:W(P.root,b)},w,{classes:P}))}),at=rt,st={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function ct(t,o,r){return t?Math.max(0,(1+t)*o-r):0}function ae({query:t}){return e.jsx(V,{children:e.jsx(x,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(me,{sx:{textAlign:"center"},children:[e.jsx(A,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(A,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}ae.propTypes={query:l.string};function se({name:t,customer:o,create_date:r,amount_untaxed:a,amount_tax:s,amount_total:n,state:d,x_studio_notes:j,client_order_ref:C,ship_date:h,ship_tracking_number:_,handleClick:m}){const f=b=>`$${b.toFixed(2)}`;return e.jsxs(V,{hover:!0,tabIndex:-1,onClick:m,children:[e.jsx(x,{children:t}),e.jsx(x,{children:o}),e.jsx(x,{children:r}),e.jsx(x,{children:f(a)}),e.jsx(x,{children:f(s)}),e.jsx(x,{children:f(n)}),e.jsx(x,{children:e.jsx(Ne,{color:d!=="draft"&&"error"||"success",children:d})}),e.jsx(x,{children:j}),e.jsx(x,{children:C}),e.jsx(x,{children:h}),e.jsx(x,{children:_})]})}se.propTypes={name:l.any,customer:l.any,create_date:l.any,amount_untaxed:l.any,amount_tax:l.any,amount_total:l.any,state:l.any,x_studio_notes:l.any,client_order_ref:l.any,ship_date:l.any,ship_tracking_number:l.any,handleClick:l.func};function ce({order:t,orderBy:o,headLabel:r,onRequestSort:a}){const s=n=>d=>{a(d,n)};return e.jsx(Re,{children:e.jsx(V,{children:r.map(n=>e.jsx(x,{align:n.align||"left",sortDirection:o===n.id?t:!1,sx:{width:n.width,minWidth:n.minWidth},children:e.jsxs(Ie,{hideSortIcon:!0,active:o===n.id,direction:o===n.id?t:"desc",onClick:s(n.id),children:[n.label,o===n.id?e.jsx(be,{sx:{...st},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},n.id))})})}ce.propTypes={order:l.oneOf(["asc","desc"]),orderBy:l.string,headLabel:l.array,onRequestSort:l.func};function le({emptyRows:t,height:o}){return t?e.jsx(V,{sx:{...o&&{height:o*t}},children:e.jsx(x,{colSpan:9})}):null}le.propTypes={emptyRows:l.number,height:l.number};function lt(t){return X("MuiFormControlLabel",t)}const it=Y("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),q=it,dt=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],ut=t=>{const{classes:o,disabled:r,labelPlacement:a,error:s,required:n}=t,d={root:["root",r&&"disabled",`labelPlacement${z(a)}`,s&&"error",n&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",s&&"error"]};return ee(d,lt,o)},pt=H("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[{[`& .${q.label}`]:o.label},o.root,o[`labelPlacement${z(r.labelPlacement)}`]]}})(({theme:t,ownerState:o})=>g({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${q.disabled}`]:{cursor:"default"}},o.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},o.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},o.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${q.label}`]:{[`&.${q.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),ht=H("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,o)=>o.asterisk})(({theme:t})=>({[`&.${q.error}`]:{color:(t.vars||t).palette.error.main}})),mt=i.forwardRef(function(o,r){var a,s;const n=re({props:o,name:"MuiFormControlLabel"}),{className:d,componentsProps:j={},control:C,disabled:h,disableTypography:_,label:m,labelPlacement:f="end",required:b,slotProps:w={}}=n,u=Z(n,dt),k=ne(),S=(a=h??C.props.disabled)!=null?a:k==null?void 0:k.disabled,P=b??C.props.required,N={disabled:S,required:P};["checked","name","onChange","value","inputRef"].forEach(T=>{typeof C.props[T]>"u"&&typeof n[T]<"u"&&(N[T]=n[T])});const O=xe({props:n,muiFormControl:k,states:["error"]}),F=g({},n,{disabled:S,labelPlacement:f,required:P,error:O.error}),v=ut(F),R=(s=w.typography)!=null?s:j.typography;let I=m;return I!=null&&I.type!==A&&!_&&(I=e.jsx(A,g({component:"span"},R,{className:W(v.label,R==null?void 0:R.className),children:I}))),e.jsxs(pt,g({className:W(v.root,d),ownerState:F,ref:r},u,{children:[i.cloneElement(C,N),P?e.jsxs(oe,{direction:"row",alignItems:"center",children:[I,e.jsxs(ht,{ownerState:F,"aria-hidden":!0,className:v.asterisk,children:[" ","*"]})]}):I]}))}),bt=mt;function ie({filterName:t,onFilterName:o,onClickSearch:r,onHitEnter:a,isPartnerSearch:s,onTogglePartnerSearch:n}){return e.jsx(fe,{sx:{height:96,display:"flex",justifyContent:"space-between",p:d=>d.spacing(0,1,0,3)},children:e.jsxs(oe,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(Oe,{value:t,onChange:o,onKeyDown:a,placeholder:s?"Search by partner...":"Search order...",endAdornment:e.jsx(ge,{position:"end",children:e.jsx(Ce,{onClick:r,edge:"end",children:e.jsx(ye,{icon:$e,style:{color:"text.disabled",width:20,height:20}})})})}),e.jsx(bt,{control:e.jsx(at,{checked:s,onChange:n,color:"primary"}),label:"Search by Partner"})]})})}ie.propTypes={filterName:l.string,onFilterName:l.func,onClickSearch:l.func,onHitEnter:l.func,isPartnerSearch:l.bool,onTogglePartnerSearch:l.func};function xt(){const t=je(),[o,r]=i.useState([]),[a,s]=i.useState(0),[n,d]=i.useState(0),[j,C]=i.useState("asc"),[h,_]=i.useState("name"),[m,f]=i.useState(""),[b,w]=i.useState(!1),[u,k]=i.useState(25),[S,P]=i.useState(0),N=i.useRef(o),O=i.useRef(u),F=i.useRef(a),v=i.useRef(m);i.useEffect(()=>{N.current=o,O.current=u,F.current=a,v.current=m,R(F.current,O.current,N.current,v.current,b)},[]);const R=(c,p,B,y,E)=>{console.log("Fetching Orders");const de=c+1;let D=`${_e.baseURL}/api-proxy/proxy?method=get&resource=orders&page=${de}&page_size=${p}`;y&&(D+=`&name=${y}`),E&&(D+=`&search_partner=${E}`),console.log(D),ke.get(D,{headers:{Authorization:`Bearer ${Pe.get("jwt")}`}}).then(M=>{console.log(M.data.data),r([...B,...M.data.data]),P(M.data.count)}).catch(M=>{console.error("Error fetching orders:",M)})},I=(c,p)=>{p!==""&&(C(h===p&&j==="asc"?"desc":"asc"),_(p))},T=(c,p)=>{s(p);const B=u*p;B>n&&(d(B),R(p,u,o,m,b))},K=c=>{s(0),k(parseInt(c.target.value,10))},$=c=>{f(c.target.value)},G=c=>{c.key==="Enter"&&U()},U=c=>{s(0),R(a,u,[],m,b)},J=(c,p)=>{t.push(`/orders/${p}`)},L=!o.length&&!!m;return e.jsxs(ze,{children:[e.jsx(oe,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(A,{variant:"h4",children:"Orders"})}),e.jsxs(Ee,{children:[e.jsx(ie,{filterName:m,onFilterName:$,onClickSearch:U,onHitEnter:G,isPartnerSearch:b,onTogglePartnerSearch:()=>w(!b)}),e.jsx(ve,{children:e.jsx(Te,{sx:{overflow:"unset"},children:e.jsxs(Fe,{sx:{minWidth:800},children:[e.jsx(ce,{order:j,orderBy:h,rowCount:o.length,onRequestSort:I,headLabel:[{id:"name",label:"Name"},{id:"customer",label:"Customer"},{id:"create_date",label:"Create Date"},{id:"amount_untaxed",label:"Amount Untaxed"},{id:"amount_tax",label:"Amount Tax"},{id:"amount_total",label:"Amount Total"},{id:"state",label:"State"},{id:"x_studio_notes",label:"Notes"},{id:"client_order_ref",label:"PO Number"},{id:"ship_date",label:"Ship Date"},{id:"ship_tracking_number",label:"Tracking #"}]}),e.jsxs(Be,{children:[o.slice(a*u,a*u+u).map(c=>e.jsx(se,{name:c.name,customer:c.customer_id.name,create_date:c.create_date,amount_untaxed:c.amount_untaxed,amount_tax:c.amount_tax,amount_total:c.amount_total,state:c.state,x_studio_notes:c.x_studio_notes,client_order_ref:c.client_order_ref,ship_date:c.ship_date,ship_tracking_number:c.ship_tracking_number,handleClick:p=>J(p,c.id)},c.id)),e.jsx(le,{height:77,emptyRows:ct(a,u,o.length)}),L&&e.jsx(ae,{query:m})]})]})})}),e.jsx(we,{page:a,component:"div",count:S,rowsPerPage:u,onPageChange:T,rowsPerPageOptions:[25],onRowsPerPageChange:K})]})]})}function vt(){return Me(),e.jsxs(e.Fragment,{children:[e.jsx(Se,{children:e.jsx("title",{children:" Order | BEX Sales "})}),e.jsx(xt,{})]})}export{vt as default};
