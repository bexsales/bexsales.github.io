import{g as Y,k as Z,h as A,G as me,_ as x,r as d,a as ee,H as re,j as e,b as U,l as N,f as te,J as oe,K as be,n as xe,i as ae,M as fe,T as q,S as D,N as ge,P as c,B as Ce,O as ye,I as je,C as ke,Q as ve,w as Pe,y as _e,z as Se,R as Re,A as Ie,W as Te}from"./index-BWowYoct.js";import{T as W,a as b,b as $e,c as Fe,s as Be,d as we,e as Le,f as Ne,g as Oe}from"./search-fill-fGETsUc3.js";import{L as ze}from"./label-DW-j9POg.js";import{u as Ee,O as Me,C as qe}from"./CircularProgress-BKlh67mL.js";import{C as Ae}from"./Container-BG1pNjcG.js";import{C as He}from"./Card-BkMS8EEI.js";import{u as Ue}from"./use-auth-IkTOTwnl.js";function De(t){return Y("PrivateSwitchBase",t)}Z("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const We=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Ve=t=>{const{classes:o,checked:s,disabled:a,edge:l}=t,n={root:["root",s&&"checked",a&&"disabled",l&&`edge${N(l)}`],input:["input"]};return te(n,De,o)},Ke=A(me)(({ownerState:t})=>x({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),Ge=A("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Je=d.forwardRef(function(o,s){const{autoFocus:a,checked:l,checkedIcon:n,className:u,defaultChecked:_,disabled:f,disableFocusRipple:m=!1,edge:S=!1,icon:R,id:C,inputProps:p,inputRef:T,name:g,onBlur:y,onChange:h,onFocus:j,readOnly:L,required:O=!1,tabIndex:F,type:k,value:$}=o,v=ee(o,We),[P,V]=Ee({controlled:l,default:!!_,name:"SwitchBase",state:"checked"}),I=re(),K=i=>{j&&j(i),I&&I.onFocus&&I.onFocus(i)},G=i=>{y&&y(i),I&&I.onBlur&&I.onBlur(i)},J=i=>{if(i.nativeEvent.defaultPrevented)return;const w=i.target.checked;V(w),h&&h(i,w)};let B=f;I&&typeof B>"u"&&(B=I.disabled);const Q=k==="checkbox"||k==="radio",z=x({},o,{checked:P,disabled:B,disableFocusRipple:m,edge:S}),r=Ve(z);return e.jsxs(Ke,x({component:"span",className:U(r.root,u),centerRipple:!0,focusRipple:!m,disabled:B,tabIndex:null,role:void 0,onFocus:K,onBlur:G,ownerState:z,ref:s},v,{children:[e.jsx(Ge,x({autoFocus:a,checked:l,defaultChecked:_,className:r.input,disabled:B,id:Q?C:void 0,name:g,onChange:J,readOnly:L,ref:T,required:O,ownerState:z,tabIndex:F,type:k},k==="checkbox"&&$===void 0?{}:{value:$},p)),P?n:R]}))}),Qe=Je,Xe=oe(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Ye=oe(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Ze=oe(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function et(t){return Y("MuiCheckbox",t)}const tt=Z("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),X=tt,ot=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],nt=t=>{const{classes:o,indeterminate:s,color:a,size:l}=t,n={root:["root",s&&"indeterminate",`color${N(a)}`,`size${N(l)}`]},u=te(n,et,o);return x({},o,u)},st=A(Qe,{shouldForwardProp:t=>be(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:s}=t;return[o.root,s.indeterminate&&o.indeterminate,s.color!=="default"&&o[`color${N(s.color)}`]]}})(({theme:t,ownerState:o})=>x({color:(t.vars||t).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${o.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:xe(o.color==="default"?t.palette.action.active:t.palette[o.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${X.checked}, &.${X.indeterminate}`]:{color:(t.vars||t).palette[o.color].main},[`&.${X.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),rt=e.jsx(Ye,{}),at=e.jsx(Xe,{}),ct=e.jsx(Ze,{}),lt=d.forwardRef(function(o,s){var a,l;const n=ae({props:o,name:"MuiCheckbox"}),{checkedIcon:u=rt,color:_="primary",icon:f=at,indeterminate:m=!1,indeterminateIcon:S=ct,inputProps:R,size:C="medium",className:p}=n,T=ee(n,ot),g=m?S:f,y=m?S:u,h=x({},n,{color:_,indeterminate:m,size:C}),j=nt(h);return e.jsx(st,x({type:"checkbox",inputProps:x({"data-indeterminate":m},R),icon:d.cloneElement(g,{fontSize:(a=g.props.fontSize)!=null?a:C}),checkedIcon:d.cloneElement(y,{fontSize:(l=y.props.fontSize)!=null?l:C}),ownerState:h,ref:s,className:U(j.root,p)},T,{classes:j}))}),ce=lt;function it(t){return Y("MuiFormControlLabel",t)}const dt=Z("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),M=dt,ut=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],ht=t=>{const{classes:o,disabled:s,labelPlacement:a,error:l,required:n}=t,u={root:["root",s&&"disabled",`labelPlacement${N(a)}`,l&&"error",n&&"required"],label:["label",s&&"disabled"],asterisk:["asterisk",l&&"error"]};return te(u,it,o)},pt=A("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:s}=t;return[{[`& .${M.label}`]:o.label},o.root,o[`labelPlacement${N(s.labelPlacement)}`]]}})(({theme:t,ownerState:o})=>x({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${M.disabled}`]:{cursor:"default"}},o.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},o.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},o.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${M.label}`]:{[`&.${M.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),mt=A("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,o)=>o.asterisk})(({theme:t})=>({[`&.${M.error}`]:{color:(t.vars||t).palette.error.main}})),bt=d.forwardRef(function(o,s){var a,l;const n=ae({props:o,name:"MuiFormControlLabel"}),{className:u,componentsProps:_={},control:f,disabled:m,disableTypography:S,label:R,labelPlacement:C="end",required:p,slotProps:T={}}=n,g=ee(n,ut),y=re(),h=(a=m??f.props.disabled)!=null?a:y==null?void 0:y.disabled,j=p??f.props.required,L={disabled:h,required:j};["checked","name","onChange","value","inputRef"].forEach(P=>{typeof f.props[P]>"u"&&typeof n[P]<"u"&&(L[P]=n[P])});const O=fe({props:n,muiFormControl:y,states:["error"]}),F=x({},n,{disabled:h,labelPlacement:C,required:j,error:O.error}),k=ht(F),$=(l=T.typography)!=null?l:_.typography;let v=R;return v!=null&&v.type!==q&&!S&&(v=e.jsx(q,x({component:"span"},$,{className:U(k.label,$==null?void 0:$.className),children:v}))),e.jsxs(pt,x({className:U(k.root,u),ownerState:F,ref:s},g,{children:[d.cloneElement(f,L),j?e.jsxs(D,{direction:"row",alignItems:"center",children:[v,e.jsxs(mt,{ownerState:F,"aria-hidden":!0,className:k.asterisk,children:[" ","*"]})]}):v]}))}),xt=bt,ft={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function gt(t,o,s){return t?Math.max(0,(1+t)*o-s):0}function le({query:t}){return e.jsx(W,{children:e.jsx(b,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(ge,{sx:{textAlign:"center"},children:[e.jsx(q,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(q,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}le.propTypes={query:c.string};function ie({name:t,customer:o,create_date:s,amount_untaxed:a,amount_tax:l,amount_total:n,state:u,invoiced:_,x_studio_notes:f,client_order_ref:m,ship_date:S,ship_tracking_number:R,handleClick:C}){const p=T=>`$${T.toFixed(2)}`;return e.jsxs(W,{hover:!0,tabIndex:-1,onClick:C,children:[e.jsx(b,{children:t}),e.jsx(b,{children:o}),e.jsx(b,{children:s}),e.jsx(b,{children:p(a)}),e.jsx(b,{children:p(l)}),e.jsx(b,{children:p(n)}),e.jsx(b,{children:e.jsx(ze,{color:u!=="draft"&&"error"||"success",children:u})}),e.jsx(b,{align:"center",children:e.jsx(ce,{checked:_,disabled:!0})}),e.jsx(b,{children:f}),e.jsx(b,{children:m}),e.jsx(b,{children:S}),e.jsx(b,{children:R})]})}ie.propTypes={name:c.any,customer:c.any,create_date:c.any,amount_untaxed:c.any,amount_tax:c.any,amount_total:c.any,state:c.any,invoiced:c.bool,x_studio_notes:c.any,client_order_ref:c.any,ship_date:c.any,ship_tracking_number:c.any,handleClick:c.func};function de({order:t,orderBy:o,headLabel:s,onRequestSort:a}){const l=n=>u=>{a(u,n)};return e.jsx($e,{children:e.jsx(W,{children:s.map(n=>e.jsx(b,{align:n.align||"left",sortDirection:o===n.id?t:!1,sx:{width:n.width,minWidth:n.minWidth},children:e.jsxs(Fe,{hideSortIcon:!0,active:o===n.id,direction:o===n.id?t:"desc",onClick:l(n.id),children:[n.label,o===n.id?e.jsx(Ce,{sx:{...ft},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},n.id))})})}de.propTypes={order:c.oneOf(["asc","desc"]),orderBy:c.string,headLabel:c.array,onRequestSort:c.func};function ue({emptyRows:t,height:o}){return t?e.jsx(W,{sx:{...o&&{height:o*t}},children:e.jsx(b,{colSpan:9})}):null}ue.propTypes={emptyRows:c.number,height:c.number};function he({filterName:t,onFilterName:o,onClickSearch:s,onHitEnter:a,isPartnerSearch:l,onTogglePartnerSearch:n}){return e.jsx(ye,{sx:{height:96,display:"flex",justifyContent:"space-between",p:u=>u.spacing(0,1,0,3)},children:e.jsxs(D,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(Me,{value:t,onChange:o,onKeyDown:a,placeholder:l?"Search by partner...":"Search order...",endAdornment:e.jsx(je,{position:"end",children:e.jsx(ke,{onClick:s,edge:"end",children:e.jsx(ve,{icon:Be,style:{color:"text.disabled",width:20,height:20}})})})}),e.jsx(xt,{control:e.jsx(ce,{checked:l,onChange:n,color:"primary"}),label:"Search by Partner"})]})})}he.propTypes={filterName:c.string,onFilterName:c.func,onClickSearch:c.func,onHitEnter:c.func,isPartnerSearch:c.bool,onTogglePartnerSearch:c.func};function Ct(){const t=Pe(),[o,s]=d.useState(!1),[a,l]=d.useState([]),[n,u]=d.useState(0),[_,f]=d.useState(0),[m,S]=d.useState("asc"),[R,C]=d.useState("name"),[p,T]=d.useState(""),[g,y]=d.useState(!1),[h,j]=d.useState(25),[L,O]=d.useState(0),F=d.useRef(a),k=d.useRef(h),$=d.useRef(n),v=d.useRef(p);d.useEffect(()=>{F.current=a,k.current=h,$.current=n,v.current=p,P($.current,k.current,F.current,v.current,g)},[]);const P=(r,i,w,ne,se)=>{console.log("Fetching Orders"),s(!0);const pe=r+1;let H=`${Ie.baseURL}/api-proxy/proxy?method=get&resource=orders&page=${pe}&page_size=${i}`;ne&&(H+=`&name=${ne}`),se&&(H+=`&search_partner=${se}`),console.log(H),_e.get(H,{headers:{Authorization:`Bearer ${Se.get("jwt")}`}}).then(E=>{console.log(E.data.data),l([...w,...E.data.data]),O(E.data.count)}).catch(E=>{console.error("Error fetching orders:",E)}).finally(()=>{s(!1)})},V=(r,i)=>{i!==""&&(S(R===i&&m==="asc"?"desc":"asc"),C(i))},I=(r,i)=>{u(i);const w=h*i;window.scrollTo({top:0,behavior:"smooth"}),w>_&&(f(w),P(i,h,a,p,g))},K=r=>{u(0),j(parseInt(r.target.value,10))},G=r=>{T(r.target.value)},J=r=>{r.key==="Enter"&&B()},B=r=>{u(0),P(n,h,[],p,g)},Q=(r,i)=>{t.push(`/orders/${i}`)},z=!a.length&&!!p;return e.jsxs(e.Fragment,{children:[o&&e.jsx(D,{sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",bgcolor:"rgba(255, 255, 255, 0.6)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(qe,{})}),e.jsxs(Ae,{children:[e.jsx(D,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(q,{variant:"h4",children:"Orders"})}),e.jsxs(He,{children:[e.jsx(he,{filterName:p,onFilterName:G,onClickSearch:B,onHitEnter:J,isPartnerSearch:g,onTogglePartnerSearch:()=>y(!g)}),e.jsx(Re,{children:e.jsx(we,{sx:{overflow:"unset"},children:e.jsxs(Le,{sx:{minWidth:800},children:[e.jsx(de,{order:m,orderBy:R,rowCount:a.length,onRequestSort:V,headLabel:[{id:"name",label:"Name"},{id:"customer",label:"Customer"},{id:"create_date",label:"Create Date"},{id:"amount_untaxed",label:"Amount Untaxed"},{id:"amount_tax",label:"Amount Tax"},{id:"amount_total",label:"Amount Total"},{id:"state",label:"State"},{id:"invoiced",label:"Invoiced"},{id:"x_studio_notes",label:"Notes"},{id:"client_order_ref",label:"PO Number"},{id:"ship_date",label:"Ship Date"},{id:"ship_tracking_number",label:"Tracking #"}]}),e.jsxs(Ne,{children:[a.slice(n*h,n*h+h).map(r=>e.jsx(ie,{name:r.name,customer:r.customer_id.name,create_date:r.create_date,amount_untaxed:r.amount_untaxed,amount_tax:r.amount_tax,amount_total:r.amount_total,state:r.state,invoiced:r.account_move_count>0,x_studio_notes:r.x_studio_notes,client_order_ref:r.client_order_ref,ship_date:r.ship_date,ship_tracking_number:r.ship_tracking_number,handleClick:i=>Q(i,r.id)},r.id)),e.jsx(ue,{height:77,emptyRows:gt(n,h,a.length)}),z&&e.jsx(le,{query:p})]})]})})}),e.jsx(Oe,{page:n,component:"div",count:L,rowsPerPage:h,onPageChange:I,rowsPerPageOptions:[25],onRowsPerPageChange:K})]})]})]})}function Rt(){return Ue(),e.jsxs(e.Fragment,{children:[e.jsx(Te,{children:e.jsx("title",{children:" Order | BEX Sales "})}),e.jsx(Ct,{})]})}export{Rt as default};
