import{j as e,V as K,T as _,P as t,B as Q,X,I as Y,H as Z,Y as J,r as c,E as ee,F as te,G as ne,S as ae,Z as se}from"./index-BiFuz3rn.js";import{T,a as d,b as re,c as oe,d as ie,e as ce,f as le,g as de,h as ue}from"./search-fill-CroszyQg.js";import{C as pe}from"./Chip-mcDs6DVW.js";import{O as he}from"./Select-BSvtViZa.js";import{C as xe}from"./Container-DbbtiuI8.js";import{C as ge}from"./Card-rz0eWA_E.js";const fe={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function be(s,r,o){return s?Math.max(0,(1+s)*r-o):0}function q({query:s}){return e.jsx(T,{children:e.jsx(d,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(K,{sx:{textAlign:"center"},children:[e.jsx(_,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(_,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',s,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}q.propTypes={query:t.string};function F({emptyRows:s,height:r}){return s?e.jsx(T,{sx:{...r&&{height:r*s}},children:e.jsx(d,{colSpan:9})}):null}F.propTypes={emptyRows:t.number,height:t.number};function O({id:s,default_code:r,name:o,category:h,type:i,lst_price:a,description_sale:x,attributes:b,virtual_available:m,qty_available:y,onSelect:j}){const P=l=>`$${l.toFixed(2)}`;return e.jsxs(T,{hover:!0,tabIndex:-1,onClick:()=>j({id:s,default_code:r,name:o,category:h,type:i,lst_price:a,description_sale:x,attributes:b,virtual_available:m,qty_available:y}),children:[e.jsx(d,{children:r}),e.jsx(d,{children:o}),e.jsx(d,{children:h}),e.jsx(d,{children:i}),e.jsx(d,{children:P(a)}),e.jsx(d,{children:x}),e.jsx(d,{children:b.map((l,S)=>e.jsx(pe,{label:l.name,variant:"outlined"},S))}),e.jsx(d,{children:y})]})}O.propTypes={id:t.any,default_code:t.any,name:t.any,category:t.any,type:t.any,lst_price:t.any,description_sale:t.any,attributes:t.arrayOf(t.string),virtual_available:t.any,qty_available:t.any,onSelect:t.func};function A({order:s,orderBy:r,headLabel:o,onRequestSort:h}){const i=a=>x=>{h(x,a)};return e.jsx(re,{children:e.jsx(T,{children:o.map(a=>e.jsx(d,{align:a.align||"left",sortDirection:r===a.id?s:!1,sx:{width:a.width,minWidth:a.minWidth},children:e.jsxs(oe,{hideSortIcon:!0,active:r===a.id,direction:r===a.id?s:"desc",onClick:i(a.id),children:[a.label,r===a.id?e.jsx(Q,{sx:{...fe},children:s==="desc"?"sorted descending":"sorted ascending"}):null]})},a.id))})})}A.propTypes={order:t.oneOf(["asc","desc"]),orderBy:t.string,headLabel:t.array,onRequestSort:t.func};function H({filterName:s,onFilterName:r,onClickSearch:o,onHitEnter:h}){return e.jsx(X,{sx:{height:96,display:"flex",justifyContent:"space-between",p:i=>i.spacing(0,1,0,3)},children:e.jsx(he,{value:s,onChange:r,onKeyDown:h,placeholder:"Search product...",endAdornment:e.jsx(Y,{position:"end",children:e.jsx(Z,{onClick:o,edge:"end",children:e.jsx(J,{icon:ie,sx:{color:"text.disabled",width:20,height:20}})})})})})}H.propTypes={filterName:t.string,onFilterName:t.func,onClickSearch:t.func,onHitEnter:t.func};function me({showTitle:s,onSelect:r}){const[o,h]=c.useState([]),[i,a]=c.useState(0),[x,b]=c.useState(0),[m,y]=c.useState("asc"),[j,P]=c.useState("name"),[l,S]=c.useState(""),[u,$]=c.useState(25),[B,D]=c.useState(0),C=c.useRef(o),w=c.useRef(u),N=c.useRef(i),E=c.useRef(l);c.useEffect(()=>{C.current=o,w.current=u,N.current=i,E.current=l,v(N.current,w.current,C.current,E.current)},[]);const v=(n,p,g,I)=>{console.log("Fetching Products");const G=n+1;let R=`${ee.baseURL}/api-proxy/proxy?method=get&resource=products&page=${G}&page_size=${p}`;I&&(R+=`&name=${I}`),console.log(R),te.get(R,{headers:{Authorization:`Bearer ${ne.get("jwt")}`}}).then(f=>{console.log(f.data.data),h([...g,...f.data.data]),D(f.data.count)}).catch(f=>{console.error("Error fetching products:",f)})},L=(n,p)=>{p!==""&&(y(j===p&&m==="asc"?"desc":"asc"),P(p))},z=(n,p)=>{a(p);const g=u*p;g>x&&(b(g),v(p,u,o,l))},W=n=>{a(0),$(parseInt(n.target.value,10))},M=n=>{S(n.target.value)},U=n=>{n.key==="Enter"&&k()},k=n=>{a(0),v(i,u,[],l)},V=!o.length&&!!l;return e.jsxs(xe,{children:[s&&e.jsx(ae,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(_,{variant:"h4",children:"Products"})}),e.jsxs(ge,{children:[e.jsx(H,{filterName:l,onFilterName:M,onClickSearch:k,onHitEnter:U}),e.jsx(se,{children:e.jsx(ce,{sx:{overflow:"unset"},children:e.jsxs(le,{sx:{minWidth:800},children:[e.jsx(A,{order:m,orderBy:j,rowCount:o.length,onRequestSort:L,headLabel:[{id:"default_code",label:"Default Code"},{id:"name",label:"Name"},{id:"category",label:"Category"},{id:"type",label:"Type"},{id:"lst_price",label:"Sale Price"},{id:"description_sale",label:"Description"},{id:"attributes",label:"Attributes"},{id:"qty_available",label:"Quantity on Hand"}]}),e.jsxs(de,{children:[o.slice(i*u,i*u+u).map(n=>e.jsx(O,{id:n.id,default_code:n.default_code,name:n.name,category:n.categ_id.name,type:n.type,lst_price:n.lst_price,description_sale:n.description_sale,attributes:n.product_template_attribute_value_ids,virtual_available:n.virtual_available,qty_available:n.qty_available,onSelect:r},n.id)),e.jsx(F,{height:77,emptyRows:be(i,u,o.length)}),V&&e.jsx(q,{query:l})]})]})})}),e.jsx(ue,{page:i,component:"div",count:B,rowsPerPage:u,onPageChange:z,rowsPerPageOptions:[25],onRowsPerPageChange:W})]})]})}me.propTypes={showTitle:t.bool,onSelect:t.func};export{me as P};
