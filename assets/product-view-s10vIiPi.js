import{j as e,G as J,T as S,P as t,B as V,H as Q,I as X,y as Y,J as Z,r as i,C as ee,F as te,S as ne,K as se,E as re}from"./index-Br3zQ_dX.js";import{T as j,a as u,b as oe,c as ae,s as ce,d as ie,e as le,f as de,g as ue}from"./search-fill-B5x2dEDj.js";import{O as pe}from"./Select-D3cNMV0p.js";import{C as he}from"./Container-CJV_QVWt.js";import{C as xe}from"./Card-BVfvgfX2.js";const ge={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function fe(r,o,a){return r?Math.max(0,(1+r)*o-a):0}function k({query:r}){return e.jsx(j,{children:e.jsx(u,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(J,{sx:{textAlign:"center"},children:[e.jsx(S,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(S,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',r,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}k.propTypes={query:t.string};function F({emptyRows:r,height:o}){return r?e.jsx(j,{sx:{...o&&{height:o*r}},children:e.jsx(u,{colSpan:9})}):null}F.propTypes={emptyRows:t.number,height:t.number};function I({id:r,default_code:o,name:a,category:p,type:c,lst_price:n,description_sale:x,onSelect:y}){const m=b=>`$${b.toFixed(2)}`;return e.jsxs(j,{hover:!0,tabIndex:-1,onClick:()=>y({id:r,default_code:o,name:a,category:p,type:c,lst_price:n,description_sale:x}),children:[e.jsx(u,{children:o}),e.jsx(u,{children:a}),e.jsx(u,{children:p}),e.jsx(u,{children:c}),e.jsx(u,{children:m(n)}),e.jsx(u,{children:x})]})}I.propTypes={id:t.any,default_code:t.any,name:t.any,category:t.any,type:t.any,lst_price:t.any,description_sale:t.any,onSelect:t.func};function O({order:r,orderBy:o,headLabel:a,onRequestSort:p}){const c=n=>x=>{p(x,n)};return e.jsx(oe,{children:e.jsx(j,{children:a.map(n=>e.jsx(u,{align:n.align||"left",sortDirection:o===n.id?r:!1,sx:{width:n.width,minWidth:n.minWidth},children:e.jsxs(ae,{hideSortIcon:!0,active:o===n.id,direction:o===n.id?r:"desc",onClick:c(n.id),children:[n.label,o===n.id?e.jsx(V,{sx:{...ge},children:r==="desc"?"sorted descending":"sorted ascending"}):null]})},n.id))})})}O.propTypes={order:t.oneOf(["asc","desc"]),orderBy:t.string,headLabel:t.array,onRequestSort:t.func};function $({filterName:r,onFilterName:o,onClickSearch:a,onHitEnter:p}){return e.jsx(Q,{sx:{height:96,display:"flex",justifyContent:"space-between",p:c=>c.spacing(0,1,0,3)},children:e.jsx(pe,{value:r,onChange:o,onKeyDown:p,placeholder:"Search product...",endAdornment:e.jsx(X,{position:"end",children:e.jsx(Y,{onClick:a,edge:"end",children:e.jsx(Z,{icon:ce,sx:{color:"text.disabled",width:20,height:20}})})})})})}$.propTypes={filterName:t.string,onFilterName:t.func,onClickSearch:t.func,onHitEnter:t.func};function me({showTitle:r,onSelect:o}){const[a,p]=i.useState([]),[c,n]=i.useState(0),[x,y]=i.useState(0),[m,b]=i.useState("asc"),[R,A]=i.useState("name"),[h,B]=i.useState(""),[l,D]=i.useState(25),[H,q]=i.useState(0),w=i.useRef(a),C=i.useRef(l),v=i.useRef(c),N=i.useRef(h);i.useEffect(()=>{w.current=a,C.current=l,v.current=c,N.current=h,T(v.current,C.current,w.current,N.current)},[]);const T=(s,d,g,E)=>{console.log("Fetching Products");const G=s+1;let P=`${re.baseURL}/api-proxy/proxy?method=get&resource=products&page=${G}&page_size=${d}`;E&&(P+=`&name=${E}`),console.log(P),ee.get(P,{headers:{Authorization:`Bearer ${te.get("jwt")}`}}).then(f=>{console.log(f.data.data),p([...g,...f.data.data]),q(f.data.count)}).catch(f=>{console.error("Error fetching products:",f)})},L=(s,d)=>{d!==""&&(b(R===d&&m==="asc"?"desc":"asc"),A(d))},z=(s,d)=>{n(d);const g=l*d;g>x&&(y(g),T(d,l,a,h))},W=s=>{n(0),D(parseInt(s.target.value,10))},K=s=>{B(s.target.value)},M=s=>{s.key==="Enter"&&_()},_=s=>{n(0),T(c,l,[],h)},U=!a.length&&!!h;return e.jsxs(he,{children:[r&&e.jsx(ne,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(S,{variant:"h4",children:"Products"})}),e.jsxs(xe,{children:[e.jsx($,{filterName:h,onFilterName:K,onClickSearch:_,onHitEnter:M}),e.jsx(se,{children:e.jsx(ie,{sx:{overflow:"unset"},children:e.jsxs(le,{sx:{minWidth:800},children:[e.jsx(O,{order:m,orderBy:R,rowCount:a.length,onRequestSort:L,headLabel:[{id:"default_code",label:"Default Code"},{id:"name",label:"Name"},{id:"category",label:"Category"},{id:"type",label:"Type"},{id:"lst_price",label:"Sale Price"},{id:"description_sale",label:"Description"}]}),e.jsxs(de,{children:[a.slice(c*l,c*l+l).map(s=>e.jsx(I,{id:s.id,default_code:s.default_code,name:s.name,category:s.categ_id.name,type:s.type,lst_price:s.lst_price,description_sale:s.description_sale,onSelect:o},s.id)),e.jsx(F,{height:77,emptyRows:fe(c,l,a.length)}),U&&e.jsx(k,{query:h})]})]})})}),e.jsx(ue,{page:c,component:"div",count:H,rowsPerPage:l,onPageChange:z,rowsPerPageOptions:[25],onRowsPerPageChange:W})]})]})}me.propTypes={showTitle:t.bool,onSelect:t.func};export{me as P};
