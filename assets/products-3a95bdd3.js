import{j as e,H as J,T as S,P as s,B as V,J as Q,I as X,y as Y,K as Z,w as ee,r as i,E as te,G as ne,S as se,M as re,F as ae,W as oe}from"./index-c2df3293.js";import{T as b,a as l,b as ce,c as ie,s as de,d as le,e as ue,f as pe,g as he}from"./search-fill-c586e2ad.js";import{O as xe}from"./Select-4b09cfb8.js";import{C as ge}from"./Container-0742a46a.js";import{C as fe}from"./Card-cafcfd6c.js";import{u as me}from"./use-auth-8e16ffd7.js";const je={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function ye(r,t,u){return r?Math.max(0,(1+r)*t-u):0}function N({query:r}){return e.jsx(b,{children:e.jsx(l,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(J,{sx:{textAlign:"center"},children:[e.jsx(S,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(S,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',r,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}N.propTypes={query:s.string};function E({default_code:r,name:t,category:u,type:o,standard_price:p,lst_price:a,description_sale:x,handleClick:m}){const j=y=>`$${y.toFixed(2)}`;return e.jsxs(b,{hover:!0,tabIndex:-1,onClick:m,children:[e.jsx(l,{children:r}),e.jsx(l,{children:t}),e.jsx(l,{children:u}),e.jsx(l,{children:o}),e.jsx(l,{children:j(p)}),e.jsx(l,{children:j(a)}),e.jsx(l,{children:x})]})}E.propTypes={default_code:s.any,name:s.any,category:s.any,type:s.any,standard_price:s.any,lst_price:s.any,description_sale:s.any,handleClick:s.func};function F({emptyRows:r,height:t}){return r?e.jsx(b,{sx:{...t&&{height:t*r}},children:e.jsx(l,{colSpan:9})}):null}F.propTypes={emptyRows:s.number,height:s.number};function I({order:r,orderBy:t,headLabel:u,onRequestSort:o}){const p=a=>x=>{o(x,a)};return e.jsx(ce,{children:e.jsx(b,{children:u.map(a=>e.jsx(l,{align:a.align||"left",sortDirection:t===a.id?r:!1,sx:{width:a.width,minWidth:a.minWidth},children:e.jsxs(ie,{hideSortIcon:!0,active:t===a.id,direction:t===a.id?r:"desc",onClick:p(a.id),children:[a.label,t===a.id?e.jsx(V,{sx:{...je},children:r==="desc"?"sorted descending":"sorted ascending"}):null]})},a.id))})})}I.propTypes={order:s.oneOf(["asc","desc"]),orderBy:s.string,headLabel:s.array,onRequestSort:s.func};function $({filterName:r,onFilterName:t,onClickSearch:u,onHitEnter:o}){return e.jsx(Q,{sx:{height:96,display:"flex",justifyContent:"space-between",p:p=>p.spacing(0,1,0,3)},children:e.jsx(xe,{value:r,onChange:t,onKeyDown:o,placeholder:"Search product...",endAdornment:e.jsx(X,{position:"end",children:e.jsx(Y,{onClick:u,edge:"end",children:e.jsx(Z,{icon:de,sx:{color:"text.disabled",width:20,height:20}})})})})})}$.propTypes={filterName:s.string,onFilterName:s.func,onClickSearch:s.func,onHitEnter:s.func};function be(){const r=ee(),[t,u]=i.useState([]),[o,p]=i.useState(0),[a,x]=i.useState(0),[m,j]=i.useState("asc"),[y,A]=i.useState("name"),[h,O]=i.useState(""),[d,B]=i.useState(25),[D,H]=i.useState(0),R=i.useRef(t),w=i.useRef(d),C=i.useRef(o),_=i.useRef(h);i.useEffect(()=>{R.current=t,w.current=d,C.current=o,_.current=h,P(C.current,w.current,R.current,_.current)},[]);const P=(n,c,g,k)=>{console.log("Fetching Products");const G=n+1;let T=`${ae.baseURL}/api-proxy/proxy?method=get&resource=products&page=${G}&page_size=${c}`;k&&(T+=`&name=${k}`),console.log(T),te.get(T,{headers:{Authorization:`Bearer ${ne.get("jwt")}`}}).then(f=>{console.log(f.data.data),u([...g,...f.data.data]),H(f.data.count)}).catch(f=>{console.error("Error fetching products:",f)})},q=(n,c)=>{c!==""&&(j(y===c&&m==="asc"?"desc":"asc"),A(c))},L=(n,c)=>{p(c);const g=d*c;g>a&&(x(g),P(c,d,t,h))},M=n=>{p(0),B(parseInt(n.target.value,10))},W=n=>{O(n.target.value)},z=n=>{n.key==="Enter"&&v()},v=n=>{p(0),P(o,d,[],h)},U=(n,c)=>{r.push(`/products/${c}`)},K=!t.length&&!!h;return e.jsxs(ge,{children:[e.jsx(se,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(S,{variant:"h4",children:"Products"})}),e.jsxs(fe,{children:[e.jsx($,{filterName:h,onFilterName:W,onClickSearch:v,onHitEnter:z}),e.jsx(re,{children:e.jsx(le,{sx:{overflow:"unset"},children:e.jsxs(ue,{sx:{minWidth:800},children:[e.jsx(I,{order:m,orderBy:y,rowCount:t.length,onRequestSort:q,headLabel:[{id:"default_code",label:"Default Code"},{id:"name",label:"Name"},{id:"category",label:"Category"},{id:"type",label:"Type"},{id:"standard_price",label:"Standard Price"},{id:"lst_price",label:"List Price"},{id:"description_sale",label:"Description"}]}),e.jsxs(pe,{children:[t.slice(o*d,o*d+d).map(n=>e.jsx(E,{default_code:n.default_code,name:n.name,category:n.categ_id.name,type:n.type,standard_price:n.standard_price,lst_price:n.lst_price,description_sale:n.description_sale,handleClick:c=>U(c,n.id)},n.id)),e.jsx(F,{height:77,emptyRows:ye(o,d,t.length)}),K&&e.jsx(N,{query:h})]})]})})}),e.jsx(he,{page:o,component:"div",count:D,rowsPerPage:d,onPageChange:L,rowsPerPageOptions:[25],onRowsPerPageChange:M})]})]})}function _e(){return me(),e.jsxs(e.Fragment,{children:[e.jsx(oe,{children:e.jsx("title",{children:" Products | Minimal UI "})}),e.jsx(be,{})]})}export{_e as default};
