import{g as Qe,k as Ge,r as i,i as Ze,a as Ke,j as e,h as Xe,_ as ye,c as Je,d as Ye,T as m,R as et,V as fe,P as l,S as P,H as I,J as de,D as b,B as tt,X as nt,I as ot,Y as be,E as Z,F as K,G as X,Z as rt,$ as st,W as at}from"./index-BiFuz3rn.js";import{T as M,a as h,b as ve,c as it,d as lt,e as Ce,f as _e,g as Se,h as ct}from"./search-fill-CroszyQg.js";import{L as dt}from"./label-ClEEvr3c.js";import{D as q,a as A,b as F,c as L,P as ut}from"./product-template-view-Ds6GB-xq.js";import{O as ht}from"./Select-BSvtViZa.js";import{C as Te}from"./Container-DbbtiuI8.js";import{C as Oe}from"./Card-rz0eWA_E.js";import{F as J,T as G}from"./TextField-CEWYcRfQ.js";import{C as Pe}from"./customer-view-CKq2pkbK.js";import{P as xt}from"./product-view-aMh5q7P1.js";import{C as ge}from"./Chip-mcDs6DVW.js";import{G as ce}from"./Grid-Cc_kYYsE.js";import{L as pt}from"./LoadingButton-CQpwfGuh.js";import{u as mt}from"./use-auth-aK2ox_U1.js";import"./isMuiElement-s2B93Rdk.js";function jt(n){return Qe("MuiDialogContentText",n)}Ge("MuiDialogContentText",["root"]);const gt=["children","className"],yt=n=>{const{classes:o}=n,d=Ye({root:["root"]},jt,o);return ye({},o,d)},ft=Xe(m,{shouldForwardProp:n=>et(n)||n==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(n,o)=>o.root})({}),pe=i.forwardRef(function(o,r){const d=Ze({props:o,name:"MuiDialogContentText"}),{className:s}=d,a=Ke(d,gt),j=yt(a);return e.jsx(ft,ye({component:"p",variant:"body1",color:"text.secondary",ref:r,ownerState:a,className:Je(j.root,s)},d,{classes:j}))}),bt={width:24,height:24,body:'<g id="evaCopyOutline0"><g id="evaCopyOutline1"><g id="evaCopyOutline2" fill="currentColor"><path d="M18 21h-6a3 3 0 0 1-3-3v-6a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3v6a3 3 0 0 1-3 3Zm-6-10a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-6a1 1 0 0 0-1-1Z"/><path d="M9.73 15H5.67A2.68 2.68 0 0 1 3 12.33V5.67A2.68 2.68 0 0 1 5.67 3h6.66A2.68 2.68 0 0 1 15 5.67V9.4h-2V5.67a.67.67 0 0 0-.67-.67H5.67a.67.67 0 0 0-.67.67v6.66a.67.67 0 0 0 .67.67h4.06Z"/></g></g></g>'},vt={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function Ct(n,o,r){return n?Math.max(0,(1+n)*o-r):0}function we({query:n}){return e.jsx(M,{children:e.jsx(h,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(fe,{sx:{textAlign:"center"},children:[e.jsx(m,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(m,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}we.propTypes={query:l.string};function Ie({emptyRows:n,height:o}){return n?e.jsx(M,{sx:{...o&&{height:o*n}},children:e.jsx(h,{colSpan:9})}):null}Ie.propTypes={emptyRows:l.number,height:l.number};function ke({handleSendInvoice:n,partner:o,invoiceName:r,invoiceId:d,customerEmail:s}){const[a,j]=i.useState(!1),p=()=>{j(!0)},O=()=>{j(!1)},y=async()=>{await n(d)===!0&&O()};return e.jsxs(P,{direction:"row",alignItems:"center",children:[e.jsx(P,{direction:"column",alignItems:"center",spacing:1,children:e.jsx(I,{onClick:p,sx:{color:"blue",backgroundColor:"#fff","&:hover":{backgroundColor:"#bbf"}},children:e.jsx(de,{icon:"mdi:send"})})}),e.jsxs(q,{open:a,onClose:O,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(A,{id:"alert-dialog-title",children:"Confirm Send"}),e.jsx(F,{children:e.jsxs(pe,{id:"alert-dialog-description",children:["Are you sure you want to send this invoice ",e.jsxs("b",{children:["[",r,"]"]})," to ",e.jsxs("b",{children:[o," [",s,"]"]}),"?"]})}),e.jsxs(L,{children:[e.jsx(b,{onClick:O,color:"primary",children:"Cancel"}),e.jsx(b,{onClick:y,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}ke.propTypes={handleSendInvoice:l.func,partner:l.any,invoiceName:l.any,invoiceId:l.any,customerEmail:l.any};function De({id:n,name:o,payment_state:r,customer:d,customer_email:s,create_date:a,amount_untaxed:j,amount_tax:p,amount_total:O,state:y,invoice_origin:k,invoice_date:C,handleSendInvoice:_}){const D=S=>`$${S.toFixed(2)}`;return e.jsxs(M,{hover:!0,tabIndex:-1,children:[e.jsx(h,{children:y==="posted"&&r==="not_paid"&&s&&e.jsx(ke,{handleSendInvoice:_,partner:d,invoiceName:o,invoiceId:n,customerEmail:s})}),e.jsx(h,{children:o}),e.jsx(h,{children:r}),e.jsx(h,{children:d}),e.jsx(h,{children:s}),e.jsx(h,{children:a}),e.jsx(h,{children:D(j)}),e.jsx(h,{children:D(p)}),e.jsx(h,{children:D(O)}),e.jsx(h,{children:e.jsx(dt,{color:y!=="draft"&&"error"||"success",children:y})}),e.jsx(h,{children:k}),e.jsx(h,{children:C})]})}De.propTypes={id:l.any,name:l.any,payment_state:l.any,customer:l.any,customer_email:l.any,create_date:l.any,amount_untaxed:l.any,amount_tax:l.any,amount_total:l.any,state:l.any,invoice_origin:l.any,invoice_date:l.any,handleSendInvoice:l.func};function Re({order:n,orderBy:o,headLabel:r,onRequestSort:d}){const s=a=>j=>{d(j,a)};return e.jsx(ve,{children:e.jsx(M,{children:r.map(a=>e.jsx(h,{align:a.align||"left",sortDirection:o===a.id?n:!1,sx:{width:a.width,minWidth:a.minWidth},children:e.jsxs(it,{hideSortIcon:!0,active:o===a.id,direction:o===a.id?n:"desc",onClick:s(a.id),children:[a.label,o===a.id?e.jsx(tt,{sx:{...vt},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},a.id))})})}Re.propTypes={order:l.oneOf(["asc","desc"]),orderBy:l.string,headLabel:l.array,onRequestSort:l.func};function qe({filterName:n,onFilterName:o,onClickSearch:r,onHitEnter:d}){return e.jsx(nt,{sx:{height:96,display:"flex",justifyContent:"space-between",p:s=>s.spacing(0,1,0,3)},children:e.jsx(ht,{value:n,onChange:o,onKeyDown:d,placeholder:"Search invoice...",endAdornment:e.jsx(ot,{position:"end",children:e.jsx(I,{onClick:r,edge:"end",children:e.jsx(be,{icon:lt,sx:{color:"text.disabled",width:20,height:20}})})})})})}qe.propTypes={filterName:l.string,onFilterName:l.func,onClickSearch:l.func,onHitEnter:l.func};function Ae({invoiceOrigin:n}){const o=n,[r,d]=i.useState([]),[s,a]=i.useState(0),[j,p]=i.useState(0),[O,y]=i.useState("asc"),[k,C]=i.useState("name"),[_,D]=i.useState(""),[S,Y]=i.useState(25),[ue,he]=i.useState(0),U=i.useRef(r),ee=i.useRef(S),z=i.useRef(s),te=i.useRef(_);i.useEffect(()=>{U.current=r,ee.current=S,z.current=s,te.current=_,B(z.current,ee.current,U.current,te.current,o)},[]);const B=(u,f,w,E,N)=>{console.log("Fetching Invoices");const H=u+1;let $=`${Z.baseURL}/api-proxy/proxy?method=get&resource=invoices&page=${H}&page_size=${f}`;E&&($+=`&name=${E}`),N&&($+=`&invoice_origin=${N}`),console.log($),K.get($,{headers:{Authorization:`Bearer ${X.get("jwt")}`}}).then(W=>{console.log(W.data.data),d([...w,...W.data.data]),he(W.data.count)}).catch(W=>{console.error("Error fetching invoices:",W)})},ne=(u,f)=>{f!==""&&(y(k===f&&O==="asc"?"desc":"asc"),C(f))},oe=(u,f)=>{a(f);const w=S*f;w>j&&(p(w),B(f,S,r,_,o))},re=u=>{a(0),Y(parseInt(u.target.value,10))},se=u=>{D(u.target.value)},V=u=>{u.key==="Enter"&&ae()},ae=u=>{a(0),B(s,S,[],_)},ie=async u=>{try{console.log("Sending Invoice");const w=`${Z.baseURL}/api-proxy/proxy?method=post&resource=send-invoices`;console.log(w);const E={invoice:{id:parseInt(u,10)}};console.log("Request body",E);const N=await K.post(w,E,{headers:{Authorization:`Bearer ${X.get("jwt")}`}});return console.log(N.data),N.data.success===!1?(alert("Invoice failed to send!"),!1):(alert("Invoice Sent!"),!0)}catch(f){return console.error("Error sending invoice:",f),alert("Error sending invoice!"),!1}},xe=!r.length&&!!_;return e.jsx(Te,{children:e.jsxs(Oe,{children:[e.jsx(qe,{filterName:_,onFilterName:se,onClickSearch:ae,onHitEnter:V}),e.jsx(rt,{children:e.jsx(Ce,{sx:{overflow:"unset"},children:e.jsxs(_e,{sx:{minWidth:800},children:[e.jsx(Re,{order:O,orderBy:k,rowCount:r.length,onRequestSort:ne,headLabel:[{id:"email_action",label:""},{id:"name",label:"Name"},{id:"payment_state",label:"Payment State"},{id:"customer",label:"Customer"},{id:"customer_email",label:"Email"},{id:"create_date",label:"Create Date"},{id:"amount_untaxed",label:"Amount Untaxed"},{id:"amount_tax",label:"Amount Tax"},{id:"amount_total",label:"Amount Total"},{id:"state",label:"State"},{id:"invoice_origin",label:"Order"},{id:"invoice_Date",label:"Invoice Date"}]}),e.jsxs(Se,{children:[r.slice(s*S,s*S+S).map(u=>e.jsx(De,{id:u.id,name:u.name,payment_state:u.payment_state,customer:u.customer_id.name,customer_email:u.customer_id.email,create_date:u.create_date,amount_untaxed:u.amount_untaxed,amount_tax:u.amount_tax,amount_total:u.amount_total,state:u.state,invoice_origin:u.invoice_origin,invoice_date:u.invoice_date,handleSendInvoice:f=>ie(f,u.id)},u.id)),e.jsx(Ie,{height:77,emptyRows:Ct(s,S,r.length)}),xe&&e.jsx(we,{query:_})]})]})})}),e.jsx(ct,{page:s,component:"div",count:ue,rowsPerPage:S,onPageChange:oe,rowsPerPageOptions:[25],onRowsPerPageChange:re})]})})}Ae.propTypes={invoiceOrigin:l.string};function Fe({invoiceOrigin:n}){const[o,r]=i.useState(!1),d=()=>{r(!0)},s=()=>{r(!1)};return e.jsxs("div",{children:[e.jsx(b,{variant:"outlined",onClick:d,children:"Invoices"}),e.jsxs(q,{open:o,onClose:s,maxWidth:"xl",fullWidth:!0,children:[e.jsx(A,{children:"Invoices"}),e.jsx(F,{children:e.jsx(J,{sx:{width:"100%"},children:e.jsx(Ae,{invoiceOrigin:n,style:{width:"100%"}})})}),e.jsx(L,{children:e.jsx(b,{onClick:s,color:"primary",children:"Close"})})]})]})}Fe.propTypes={invoiceOrigin:l.func};function Le({onSelect:n}){const[o,r]=i.useState(!1),d=()=>{r(!0)},s=()=>{r(!1)},a=j=>{n(j),s()};return e.jsxs("div",{children:[e.jsx(b,{variant:"outlined",onClick:d,children:"Add Product"}),e.jsxs(q,{open:o,onClose:s,maxWidth:"xl",fullWidth:!0,children:[e.jsx(A,{children:"Products"}),e.jsx(F,{children:e.jsx(J,{sx:{width:"100%"},children:e.jsx(ut,{onSelect:a,style:{width:"100%"}})})}),e.jsx(L,{children:e.jsx(b,{onClick:s,color:"primary",children:"Close"})})]})]})}Le.propTypes={onSelect:l.func};function Ee({handleSendOrder:n,partner:o}){const[r,d]=i.useState(!1),s=()=>{d(!0)},a=()=>{d(!1)};return e.jsxs(P,{direction:"row",alignItems:"center",children:[e.jsxs(P,{direction:"column",alignItems:"center",spacing:1,children:[e.jsx(I,{onClick:s,sx:{color:"blue",backgroundColor:"#ddf","&:hover":{backgroundColor:"#bbf"}},children:e.jsx(de,{icon:"mdi:send"})}),e.jsx(m,{variant:"caption",sx:{color:"blue"},children:"Email"})]}),e.jsxs(q,{open:r,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(A,{id:"alert-dialog-title",children:"Confirm Send"}),e.jsx(F,{children:e.jsxs(pe,{id:"alert-dialog-description",children:["Are you sure you want to send this order to ",e.jsxs("b",{children:[o.name," [",o.email,"]"]}),"?"]})}),e.jsxs(L,{children:[e.jsx(b,{onClick:a,color:"primary",children:"Cancel"}),e.jsx(b,{onClick:n,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}Ee.propTypes={handleSendOrder:l.func,partner:l.any};function Ne({onSelect:n}){const[o,r]=i.useState(!1),d=()=>{r(!0)},s=()=>{r(!1)},a=j=>{n(j),s()};return e.jsxs("div",{children:[e.jsx(b,{variant:"outlined",onClick:d,children:"Set"}),e.jsxs(q,{open:o,onClose:s,maxWidth:"xl",fullWidth:!0,children:[e.jsx(A,{children:"Customers"}),e.jsx(F,{sx:{padding:0},children:e.jsx(J,{sx:{width:"100%"},children:e.jsx(Pe,{onSelect:a,style:{width:"100%"}})})}),e.jsx(L,{children:e.jsx(b,{onClick:s,color:"primary",children:"Close"})})]})]})}Ne.propTypes={onSelect:l.func};function We({onSelect:n,filterParentContactOption:o}){const[r,d]=i.useState(!1),s=()=>{d(!0)},a=()=>{d(!1)},j=p=>{n(p),a()};return i.useEffect(()=>{console.log("DeliveryPopupModal Props:"),console.log("filterParentContactOption:",o)},[n,o]),e.jsxs("div",{children:[e.jsx(b,{variant:"outlined",onClick:s,children:"Set"}),e.jsxs(q,{open:r,onClose:a,maxWidth:"xl",fullWidth:!0,children:[e.jsx(A,{children:"Customers"}),e.jsx(F,{sx:{padding:0},children:e.jsx(J,{sx:{width:"100%"},children:e.jsx(Pe,{onSelect:j,filterTypeOption:"delivery",filterParentContactOption:o,style:{width:"100%"}})})}),e.jsx(L,{children:e.jsx(b,{onClick:a,color:"primary",children:"Close"})})]})]})}We.propTypes={onSelect:l.func,filterParentContactOption:l.number};function $e({handleCancelOrder:n}){const[o,r]=i.useState(!1),d=()=>{r(!0)},s=()=>{r(!1)};return e.jsxs(P,{direction:"row",alignItems:"center",children:[e.jsxs(P,{direction:"column",alignItems:"center",spacing:1,children:[e.jsx(I,{onClick:d,sx:{color:"red",backgroundColor:"#fdd","&:hover":{backgroundColor:"#fbb"}},children:e.jsx(de,{icon:"eva:close-outline"})}),e.jsx(m,{variant:"caption",sx:{color:"red"},children:"Cancel"})]}),e.jsxs(q,{open:o,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[e.jsx(A,{id:"alert-dialog-title",children:"Confirm Cancellation"}),e.jsx(F,{children:e.jsx(pe,{id:"alert-dialog-description",children:"Are you sure you want to cancel this order?"})}),e.jsxs(L,{children:[e.jsx(b,{onClick:s,color:"primary",children:"Cancel"}),e.jsx(b,{onClick:n,color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})}$e.propTypes={handleCancelOrder:l.func};function Me({onSelect:n}){const[o,r]=i.useState(!1),d=()=>{r(!0)},s=()=>{r(!1)},a=j=>{n([j]),s()};return e.jsxs("div",{children:[e.jsx(b,{variant:"outlined",onClick:d,children:"Add SKU"}),e.jsxs(q,{open:o,onClose:s,maxWidth:"xl",fullWidth:!0,children:[e.jsx(A,{children:"Products"}),e.jsx(F,{children:e.jsx(J,{sx:{width:"100%"},children:e.jsx(xt,{onSelect:a,style:{width:"100%"}})})}),e.jsx(L,{children:e.jsx(b,{onClick:s,color:"primary",children:"Close"})})]})]})}Me.propTypes={onSelect:l.func};function Ue({orderId:n}){const[o,r]=i.useState(!1),[d,s]=i.useState(""),[a,j]=i.useState(""),[p,O]=i.useState({id:0,name:"",street:"",city:"",state:"",country:"",zip:"",phone:"",mobile:"",email:""}),[y,k]=i.useState({id:0,name:"",street:"",city:"",state:"",country:"",zip:"",phone:"",mobile:"",email:""}),[C,_]=i.useState([]),[D,S]=i.useState([]),[Y,ue]=i.useState({}),[he,U]=i.useState(0),[ee,z]=i.useState(0),[te,B]=i.useState(0),[ne,oe]=i.useState(""),[re,se]=i.useState(""),[V,ae]=i.useState(""),[ie,xe]=i.useState("");i.useEffect(()=>{ze()},[]);const u=()=>{H(!0,!1)},f=()=>{H(!1,!0)},w=(t,c)=>{console.log("Fetching order totals");const g=`${Z.baseURL}/api-proxy/proxy?method=post&resource=ordertotals`;console.log(g);const x=C.map(v=>({product_id:v[2].id,product_uom_qty:v[2].product_uom_qty})),R={partner_id:p.id,order_line:x};console.log("Request body",R),K.post(g,R,{headers:{Authorization:`Bearer ${X.get("jwt")}`}}).then(v=>{console.log(v.data),ue(v.data.result.product_prices),U(v.data.result.subtotal),z(v.data.result.total)}).catch(v=>{console.error("Error fetching order totals:",v)})};i.useEffect(()=>{w();const t=C.reduce((c,g)=>c+g[2].product_uom_qty,0);B(t)},[p,C]);const E=t=>{oe(t.target.value)},N=t=>{se(t.target.value)},H=(t,c)=>{r(!0),console.log("Saving Order");let g="post";t===!0&&(g="cancel");const x=`${Z.baseURL}/api-proxy/proxy?method=${g}&resource=orders`;console.log(x),console.log(C);const R=C.map(T=>[T[0],T[1],{product_id:T[2].id,product_uom_qty:T[2].product_uom_qty}]),v=D.map(T=>[2,T[1],{}]),Q=R.concat(v),je={order:{id:parseInt(n,10),partner_id:p.id,order_line:Q,x_studio_notes:ne,client_order_ref:re,...c&&{is_send:!0},...y.id&&{partner_shipping_id:y.id}}};console.log("Request body",je),K.post(x,je,{headers:{Authorization:`Bearer ${X.get("jwt")}`}}).then(T=>{console.log(T.data),r(!1),T.data.result.success===!1?alert(T.data.result.message):window.location.reload()}).catch(T=>{console.error("Error saving order:",T)})},$=(t,c,g)=>{if(t<0||t>=C.length)return;const x=C.filter((v,Q)=>Q===t);x[0][0]!==0&&(console.log("Adding line to delete queue",x),S(D.concat(x)));const R=C.filter((v,Q)=>Q!==t);_(R)},W=(t,c)=>{const g=C.map((x,R)=>{if(R===t){console.log("handle qty change",x);const v=["consu","service"];return x[2].qty_available<c&&!v.includes(x[2].type)?(alert("Quantity available is insufficient."),x):[x[0],x[1],{...x[2],product_uom_qty:c!==0?Number(c):0}]}return x});_(g)},le=t=>t?`$${t.toFixed(2)}`:"",ze=()=>{console.log("Fetching Order Details");const t=`${Z.baseURL}/api-proxy/proxy?method=get&resource=orders&order_id=${n}`;console.log(t),K.get(t,{headers:{Authorization:`Bearer ${X.get("jwt")}`}}).then(c=>{console.log(c.data.data),s(c.data.data.name),ae(c.data.data.ship_tracking_number),xe(c.data.data.ship_date),O(c.data.data.customer_id),k(c.data.data.partner_shipping_id),oe(c.data.data.x_studio_notes),se(c.data.data.client_order_ref?c.data.data.client_order_ref:"");const g=c.data.data.order_line.map(x=>[1,x.id,{line_id:x.id,id:x.product_id.id,name:x.name,product_uom_qty:x.product_uom_qty,attributes:x.product_id.attributes,qty_available:x.product_id.qty_available,type:x.product_id.type}]);console.log(g),_(g),U(c.data.data.amount_untaxed),z(c.data.data.amount_total),j(c.data.data.state)}).catch(c=>{console.error("Error fetching order details:",c)})},Be=t=>{console.log("Setting order partner"),console.log(t),O({id:t.id,name:t.name,street:t.street,city:t.city,state:t.state,country:t.country,zip:t.zip,phone:t.phone,mobile:t.mobile,email:t.email}),k({id:0,name:"",street:"",city:"",state:"",country:"",zip:"",phone:"",mobile:"",email:""})},Ve=t=>{console.log("Setting order partner"),console.log(t),k({id:t.id,name:t.name,street:t.street,city:t.city,state:t.state,country:t.country,zip:t.zip,phone:t.phone,mobile:t.mobile,email:t.email})},me=t=>{console.log("Adding order lines"),console.log(t),t.forEach(c=>{_(g=>[...g,[0,0,{id:c.id,name:`[${c.default_code}] ${c.name}`,product_uom_qty:c.qty_needed||1,attributes:c.attributes,qty_available:c.qty_available}]])})},He=e.jsxs(e.Fragment,{children:[e.jsx(P,{spacing:3,direction:"row",alignItems:"center",children:e.jsx(G,{fullWidth:!0,name:"partner_id",label:"Customer",value:p.name,InputProps:{readOnly:!0,endAdornment:e.jsx(I,{children:e.jsx(Ne,{onSelect:Be})})}})}),p.name&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(m,{variant:"body1",fontWeight:"bold",children:"Address:"}),e.jsx(m,{variant:"body1",children:p.street}),e.jsxs(m,{variant:"body1",children:[p.city," ",p.state]}),e.jsxs(m,{variant:"body1",children:[p.country," ",p.zip]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Phone:"})," ",p.phone]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Mobile:"})," ",p.mobile]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Email:"})," ",p.email]})]}),e.jsx("div",{style:{margin:"16px 0"}}),p.name&&e.jsx(P,{spacing:3,direction:"row",alignItems:"center",children:e.jsx(G,{fullWidth:!0,name:"partner_shipping_id",label:"Delivery Address",value:y.name,InputProps:{readOnly:!0,endAdornment:e.jsx(I,{children:e.jsx(We,{onSelect:Ve,filterParentContactOption:p.id})})}})}),y.name&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(m,{variant:"body1",fontWeight:"bold",children:"Address:"}),e.jsx(m,{variant:"body1",children:y.street}),e.jsxs(m,{variant:"body1",children:[y.city," ",p.state]}),e.jsxs(m,{variant:"body1",children:[y.country," ",p.zip]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Phone:"})," ",y.phone]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Mobile:"})," ",y.mobile]}),e.jsxs(m,{variant:"body1",children:[e.jsx("b",{children:"Email:"})," ",y.email]})]}),e.jsx("div",{style:{margin:"16px 0"}}),V&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsxs(m,{variant:"body1",children:[e.jsx("strong",{children:"Tracking #: "}),V,e.jsx(I,{onClick:()=>{navigator.clipboard.writeText(V),alert("Tracking number copied to clipboard!")},children:e.jsx(be,{icon:bt,sx:{color:"text.disabled",width:20,height:20}})})]})]}),ie&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"16px 0"}}),e.jsxs(m,{variant:"body1",children:[e.jsx("strong",{children:"Ship Date: "}),ie]})]}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(I,{children:e.jsx(Le,{onSelect:me})}),e.jsx(I,{children:e.jsx(Me,{onSelect:me})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(Ce,{component:fe,children:e.jsxs(_e,{children:[e.jsx(ve,{children:e.jsxs(M,{children:[e.jsx(h,{children:"Product"}),e.jsx(h,{children:"Attributes"}),e.jsx(h,{children:"Unit Price"}),e.jsx(h,{children:"Qty Available"}),e.jsx(h,{children:"Qty"}),e.jsx(h,{children:"Subtotal"}),e.jsx(h,{})]})}),e.jsx(Se,{children:C.map((t,c)=>e.jsxs(M,{children:[e.jsx(h,{children:t[2].name}),e.jsx(h,{children:t[2].attributes.map((g,x)=>e.jsx(ge,{label:g.name||g.attribute,variant:"outlined"},x))}),e.jsx(h,{children:le(Y[t[2].id])}),e.jsx(h,{children:t[2].qty_available}),e.jsx(h,{children:e.jsx(G,{type:"number",style:{minWidth:"100px"},value:t[2].product_uom_qty!==0?t[2].product_uom_qty:"",onChange:g=>W(c,g.target.value)})}),e.jsx(h,{children:le(Y[t[2].id]*t[2].product_uom_qty)}),e.jsx(h,{align:"right",children:e.jsx(I,{onClick:()=>$(c),children:e.jsx(de,{icon:"eva:trash-2-outline"})})})]},c))})]})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsxs(m,{variant:"body1",fontWeight:"bold",children:["Total Product Qty: ",te]}),e.jsxs(m,{variant:"body1",fontWeight:"bold",children:["Subtotal: ",le(he)]}),e.jsxs(m,{variant:"body1",fontWeight:"bold",children:["Total: ",le(ee)]}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(ce,{container:!0,spacing:2,children:e.jsx(ce,{item:!0,xs:12,md:6,lg:6,children:e.jsx(G,{label:"Notes",value:ne,multiline:!0,fullWidth:!0,rows:4,onChange:E})})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(ce,{container:!0,spacing:2,children:e.jsx(ce,{item:!0,xs:12,md:6,lg:6,children:e.jsx(G,{label:"PO Number",value:re,fullWidth:!0,onChange:N})})}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(pt,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:H,loading:o,children:"Save"})]});return e.jsxs(Te,{children:[e.jsxs(P,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[e.jsxs(m,{variant:"h4",children:["Order ",d,e.jsx(ge,{label:a,color:a==="cancel"?"danger":"primary",variant:"outlined",style:{marginLeft:"10px"}})]}),(a==="draft"||a==="sent")&&e.jsxs(P,{direction:"row",spacing:2,children:[e.jsx($e,{handleCancelOrder:u}),e.jsx(Ee,{handleSendOrder:f,partner:p})]}),a==="sale"&&e.jsx(P,{direction:"row",spacing:2,children:e.jsx(Fe,{invoiceOrigin:d})})]}),He,e.jsx(Oe,{})]})}Ue.propTypes={orderId:l.any};function Nt(){mt();const{orderId:n}=st();return e.jsxs(e.Fragment,{children:[e.jsx(at,{children:e.jsx("title",{children:" Order Detail | BEX Sales "})}),e.jsx(Ue,{orderId:n})]})}export{Nt as default};
