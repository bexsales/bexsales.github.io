import{t as y,C as v,r as a,j as e,S as d,I as C,H as L,J as S,T as c,B as E,K as I,L as b,M as k,m as B,F,E as A,G as D,W as P}from"./index-CrQ_cH7N.js";import{T as h}from"./TextField-BcsQvwiw.js";import{L as T}from"./LoadingButton-CIsc6dwm.js";import{C as K}from"./Card-xykPG5M7.js";import"./Select-3JCclZm4.js";import"./isMuiElement-BEt_GLtU.js";function R(){const x=y(),u=v(),[n,p]=a.useState(!1),[m,o]=a.useState(!1),[t,g]=a.useState({identifier:"",password:""}),[r,f]=a.useState(null),i=s=>{g({...t,[s.target.name]:s.target.value})},j=s=>{s.key==="Enter"&&l()},l=async()=>{o(!0);try{const s=await F.post(`${A.baseURL}/auth/local`,{identifier:t.identifier,password:t.password});console.log("Authentication successful",s.data),D.set("jwt",s.data.jwt,{expires:7}),u.push("/")}catch(s){console.error("Authentication error",s),f("Invalid email or password.")}finally{o(!1)}},w=e.jsxs(e.Fragment,{children:[e.jsxs(d,{spacing:3,children:[e.jsx(h,{name:"identifier",label:"Username",value:t.identifier,onChange:i}),e.jsx(h,{name:"password",label:"Password",type:n?"text":"password",value:t.password,onChange:i,onKeyDown:j,InputProps:{endAdornment:e.jsx(C,{position:"end",children:e.jsx(L,{onClick:()=>p(!n),edge:"end",children:e.jsx(S,{icon:n?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),r&&e.jsx(c,{color:"error",sx:{mt:1},children:r}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(T,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:l,loading:m,children:"Login"})]});return e.jsxs(E,{sx:{...I({color:B(x.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(b,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(d,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(K,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(c,{variant:"h4",children:"Sign in to BEX Sales"}),e.jsx(k,{sx:{my:3}}),w]})})]})}function J(){return e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx("title",{children:" Login | BEX Sales "})}),e.jsx(R,{})]})}export{J as default};
