import{g as Y,k as Z,r as i,a as J,N as ne,_ as g,j as e,h as H,c as V,l as z,d as ee,O as ue,Q as te,i as re,R as pe,m as he,U as me,T as A,S as oe,V as be,P as l,B as xe,X as fe,I as ge,H as Ce,Y as ye,C as je,E as ke,F as Pe,G as ve,Z as _e,W as Se}from"./index-BiFuz3rn.js";import{T as W,a as x,b as Re,c as Ie,d as Te,e as Fe,f as Be,g as $e,h as Ne}from"./search-fill-CroszyQg.js";import{L as Oe}from"./label-ClEEvr3c.js";import{u as we,O as Le}from"./Select-BSvtViZa.js";import{C as ze}from"./Container-DbbtiuI8.js";import{C as Ee}from"./Card-rz0eWA_E.js";import{u as qe}from"./use-auth-aK2ox_U1.js";function Me(t){return Y("PrivateSwitchBase",t)}Z("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Ae=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],He=t=>{const{classes:o,checked:r,disabled:a,edge:s}=t,n={root:["root",r&&"checked",a&&"disabled",s&&`edge${z(s)}`],input:["input"]};return ee(n,Me,o)},Ue=H(ue)(({ownerState:t})=>g({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),De=H("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Ve=i.forwardRef(function(o,r){const{autoFocus:a,checked:s,checkedIcon:n,className:d,defaultChecked:j,disabled:C,disableFocusRipple:h=!1,edge:_=!1,icon:m,id:f,inputProps:b,inputRef:N,name:u,onBlur:k,onChange:S,onFocus:P,readOnly:O,required:L=!1,tabIndex:B,type:v,value:R}=o,I=J(o,Ae),[F,X]=we({controlled:s,default:!!j,name:"SwitchBase",state:"checked"}),T=ne(),G=y=>{P&&P(y),T&&T.onFocus&&T.onFocus(y)},U=y=>{k&&k(y),T&&T.onBlur&&T.onBlur(y)},K=y=>{if(y.nativeEvent.defaultPrevented)return;const E=y.target.checked;X(E),S&&S(y,E)};let w=C;T&&typeof w>"u"&&(w=T.disabled);const c=v==="checkbox"||v==="radio",p=g({},o,{checked:F,disabled:w,disableFocusRipple:h,edge:_}),$=He(p);return e.jsxs(Ue,g({component:"span",className:V($.root,d),centerRipple:!0,focusRipple:!h,disabled:w,tabIndex:null,role:void 0,onFocus:G,onBlur:U,ownerState:p,ref:r},I,{children:[e.jsx(De,g({autoFocus:a,checked:s,defaultChecked:j,className:$.input,disabled:w,id:c?f:void 0,name:u,onChange:K,readOnly:O,ref:N,required:L,ownerState:p,tabIndex:B,type:v},v==="checkbox"&&R===void 0?{}:{value:R},b)),F?n:m]}))}),We=te(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Xe=te(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),Ge=te(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Ke(t){return Y("MuiCheckbox",t)}const Q=Z("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Qe=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Ye=t=>{const{classes:o,indeterminate:r,color:a,size:s}=t,n={root:["root",r&&"indeterminate",`color${z(a)}`,`size${z(s)}`]},d=ee(n,Ke,o);return g({},o,d)},Ze=H(Ve,{shouldForwardProp:t=>pe(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[o.root,r.indeterminate&&o.indeterminate,r.color!=="default"&&o[`color${z(r.color)}`]]}})(({theme:t,ownerState:o})=>g({color:(t.vars||t).palette.text.secondary},!o.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${o.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:he(o.color==="default"?t.palette.action.active:t.palette[o.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},o.color!=="default"&&{[`&.${Q.checked}, &.${Q.indeterminate}`]:{color:(t.vars||t).palette[o.color].main},[`&.${Q.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),Je=e.jsx(Xe,{}),et=e.jsx(We,{}),tt=e.jsx(Ge,{}),ot=i.forwardRef(function(o,r){var a,s;const n=re({props:o,name:"MuiCheckbox"}),{checkedIcon:d=Je,color:j="primary",icon:C=et,indeterminate:h=!1,indeterminateIcon:_=tt,inputProps:m,size:f="medium",className:b}=n,N=J(n,Qe),u=h?_:C,k=h?_:d,S=g({},n,{color:j,indeterminate:h,size:f}),P=Ye(S);return e.jsx(Ze,g({type:"checkbox",inputProps:g({"data-indeterminate":h},m),icon:i.cloneElement(u,{fontSize:(a=u.props.fontSize)!=null?a:f}),checkedIcon:i.cloneElement(k,{fontSize:(s=k.props.fontSize)!=null?s:f}),ownerState:S,ref:r,className:V(P.root,b)},N,{classes:P}))});function nt(t){return Y("MuiFormControlLabel",t)}const M=Z("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),rt=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],at=t=>{const{classes:o,disabled:r,labelPlacement:a,error:s,required:n}=t,d={root:["root",r&&"disabled",`labelPlacement${z(a)}`,s&&"error",n&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",s&&"error"]};return ee(d,nt,o)},st=H("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:r}=t;return[{[`& .${M.label}`]:o.label},o.root,o[`labelPlacement${z(r.labelPlacement)}`]]}})(({theme:t,ownerState:o})=>g({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${M.disabled}`]:{cursor:"default"}},o.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},o.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},o.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${M.label}`]:{[`&.${M.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),ct=H("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,o)=>o.asterisk})(({theme:t})=>({[`&.${M.error}`]:{color:(t.vars||t).palette.error.main}})),lt=i.forwardRef(function(o,r){var a,s;const n=re({props:o,name:"MuiFormControlLabel"}),{className:d,componentsProps:j={},control:C,disabled:h,disableTypography:_,label:m,labelPlacement:f="end",required:b,slotProps:N={}}=n,u=J(n,rt),k=ne(),S=(a=h??C.props.disabled)!=null?a:k==null?void 0:k.disabled,P=b??C.props.required,O={disabled:S,required:P};["checked","name","onChange","value","inputRef"].forEach(F=>{typeof C.props[F]>"u"&&typeof n[F]<"u"&&(O[F]=n[F])});const L=me({props:n,muiFormControl:k,states:["error"]}),B=g({},n,{disabled:S,labelPlacement:f,required:P,error:L.error}),v=at(B),R=(s=N.typography)!=null?s:j.typography;let I=m;return I!=null&&I.type!==A&&!_&&(I=e.jsx(A,g({component:"span"},R,{className:V(v.label,R==null?void 0:R.className),children:I}))),e.jsxs(st,g({className:V(v.root,d),ownerState:B,ref:r},u,{children:[i.cloneElement(C,O),P?e.jsxs(oe,{direction:"row",alignItems:"center",children:[I,e.jsxs(ct,{ownerState:B,"aria-hidden":!0,className:v.asterisk,children:[" ","*"]})]}):I]}))}),it={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function dt(t,o,r){return t?Math.max(0,(1+t)*o-r):0}function ae({query:t}){return e.jsx(W,{children:e.jsx(x,{align:"center",colSpan:6,sx:{py:3},children:e.jsxs(be,{sx:{textAlign:"center"},children:[e.jsx(A,{variant:"h6",paragraph:!0,children:"Not found"}),e.jsxs(A,{variant:"body2",children:["No results found for  ",e.jsxs("strong",{children:['"',t,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}ae.propTypes={query:l.string};function se({name:t,customer:o,create_date:r,amount_untaxed:a,amount_tax:s,amount_total:n,state:d,x_studio_notes:j,client_order_ref:C,ship_date:h,ship_tracking_number:_,handleClick:m}){const f=b=>`$${b.toFixed(2)}`;return e.jsxs(W,{hover:!0,tabIndex:-1,onClick:m,children:[e.jsx(x,{children:t}),e.jsx(x,{children:o}),e.jsx(x,{children:r}),e.jsx(x,{children:f(a)}),e.jsx(x,{children:f(s)}),e.jsx(x,{children:f(n)}),e.jsx(x,{children:e.jsx(Oe,{color:d!=="draft"&&"error"||"success",children:d})}),e.jsx(x,{children:j}),e.jsx(x,{children:C}),e.jsx(x,{children:h}),e.jsx(x,{children:_})]})}se.propTypes={name:l.any,customer:l.any,create_date:l.any,amount_untaxed:l.any,amount_tax:l.any,amount_total:l.any,state:l.any,x_studio_notes:l.any,client_order_ref:l.any,ship_date:l.any,ship_tracking_number:l.any,handleClick:l.func};function ce({order:t,orderBy:o,headLabel:r,onRequestSort:a}){const s=n=>d=>{a(d,n)};return e.jsx(Re,{children:e.jsx(W,{children:r.map(n=>e.jsx(x,{align:n.align||"left",sortDirection:o===n.id?t:!1,sx:{width:n.width,minWidth:n.minWidth},children:e.jsxs(Ie,{hideSortIcon:!0,active:o===n.id,direction:o===n.id?t:"desc",onClick:s(n.id),children:[n.label,o===n.id?e.jsx(xe,{sx:{...it},children:t==="desc"?"sorted descending":"sorted ascending"}):null]})},n.id))})})}ce.propTypes={order:l.oneOf(["asc","desc"]),orderBy:l.string,headLabel:l.array,onRequestSort:l.func};function le({emptyRows:t,height:o}){return t?e.jsx(W,{sx:{...o&&{height:o*t}},children:e.jsx(x,{colSpan:9})}):null}le.propTypes={emptyRows:l.number,height:l.number};function ie({filterName:t,onFilterName:o,onClickSearch:r,onHitEnter:a,isPartnerSearch:s,onTogglePartnerSearch:n}){return e.jsx(fe,{sx:{height:96,display:"flex",justifyContent:"space-between",p:d=>d.spacing(0,1,0,3)},children:e.jsxs(oe,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(Le,{value:t,onChange:o,onKeyDown:a,placeholder:s?"Search by partner...":"Search order...",endAdornment:e.jsx(ge,{position:"end",children:e.jsx(Ce,{onClick:r,edge:"end",children:e.jsx(ye,{icon:Te,style:{color:"text.disabled",width:20,height:20}})})})}),e.jsx(lt,{control:e.jsx(ot,{checked:s,onChange:n,color:"primary"}),label:"Search by Partner"})]})})}ie.propTypes={filterName:l.string,onFilterName:l.func,onClickSearch:l.func,onHitEnter:l.func,isPartnerSearch:l.bool,onTogglePartnerSearch:l.func};function ut(){const t=je(),[o,r]=i.useState([]),[a,s]=i.useState(0),[n,d]=i.useState(0),[j,C]=i.useState("asc"),[h,_]=i.useState("name"),[m,f]=i.useState(""),[b,N]=i.useState(!1),[u,k]=i.useState(25),[S,P]=i.useState(0),O=i.useRef(o),L=i.useRef(u),B=i.useRef(a),v=i.useRef(m);i.useEffect(()=>{O.current=o,L.current=u,B.current=a,v.current=m,R(B.current,L.current,O.current,v.current,b)},[]);const R=(c,p,$,y,E)=>{console.log("Fetching Orders");const de=c+1;let D=`${ke.baseURL}/api-proxy/proxy?method=get&resource=orders&page=${de}&page_size=${p}`;y&&(D+=`&name=${y}`),E&&(D+=`&search_partner=${E}`),console.log(D),Pe.get(D,{headers:{Authorization:`Bearer ${ve.get("jwt")}`}}).then(q=>{console.log(q.data.data),r([...$,...q.data.data]),P(q.data.count)}).catch(q=>{console.error("Error fetching orders:",q)})},I=(c,p)=>{p!==""&&(C(h===p&&j==="asc"?"desc":"asc"),_(p))},F=(c,p)=>{s(p);const $=u*p;$>n&&(d($),R(p,u,o,m,b))},X=c=>{s(0),k(parseInt(c.target.value,10))},T=c=>{f(c.target.value)},G=c=>{c.key==="Enter"&&U()},U=c=>{s(0),R(a,u,[],m,b)},K=(c,p)=>{t.push(`/orders/${p}`)},w=!o.length&&!!m;return e.jsxs(ze,{children:[e.jsx(oe,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:e.jsx(A,{variant:"h4",children:"Orders"})}),e.jsxs(Ee,{children:[e.jsx(ie,{filterName:m,onFilterName:T,onClickSearch:U,onHitEnter:G,isPartnerSearch:b,onTogglePartnerSearch:()=>N(!b)}),e.jsx(_e,{children:e.jsx(Fe,{sx:{overflow:"unset"},children:e.jsxs(Be,{sx:{minWidth:800},children:[e.jsx(ce,{order:j,orderBy:h,rowCount:o.length,onRequestSort:I,headLabel:[{id:"name",label:"Name"},{id:"customer",label:"Customer"},{id:"create_date",label:"Create Date"},{id:"amount_untaxed",label:"Amount Untaxed"},{id:"amount_tax",label:"Amount Tax"},{id:"amount_total",label:"Amount Total"},{id:"state",label:"State"},{id:"x_studio_notes",label:"Notes"},{id:"client_order_ref",label:"PO Number"},{id:"ship_date",label:"Ship Date"},{id:"ship_tracking_number",label:"Tracking #"}]}),e.jsxs($e,{children:[o.slice(a*u,a*u+u).map(c=>e.jsx(se,{name:c.name,customer:c.customer_id.name,create_date:c.create_date,amount_untaxed:c.amount_untaxed,amount_tax:c.amount_tax,amount_total:c.amount_total,state:c.state,x_studio_notes:c.x_studio_notes,client_order_ref:c.client_order_ref,ship_date:c.ship_date,ship_tracking_number:c.ship_tracking_number,handleClick:p=>K(p,c.id)},c.id)),e.jsx(le,{height:77,emptyRows:dt(a,u,o.length)}),w&&e.jsx(ae,{query:m})]})]})})}),e.jsx(Ne,{page:a,component:"div",count:S,rowsPerPage:u,onPageChange:F,rowsPerPageOptions:[25],onRowsPerPageChange:X})]})]})}function Ct(){return qe(),e.jsxs(e.Fragment,{children:[e.jsx(Se,{children:e.jsx("title",{children:" Order | BEX Sales "})}),e.jsx(ut,{})]})}export{Ct as default};
