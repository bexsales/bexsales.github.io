import{t as y,w as v,r as a,j as e,S as d,I as L,D as S,E as C,T as c,B as E,F as I,n as b,L as k,G as A,y as B,A as D,z as F,W as P}from"./index-B8l5MPOb.js";import{T as h}from"./TextField-zG--90SY.js";import{L as T}from"./LoadingButton-BGB-_34k.js";import{C as R}from"./Card-DExzLAxj.js";import"./isMuiElement-B0YXicCn.js";import"./CircularProgress-j2gw31bc.js";import"./Select-CETdWe22.js";function U(){const x=y(),p=v(),[n,u]=a.useState(!1),[m,o]=a.useState(!1),[t,g]=a.useState({identifier:"",password:""}),[r,f]=a.useState(null),i=s=>{g({...t,[s.target.name]:s.target.value})},j=s=>{s.key==="Enter"&&l()},l=async()=>{o(!0);try{const s=await B.post(`${D.baseURL}/auth/local`,{identifier:t.identifier,password:t.password});console.log("Authentication successful",s.data),F.set("jwt",s.data.jwt,{expires:7}),p.push("/")}catch(s){console.error("Authentication error",s),f("Invalid email or password.")}finally{o(!1)}},w=e.jsxs(e.Fragment,{children:[e.jsxs(d,{spacing:3,children:[e.jsx(h,{name:"identifier",label:"Username",value:t.identifier,onChange:i}),e.jsx(h,{name:"password",label:"Password",type:n?"text":"password",value:t.password,onChange:i,onKeyDown:j,InputProps:{endAdornment:e.jsx(L,{position:"end",children:e.jsx(S,{onClick:()=>u(!n),edge:"end",children:e.jsx(C,{icon:n?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),r&&e.jsx(c,{color:"error",sx:{mt:1},children:r}),e.jsx("div",{style:{margin:"16px 0"}}),e.jsx(T,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:l,loading:m,children:"Login"})]});return e.jsxs(E,{sx:{...I({color:b(x.palette.background.default,.9),imgUrl:"/assets/background/overlay_4.jpg"}),height:1},children:[e.jsx(k,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),e.jsx(d,{alignItems:"center",justifyContent:"center",sx:{height:1},children:e.jsxs(R,{sx:{p:5,width:1,maxWidth:420},children:[e.jsx(c,{variant:"h4",children:"Sign in to BEX Sales"}),e.jsx(A,{sx:{my:3}}),w]})})]})}function $(){return e.jsxs(e.Fragment,{children:[e.jsx(P,{children:e.jsx("title",{children:" Login | BEX Sales "})}),e.jsx(U,{})]})}export{$ as default};
